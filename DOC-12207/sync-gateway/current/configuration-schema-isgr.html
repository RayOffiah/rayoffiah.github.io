<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://metrics.couchbase.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<title>Inter-Sync&#160;Gateway Replication Configuration | Couchbase Docs</title>
<link rel="canonical" href="https://docs.couchbase.com/sync-gateway/current/configuration-schema-isgr.html">
<link rel="stylesheet" href="../../_/css/site.css">
<script src="../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Using Sync Gateway&#x27;s Admin REST API to configure and manage inter-Sync&amp;#160;Gateway replications">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="sync-gateway">
<meta name="dcterms.identifier" content="3.1">
<meta name="page-url" content="/sync-gateway/current/configuration-schema-isgr.html">
<meta name="page-nav-header-levels" content="0">

<meta name="docsearch:component" content="sync-gateway">
<meta name="docsearch:component_title" content="Sync Gateway">
<meta name="docsearch:cversion" content="3.1">
<meta name="docsearch:component_version" content="sync-gateway@3.1">
<meta name="docsearch:module" content="">
<meta name="docsearch:breadcrumbs" content="Sync Gateway / Configuration / Inter-Sync&#160;Gateway Replication">
<meta name="docsearch:topic_type" content="">
<meta name="docsearch:version_rank" content="1">
<meta name="docsearch:status" content="">
<meta name="docsearch:edition" content="">
<meta name="docsearch:page_rank" content="50">


<meta name="generator" content="Antora 3.1.4">
<link rel="icon" href="../../_/img/favicon.svg" type="image/svg+xml">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon" sizes="any">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation"
                      href="https://docs.couchbase.com/home/index.html">
                    <img src="../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">

                  <li class="nav-item "">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item ">
                    <a class="nav-link" href="../../home/server.html">
                      Server
                      
                    </a>
                  </li>
                  <li class="nav-item nav-item-selected">
                    <a class="nav-link" href="../../home/mobile.html">
                      Mobile
                      
                    </a>
                  </li>
                  <li class="nav-item ">
                    <a class="nav-link" href="../../cloud/index.html">
                      Capella
                      
                    </a>
                  </li>
                  <li class="nav-item ">
                    <a class="nav-link" href="../../home/sdk.html">
                      SDKs
                      
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>
              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
    <template id="page-versions" style="display: none">
      <select class="version_list" data-component="sync-gateway">
        <option value="3.1" data-url="configuration-schema-isgr.html" selected>3.1</option>
        <option value="3.0" data-url="../3.0/configuration-schema-isgr.html">3.0</option>
        <option value="2.8" data-url="../2.8/index.html">2.8</option>
      </select>
    </template>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="2">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="https://github.com/couchbaselabs/docs-sync-gateway/edit/release/3.1/modules/ROOT/pages/configuration-schema-isgr.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="index.html">Sync Gateway</a></li>
<li class="crumb">Configuration</li>
<li class="crumb"><a href="configuration-schema-isgr.html">Inter-Sync&#160;Gateway Replication</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Inter-Sync&#160;Gateway Replication Configuration</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
<div class="paragraph">
<p>Using Sync Gateway&#8217;s Admin REST API to configure and manage inter-Sync&#160;Gateway replications<br></p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><em>Related  topics</em>:  <a href="configuration-overview.html" class="xref page">Overview</a>  |  <a href="configuration-schema-bootstrap.html" class="xref page">Bootstrap</a>  |  <a href="configuration-schema-database.html" class="xref page">Database</a>  |  <a href="#configuration-schema-db-security&.adoc#8212;&#8203;page}" class="xref unresolved">Database Security</a>  |  <a href="configuration-schema-access-control.html" class="xref page">Access Control</a> |  <a href="configuration-schema-import-filter.html" class="xref page">Import</a> |  Inter-Sync Gateway Replication</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Pre-3.0 Legacy Configuration Equivalents</div>
<div class="paragraph">
<p>This content describes configuration for Sync Gateway 3.0 and higher&#8201;&#8212;&#8201;for legacy configuration, see: <a href="configuration-properties-legacy.html" class="xref page">Legacy Pre-3.0 Configuration</a></p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In 3.0 we use the Admin REST API to provision persistent configuration changes.
This content introduces the <a href="#lbl-upsert-replication">Add or Update a Replication</a> endpoint for convenience&#8201;&#8212;&#8201;see <a href="rest-api-admin.html#/Replication" class="xref page">Replication</a> for a full description of the endpoints available.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Using CA Certificates</div>
<div class="paragraph">
<p>Required CA certificates must be added to the system certificate pool.</p>
</div>
<div class="paragraph">
<p>On Linux, this is done using one of the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adding the location of the certificate to <code>SSL_CERT_FILE</code> environment variable,</p>
</li>
<li>
<p>Placing the certificate in a location pointed to by the <code>SSL_CERT_DIR</code> environment variable.</p>
</li>
<li>
<p>Using one of the system-dependent locations <a href="https://go.dev/src/crypto/x509/root_linux.go">listed in this file</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For Windows-based systems, add CA certificate files to the system root certificate store.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="lbl-upsert-replication"><a class="anchor" href="#lbl-upsert-replication"></a>Add or Update a Replication</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre>PUT {db}/_replication</pre>
</div>
</div>
<div class="openblock">
<div class="content">
<p>Create or update a replication in the database.</p>
<p>If an existing replication is being updated, that replication must be stopped first.</p>
<p>Required Sync Gateway RBAC roles:</p>
<ul>
<li>Sync Gateway Replicator</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="parameters"><a class="anchor" href="#parameters"></a>Parameters</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="path-parameters"><a class="anchor" href="#path-parameters"></a>Path Parameters</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 50%;">
<col style="width: 16.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>db</strong><br>
<em>required</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="openblock">
<div class="content">
<p>The name of the database to run the operation against.</p>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="body-parameter"><a class="anchor" href="#body-parameter"></a>Body Parameter</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 50%;">
<col style="width: 16.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Body</strong><br>
<em>optional</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="openblock">
<div class="content">
<p>If the <code>replication_id</code> matches an existing replication then the existing configuration will be updated. Only the specified fields in the request will be used to update the existing configuration. Unspecified fields will remain untouched.</p>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#UserConfigurableReplicationProperties">UserConfigurableReplicationProperties</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="responses"><a class="anchor" href="#responses"></a>Responses</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 60%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP Code</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Updated existing configuration successfully</p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Created new replication successfully</p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>There was a problem with your request</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#HTTP_Error">HTTP_Error</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Resource could not be found</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#HTTP_Error">HTTP_Error</a></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="example"><a class="anchor" href="#example"></a>Example</h2>
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div id="tabs-1" class="openblock tabs is-sync is-loading">
<div class="content">
<div class="ulist tablist">
<ul>
<li id="tabs-1-curl" class="tab">
<p>Curl</p>
</li>
<li id="tabs-1-http" class="tab">
<p>HTTP</p>
</li>
</ul>
</div>
<div id="tabs-1-curl--panel" class="tabpanel" aria-labelledby="tabs-1-curl">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl --location --request PUT 'http://localhost:4985/db1-local/_replication/db1-rep-id1 '\
--header 'Content-Type: application/json' \
--data-raw '{
  "direction": "push",
  "purge_on_removal": false,
  "remote": "http://user1:password1@example.com:4984/db1-remote",
  "filter":"sync_gateway/bychannel",
  "query_params": {
    "channels":["channel.user1"]
  },
  "continuous": false
  }'</code></pre>
</div>
</div>
</div>
<div id="tabs-1-http--panel" class="tabpanel" aria-labelledby="tabs-1-http">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-http hljs" data-lang="http">PUT /db1-local/_replication/db1-rep-id1 HTTP/1.1
Host: localhost:4985
Content-Type: application/json
Content-Length: 235

{"direction": "push",
  "purge_on_removal":false,
  "remote": "http://user1:password1@example.com:4984/db1-remote",
  "filter":"sync_gateway/bychannel",
  "query_params": {
    "channels":["channel.user1"]
  },
  "continuous": false
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="replication"><a class="anchor" href="#replication"></a>Schema</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section shows Sync Gateway&#8217;s replication configuration settings in schema format for convenience in constructing JSON models for use in the Admin REST API.</p>
</div>
<div class="paragraph">
<p>The configuration settings described here are provisioned through the <a href="rest-api-admin.html#/Replication" class="xref page">Replication</a> endpoints.</p>
</div>
<pre>
{
   <a href="#adhoc">adhoc</a>: false,
   <a href="#batch_size">batch_size</a>: 200,
   <a href="#collections_enabled">collections_enabled</a>: false,
   <a href="#collections_local">collections_local</a>: [scope1.collection1,scope1.collection3,scope1.collection6],
   <a href="#collections_remote">collections_remote</a>: [scope1.collectionA,,scope1.collectionF],
   <a href="#conflict_resolution_type">conflict_resolution_type</a>: "default",
   <a href="#continuous">continuous</a>: false,
   <a href="#custom_conflict_resolver">custom_conflict_resolver</a>: "none",
   <a href="#direction">direction</a>: "string",
   <a href="#enable_delta_sync">enable_delta_sync</a>: false,
   <a href="#filter">filter</a>: "string",
   <a href="#initial_state">initial_state</a>: "running",
   <a href="#max_backoff_time">max_backoff_time</a>: 5,
   <a href="#purge_on_removal">purge_on_removal</a>: false,
   <a href="#query_params">query_params</a>: [],
   <a href="#remote">remote</a>: "string",
   <a href="#remote_password">remote_password</a>: "string",
   <a href="#remote_username">remote_username</a>: "string",
   <a href="#replication_id">replication_id</a>: "string",
   <a href="#run_as">run_as</a>: "string"
}
</pre>
<h4 id="adhoc" class="discrete"><code>adhoc</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>boolean</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>Set to true to run the replication as an adhoc replication instead of a persistent one.</p>
<p>This means that the replication will only last the period of the replication until the status is changed to <code>stopped</code> and then it will be removed automatically. It will also be removed if Sync Gateway restarts or if removed due to user action.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="batch_size" class="discrete"><code>batch_size</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>integer</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>The amount of changes to be sent in one batch of replications. Changing this is an enterprise-edition only feature.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="collections_enabled" class="discrete"><code>collections_enabled</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>boolean</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>If true, the replicator will run with collections, and will replicate all collections, unless otherwise limited by <code>keyspace_map</code>.</p>
<p>If false, the replicator will only replicate the default collection.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="collections_local" class="discrete"><code>collections_local</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>array</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>Limits the set of collections replicated to those listed in this array.</p>
<p>The replication will use all collections defined on the database if this list is empty.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="collections_remote" class="discrete"><code>collections_remote</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>array</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>Remaps the local collection name to the one specified in this array when replicating with the remote.</p>
<p>If only a subset of collections need remapping, elements in this array can be specified as <code>null</code> to preserve the local collection name.</p>
<p>The same index is used for both <code>collections_remote</code> and <code>collections_local</code>, and both arrays must be the same length.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="conflict_resolution_type" class="discrete"><code>conflict_resolution_type</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>string</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>This defines what conflict resolution policy Sync Gateway should use to apply when resolving conflicting revisions.</p>
<p>Changing this is an enterprise-edition only feature.</p>
<p><strong>Behaviour</strong></p>
<ul>
<li><em>default</em> - In priority order, this will cause
<ul>
<li>Deletes to always win (the delete with the logest revision history wins if both revisions are deletes)</li>
<li>The revision with the longest revision history to win. This means the the revision with the most changes and therefore the highest revision ID will win.</li>
</ul>
</li>
<li><em>localWins</em> - This will result in local revisions always being the winner in any conflict.</li>
<li><em>remoteWins</em> - This will result in remote revisions always being the winner in any conflict.</li>
<li><em>custom</em> - This will result in conflicts going through your own custom conflict resolver. You must provide this logic as a Javascript function in the <code>custom_conflict_resolver</code> parameter. This is an enterprise-edition only feature.</li>
</ul>
<p>Note: replications created prior to Sync Gateway 2.8 will default to <code>default</code>.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="continuous" class="discrete"><code>continuous</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>boolean</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>If true, changes will be immediately synced when they happen. This is known as a continuous replication.</p>
<p>If false, all changes will be synced until they have been processed. The replication will then cease and not process any future changes (unless started again by the user). This is known as a one-shot replication.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="custom_conflict_resolver" class="discrete"><code>custom_conflict_resolver</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>string</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>This specifies the Javascript function to use to resolve conflicts between conflicting revisions.</p>
<p>This <strong>must</strong> be used when <code>conflict_resolution_type=custom</code>. This property will be ignored when <code>conflict_resolution_type</code> is not <code>custom</code>.</p>
<p>The Javascript function to provide this property should be in backticks (like the sync function). The function takes 1 parameter which is a struct that represents the conflict. This struct has 2 properties:</p>
<ul>
<li><code>LocalDocument</code> - The local document. This contains the document ID under the <code>_id</code> key.</li>
<li><code>RemoteDocument</code> - The remote document
The function should return the new documents body. This can be the winning revision (for example, <code>return conflict.LocalDocument</code>), a new body, or <code>nil</code> to resolve as a delete.</li>
</ul>
<p>Example:</p>
<pre><code>&quot;custom_conflict_resolver&quot;:\`
	function(conflict) {
		console.log(&quot;Doc ID: &quot;+conflict.LocalDocument._id);
		console.log(&quot;Full remote doc: &quot;+JSON.stringify(conflict.RemoteDocument));
		return conflict.RemoteDocument;
	}
\`
</code></pre>
<p>Using complex <code>custom_conflict_resolver</code> functions can noticeably degrade performance. Use a built-in resolver whenever possible.</p>
<p>This is an enterprise-edition only feature.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="direction" class="discrete"><code>direction</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>string</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>This specifies which direction the replication will be replicating with the <code>remote</code> replicator.</p>
<p>The directions are:</p>
<ul>
<li><code>pull</code> - changes are pulled from the remote database</li>
<li><code>push</code> - changes are pushed to the remote database</li>
<li><code>pushAndPull</code> - changes are both push-to and pulled-from the remote database</li>
</ul>
<p>Replications created prior to Sync Gateway 2.8 derive their <code>direction</code> from the source/target URL of the replication.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="enable_delta_sync" class="discrete"><code>enable_delta_sync</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>boolean</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>This will turn on delta- sync for the replication. This works in conjunction with the database level setting <code>delta_sync.enabled</code></p>
<p>If set to true, delta-sync will be used as long as both databases involved in the replication have delta-sync enabled. If a database does not have delta-sync enabled, then the replication will run without delta-sync.</p>
<p>Replications created prior to Sync Gateway 2.8 must have delta-sync disabled.</p>
<p>Enabling this is an enterprise-edition only feature.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="filter" class="discrete"><code>filter</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>string</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>This defines whether to filter documents by their channels or not.</p>
<p>If set to <code>sync_gateway/bychannel</code> then a <strong>pull</strong> replication will be limited to a specific set of channels specified by the <code>query_params.channels</code> property.</p>
<p>This only can be used with pull replications.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="initial_state" class="discrete"><code>initial_state</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>string</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>This is what state to start the replication in when creating a new replication.</p>
<p>This allows you to control if the replication starts in a <code>stopped</code> start or <code>running</code> state.</p>
<p>Replications prior to Sync Gateway 2.8 will run in the default state <code>running</code>.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="max_backoff_time" class="discrete"><code>max_backoff_time</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>integer</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>Specifies the maximum time-period (in minutes) that Sync Gateway will attempt to reconnect to a lost or unreachable remote.</p>
<p>When a disconnection happens, Sync Gateway will do an exponential backoff up to this specified value. When this value is met, it will attempt to reconnect indefinitely every <code>max_backoff_time</code> minutes.</p>
<p>If this is set to 0, Sync Gateway will do the normal exponential backoff after the disconnect happens but then attempting 10 minutes and stop the replication.</p>
<p>Note: this defaults to 5 minutes for replications created prior to Sync Gateway 2.8.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="purge_on_removal" class="discrete"><code>purge_on_removal</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>boolean</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>Specifies whether to purge a document if the remote user loses access to all of the channels on the document when attempting to pull it from the remote.</p>
<p>If false, documents will not be replicated and not be purged when the user loses access.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="query_params" class="discrete"><code>query_params</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>array</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>This is a set of key/value pairs used in the query string of the replication.</p>
<p>If <code>filters=sync_gateway/bychannel</code> then this can be used to set the channels to filter by in a pull replication. To do this, set the <code>channels</code> key to a string array of the channels to filter by. For example:</p>
<pre><code>&quot;filter&quot;:&quot;sync_gateway/bychannel&quot;,
&quot;query_params&quot;: {
  &quot;channels&quot;:[&quot;chanUser1&quot;]
},
</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="remote" class="discrete"><code>remote</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>string</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>This is the endpoint of the database for the remote Sync Gateway that is the subject of this replication's <code>push</code>, <code>pull</code>, or <code>pushAndPull</code> action.</p>
<p>Typically this would include the URI, port, and database name. For example, <code>http://localhost:4985/db</code>.</p>
<p>How this remote is used depends on the <code>direction</code> of the replication:</p>
<ul>
<li><code>pull</code> - this replicator <em>pulls</em> changes from the <code>remote</code></li>
<li><code>push</code> - this replicator <em>pushes</em> changes to this <code>remote</code></li>
<li><code>pushAndPull</code> - this replicator <em>pushes</em> changes to this <code>remote</code>, while also pulling receiving changes</li>
</ul>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="remote_password" class="discrete"><code>remote_password</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>string</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>The password to use to authenticate with the remote.</p>
<p>This password will be redacted in the replication config.</p>
<p>This can only be used for a pull replication.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="remote_username" class="discrete"><code>remote_username</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>string</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>The username to use to authenticate with the remote.</p>
<p>This can only be used for a pull replication.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="replication_id" class="discrete"><code>replication_id</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>string</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>This is the ID of the replication.</p>
<p>When creating a new replication using a POST request, this will be set to a random UUID if not explicitly set.</p>
<p>When the replication ID is specified in the URL, this must be set to the same replication ID if specifying it at all.</p>
</div>
</div>
</dd>
</dl>
</div>
<h4 id="run_as" class="discrete"><code>run_as</code></h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Type</dt>
<dd>
<p>string</p>
</dd>
<dt class="hdlist1">Description</dt>
<dd>
<div class="openblock">
<div class="content">
<p>This is used if you want to specify a user to run the replication as. This means that the replication will only be able to replicate what the user  access to what the user has access to.</p>
</div>
</div>
</dd>
</dl>
</div>
<hr>
<h5 id="" class="discrete"></h5>
</div>
</div>
<div class="sect1">
<h2 id="related-content"><a class="anchor" href="#related-content"></a>Related Content</h2>
<div class="sectionbody">
<div class="card-row three-column-row">
<div class="sect5 column">
<h6 id="-2"><a class="anchor" href="#-2"></a></h6>
<div class="ulist">
<div class="title">API Topics</div>
<ul>
<li>
<p><a href="rest-api.html" class="xref page">Public REST API</a></p>
</li>
<li>
<p><a href="rest-api-admin.html" class="xref page">Admin REST API</a></p>
</li>
<li>
<p><a href="rest-api-metrics.html" class="xref page">Metrics REST API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5 column">
<h6 id="-3"><a class="anchor" href="#-3"></a></h6>
<div class="ulist">
<div class="title">Reference</div>
<ul>
<li>
<p><a href="configuration-schema-bootstrap.html" class="xref page">Bootstrap</a></p>
</li>
<li>
<p><a href="configuration-schema-database.html" class="xref page">Database</a></p>
</li>
<li>
<p><a href="configuration-schema-db-security.html" class="xref page">Database Security</a></p>
</li>
<li>
<p><a href="configuration-schema-access-control.html" class="xref page">Access Control</a></p>
</li>
<li>
<p><a href="configuration-schema-import-filter.html" class="xref page">Import Filter</a></p>
</li>
<li>
<p><a href="#">Inter-Sync&#160;Gateway Replication</a></p>
</li>
<li>
<p><a href="configuration-properties-legacy.html" class="xref page">Legacy Pre-3.0 Configuration</a></p>
</li>
</ul>
</div>
</div>
<div class="sect5 column">
<h6 id="-4"><a class="anchor" href="#-4"></a></h6>
<div class="paragraph">
<div class="title">Community</div>
<p><a href="https://forums.couchbase.com/c/mobile/14">Mobile Forum</a> |
<a href="https://blog.couchbase.com/">Blog</a> |
<a href="https://blog.couchbase.com/category/couchbase-mobile/?ref=blog-menu">Blog (Mobile)</a> |
<a href="https://docs.couchbase.com/tutorials/">Tutorials</a></p>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2024 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Mobile","components":["couchbase-lite","sync-gateway"],"url":"/home/mobile.html","latestVersions":{"couchbase-lite":"3.2","sync-gateway":"3.1"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../_/js/vendor/chatbox-ui.js"></script>
<script id="site-script" src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script defer src="../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
</body>
</html>
