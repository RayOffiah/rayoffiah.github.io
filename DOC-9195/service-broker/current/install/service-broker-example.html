<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script>(window.dataLayer=window.dataLayer||[]).push({event:'gtm.js','gtm.start':+new Date()})</script>
<script async src="https://www.googletagmanager.com/gtm.js?id=GTM-MVPNN2"></script>
<title>Try out the Couchbase Service Broker Locally with Minikube | Couchbase Docs</title>
<link rel="canonical" href="https://rayoffiah.github.io/DOC-9195/service-broker/current/install/service-broker-example.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">
<meta name="dcterms.subject" content="service-broker">
<meta name="dcterms.identifier" content="1.1">
<meta name="page-url" content="/service-broker/current/install/service-broker-example.html">
<meta name="generator" content="Antora 3.0.0-alpha.5">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://rayoffiah.github.io/DOC-9195/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://rayoffiah.github.io/DOC-9195/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a href="https://cloud.couchbase.com/sign-up" class="free-trial-link" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  <i class="fas fa-cloud"></i>
                  Free Trial
                </a>
                <a class="btn btn-primary try-btn"  onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                </a>
              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
<div class="components">
  <div class="components_group-title">
    Service Broker
  </div>
  <ul class="components_list">
    <li class="components_list-items">
      <div class="component_list-version">
        <span class="component_list_title">Service Broker</span>
        <select class="version_list" data-component="service-broker">
          <option value="1.1" data-url="../index.html" selected>1.1</option>
          <option value="1.0" data-url="../../1.0/index.html">1.0</option>
        </select>
      </div>
      <div class="version_items hide" data-version="1.1">
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../index.html">Service Broker Home</a>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="get-started.html">Getting Started</a>
  </span>
<ul class="menu_row">
<li class="menu_list is-current-page" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link is-current-page" href="service-broker-example.html">Deploy Service Broker on Minikube</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../concepts/index.html">Concepts</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concepts/architecture.html">Architecture</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concepts/catalog.html">Service Catalog</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concepts/bindings.html">Configuration Bindings</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concepts/templates.html">Configuration Templates</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concepts/dynamic-attributes.html">Dynamic Attributes</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concepts/registry.html">Service Instance and Binding Registries</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../concepts/security.html">Security Models</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../tasks/index.html">Tasks</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../tasks/service-instance-url.html">Configure a Service Instance Dashboard URL</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../tasks/service-binding-credentials.html">Configure Service Binding Credentials</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../tasks/tls.html">Configure Service Instance TLS</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../reference/index.html">Reference</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../reference/servicebrokerconfigs.html">ServiceBrokerConfig Resource Reference</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../reference/template-functions.html">Dynamic Attribute Function Reference</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../reference/container.html">Service Broker Container Reference</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../reference/osb-api.html">Open Service Broker API Reference</a>
  </span>
</li>
<li class="menu_list is-parent closed" data-depth="2">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <span class="menu_title menu_text">Tools</span>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="3">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../reference/tools/cbsbctl.html">cbsbctl</a>
  </span>
</li>
</ul>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../release-notes.html">Release Notes</a>
  </span>
</li>
</ul>
</li>
</ul>
      </div>
      <div class="version_items hide" data-version="1.0">
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="0">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../1.0/index.html">Service Broker Home</a>
  </span>
<ul class="menu_row">
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../1.0/install/get-started.html">Getting Started</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../1.0/install/service-broker-example.html">Deploy Service Broker on Minikube</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../1.0/concepts/index.html">Concepts</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../1.0/concepts/architecture.html">Architecture</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../1.0/concepts/catalog.html">Service Catalog</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../1.0/concepts/bindings.html">Configuration Bindings</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../1.0/concepts/templates.html">Configuration Templates</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../1.0/concepts/dynamic-attributes.html">Dynamic Attributes</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../1.0/concepts/registry.html">Service Instance and Binding Registries</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../1.0/concepts/security.html">Security Models</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../1.0/tasks/index.html">Tasks</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../1.0/tasks/service-instance-url.html">Configure a Service Instance Dashboard URL</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../1.0/tasks/service-binding-credentials.html">Configure Service Binding Credentials</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../1.0/tasks/tls.html">Configure Service Instance TLS</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list is-parent closed" data-depth="1">
  <span class="menu_line">
    <span class="in-toggle"></span>
    <a class="menu_title menu_link" href="../../1.0/reference/index.html">Reference</a>
  </span>
<ul class="menu_row">
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../1.0/reference/servicebrokerconfigs.html">ServiceBrokerConfig Resource Reference</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../1.0/reference/template-functions.html">Dynamic Attribute Function Reference</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../1.0/reference/container.html">Service Broker Container Reference</a>
  </span>
</li>
<li class="menu_list" data-depth="2">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../1.0/reference/osb-api.html">Open Service Broker API Reference</a>
  </span>
</li>
</ul>
</li>
<li class="menu_list" data-depth="1">
  <span class="menu_line">
    <a class="menu_title menu_link" href="../../1.0/release-notes.html">Release Notes</a>
  </span>
</li>
</ul>
</li>
</ul>
      </div>
    </li>
  </ul>
</div>
  </div>
</aside>
<aside class="toc sidebar">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="https://github.com/couchbase/docs-service-broker/edit/1.1.x/modules/ROOT/pages/install/service-broker-example.adoc" title="Edit Page" target="_blank" rel="noopener">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../index.html">Service Broker</a></li>
<li class="crumb"><a href="../index.html">Service Broker Home</a></li>
<li class="crumb"><a href="get-started.html">Getting Started</a></li>
<li class="crumb"><a href="service-broker-example.html">Deploy Service Broker on Minikube</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Try out the Couchbase Service Broker Locally with Minikube</h1>
</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
Using a local minikube environment, learn how to use the Couchbase Service Broker to deploy a Couchbase cluster and the Couchbase Autonomous Operator.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this tutorial you&#8217;ll learn how to use the Couchbase Service Broker to deploy instances of Couchbase clusters and the Couchbase Autonomous Operator.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="before-you-begin"><a class="anchor" href="#before-you-begin"></a>Before You Begin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you begin this tutorial, you&#8217;ll need to set up a few things first:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Install the latest <a href="https://hub.docker.com/" target="_blank" rel="noopener">Docker Desktop</a> release for your current platform.
You&#8217;ll need this installed and running in order to install minikube.</p>
<div class="ulist">
<ul>
<li>
<p>Make sure to set Docker resource settings to have at least 8 GB (8192 Mi) of memory.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Install the latest <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/" target="_blank" rel="noopener">kubectl</a> for your current platform.
If <code>kubectl</code> is already installed, it gets configured to access the Kubernetes cluster control plane inside minikube when the <code>minikube start</code> command is executed.</p>
<div class="ulist">
<ul>
<li>
<p>Alternatively, if <code>kubectl</code> is not installed locally, you can use the version of <code>kubectl</code> included with minikube (after it is installed) by aliasing it as follows:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">alias kubectl="minikube kubectl --"</code></pre>
</div>
</div>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Install the latest <a href="https://svc-cat.io/docs/install/#installing-the-service-catalog-cli" target="_blank" rel="noopener">Service Catalog CLI</a> for your current platform.</p>
</li>
<li>
<p>Install the latest <a href="https://helm.sh/docs/intro/install/">Helm</a> release for your current platform.
You&#8217;ll be using this to install some necessary dependencies.</p>
</li>
<li>
<p>Install the latest <a href="https://minikube.sigs.k8s.io/docs/start/" target="_blank" rel="noopener">minikube</a> for your current platform.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-a-local-kubernetes-cluster"><a class="anchor" href="#create-a-local-kubernetes-cluster"></a>Create a Local Kubernetes Cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>With Docker running, create a Kubernetes cluster using minikube.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ minikube start --cpus 2 --memory 8192</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you encounter error about not having enough memory, make sure that you&#8217;ve set Docker resources to at least 8 GB of memory.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-the-service-catalog"><a class="anchor" href="#install-the-service-catalog"></a>Install the Service Catalog</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that you have a single-node Kubernetes cluster running on your computer, it&#8217;s time to <a href="https://kubernetes.io/docs/tasks/service-catalog/install-service-catalog-using-helm/">install the service catalog using Helm</a>.</p>
</div>
<div class="paragraph">
<p>Start by adding the service-catalog Helm repository:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ helm repo add svc-cat https://kubernetes-sigs.github.io/service-catalog</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can verify the installation with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ helm search repo service-catalog</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>NAME                	CHART VERSION	APP VERSION	DESCRIPTION
svc-cat/catalog     	0.3.1        	           	service-catalog webhook server and controller-m...
svc-cat/catalog-v0.2	0.2.3        	           	service-catalog API server and controller-manag...</pre>
</div>
</div>
<div class="paragraph">
<p>Now that the chart repository has been added, it&#8217;s time to install the chart.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ helm install catalog svc-cat/catalog --namespace catalog --create-namespace</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="download-and-install-service-broker-dependencies"><a class="anchor" href="#download-and-install-service-broker-dependencies"></a>Download and Install Service Broker Dependencies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you can proceed with rest of the steps in this guide, you&#8217;ll need to download the necessary packages from <a href="https://www.couchbase.com/downloads" target="_blank" rel="noopener">couchbase.com/downloads</a>.</p>
</div>
<div class="paragraph">
<p>Please download the following packages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Couchbase Service Broker 1.1</strong></p>
</li>
<li>
<p><strong>Couchbase Autonomous Operator 2.2</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Both of these packages contain YAML configuration files and command-line tools that you will use to install the Couchbase Service Broker and Couchbase Clusters.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Make sure to unpack these packages on the same computer where you normally run <code>kubectl</code>.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="install-cbopcfg"><a class="anchor" href="#install-cbopcfg"></a>Install <code>cbopcfg</code></h3>
<div class="paragraph">
<p>The Couchbase <em>Autonomous Operator</em> package includes a command-line tool named <code>cbsbctl</code>, which is used to install certain dependencies for the Autonomous Operator.
Use the steps below to install <code>cbopcfg</code> on your platform of choice.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_macos"></a>macOS</p>
</li>
<li>
<p><a id="tabset1_linux"></a>Linux</p>
</li>
<li>
<p><a id="tabset1_windows"></a>Windows</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_macos">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a Terminal window and go to the directory where the <code>cbopcfg</code> binary is located:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ cd couchbase-autonomous-operator-kubernetes_x.x.x-macos_x86_64/bin/</code></pre>
</div>
</div>
</li>
<li>
<p>Make the <code>cbopcfg</code> binary executable:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ chmod +x ./cbopcfg</code></pre>
</div>
</div>
</li>
<li>
<p>Move the binary into your PATH:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ sudo mv ./cbopcfg /usr/local/bin/cbopcfg</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_linux">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a command prompt and go to the directory where the <code>cbopcfg</code> binary is located:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ cd couchbase-autonomous-operator-kubernetes_x.x.x-linux_x86_64/bin/</code></pre>
</div>
</div>
</li>
<li>
<p>Make the <code>cbopcfg</code> binary executable:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ chmod +x ./cbopcfg</code></pre>
</div>
</div>
</li>
<li>
<p>Move the binary into your PATH:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ sudo mv ./cbopcfg /usr/local/bin/cbopcfg</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_windows">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a command prompt and go to the directory where the <code>cbopcfg</code> binary is located:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ cd couchbase-autonomous-operator-kubernetes_x.x.x-windows_x86_64\bin\</code></pre>
</div>
</div>
</li>
<li>
<p>Add the <code>cbopcfg</code> binary into your PATH.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="install-the-autonomous-operator-crds-and-dynamic-admission-controller"><a class="anchor" href="#install-the-autonomous-operator-crds-and-dynamic-admission-controller"></a>Install the Autonomous Operator CRDs and Dynamic Admission Controller</h3>
<div class="paragraph">
<p>The included service plans deploy instances of the Autonomous Operator, which has its own dependencies.</p>
</div>
<div class="paragraph">
<p>From the unpacked <em>Autonomous Operator</em> directory, run the following command to install the Autonomous Operator CRD:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ kubectl create -f crd.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, run the following command to install the dynamic admission controller (DAC) into the <code>default</code> namespace.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ cbopcfg create admission</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="install-cbcsctl"><a class="anchor" href="#install-cbcsctl"></a>Install <code>cbcsctl</code></h3>
<div class="paragraph">
<p>The Couchbase <em>Service Broker</em> package includes a command-line tool named <code>cbsbctl</code>, which is used during installation.
Use the steps below to install <code>cbsbctl</code> on your platform of choice.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset2_macos"></a>macOS</p>
</li>
<li>
<p><a id="tabset2_linux"></a>Linux</p>
</li>
<li>
<p><a id="tabset2_windows"></a>Windows</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset2_macos">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a Terminal window and go to the directory where the <code>cbsbctl</code> binary is located:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ cd couchbase-service-broker-kubernetes/</code></pre>
</div>
</div>
</li>
<li>
<p>Make the <code>cbsbctl</code> binary executable:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ chmod +x ./cbsbctl.darwin</code></pre>
</div>
</div>
</li>
<li>
<p>Move the binary into your PATH:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ sudo mv ./cbsbctl /usr/local/bin/cbsbctl</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset2_linux">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a command prompt and go to the directory where the <code>cbsbctl</code> binary is located:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ cd couchbase-service-broker-kubernetes/</code></pre>
</div>
</div>
</li>
<li>
<p>Make the <code>cbsbctl</code> binary executable:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ chmod +x ./cbsbctl</code></pre>
</div>
</div>
</li>
<li>
<p>Move the binary into your PATH:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ sudo mv ./cbsbctl /usr/local/bin/cbsbctl</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset2_windows">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a command prompt and go to the directory where the <code>cbsbctl</code> binary is located:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ cd couchbase-service-broker-kubernetes\</code></pre>
</div>
</div>
</li>
<li>
<p>Add the <code>cbsbctl.exe</code> binary into your PATH.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="install-the-service-broker-crd"><a class="anchor" href="#install-the-service-broker-crd"></a>Install the Service Broker CRD</h3>
<div class="paragraph">
<p>The Service Broker is configured using a Kubernetes custom resource that allows type checking of your configurations.
In order to use this custom resource, you must install the custom resource definition (CRD) that is included in the Service Broker package download.</p>
</div>
<div class="paragraph">
<p>From the unpacked <em>Service Broker</em> directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ kubectl create -f crd.yaml</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-the-service-broker"><a class="anchor" href="#install-the-service-broker"></a>Install the Service Broker</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Service Broker can be installed at the namespace level or the cluster level.
For the purposes of this tutorial, we&#8217;ll be installing the Service Broker at the cluster level.</p>
</div>
<div class="paragraph">
<p>From the unpacked <em>Service Broker</em> directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ./cbsbctl create clusterservicebroker --profile demo</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can run the following command to check the status of the Service Broker:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ kubectl get deployments</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>NAME                          	 	READY   	UP-TO-DATE   AVAILABLE   	AGE
couchbase-operator-admission   		 1/1     		1             1        	37m
couchbase-service-broker       		 1/1     		1            	1         32m</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="provision-the-couchbase-cluster-service"><a class="anchor" href="#provision-the-couchbase-cluster-service"></a>Provision the Couchbase Cluster Service</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following command deploys a three-node cluster (by default), with a Bucket, and an Administrator user with a password.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ svcat provision csb --class cao-2.2-service --plan csb-basic --param password=password --wait</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="bind-to-the-provisioned-service"><a class="anchor" href="#bind-to-the-provisioned-service"></a>Bind to the Provisioned Service</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ svcat bind csb</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>Name:        csb
    Namespace:   default
    Status:
    Secret:      csb
    Instance:    csb

  Parameters:
    No parameters defined</pre>
</div>
</div>
<div class="paragraph">
<p>This will create a user and allow access to the bucket.
Connection string, username, password, and CA certificate will be in the secret, ready to be used by a client of some variety.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ kubectl get secrets csb</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>NAME   TYPE     DATA   AGE
csb    	Opaque       5      7m58s</pre>
</div>
</div>
<div class="paragraph">
<p>To access the Couchbase Web Console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ kubectl port-forward couchbase-instance-winhhoku-0000 8091</code></pre>
</div>
</div>
<div class="paragraph">
<p>Go to <code><a href="http://localhost:8091" class="bare">http://localhost:8091</a></code> and login with the credentials used when provisioning the Couchbase cluster service.</p>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2021 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script async src="../../../_/js/vendor/fontawesome.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
