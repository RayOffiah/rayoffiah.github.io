<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="489px" preserveAspectRatio="none" style="width:521px;height:489px;background:#FFFFFF;" version="1.1" viewBox="0 0 521 489" width="521px" zoomAndPan="magnify"><defs><filter height="300%" id="f1cjelpi4dihf4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1cjelpi4dihf4)" height="88.8" style="stroke:#A80036;stroke-width:1.0;" width="10" x="187.5" y="116.3999"/><rect fill="#FFFFFF" filter="url(#f1cjelpi4dihf4)" height="29.6" style="stroke:#A80036;stroke-width:1.0;" width="10" x="325.5" y="146"/><rect fill="#FFFFFF" filter="url(#f1cjelpi4dihf4)" height="88.8" style="stroke:#A80036;stroke-width:1.0;" width="10" x="325.5" y="289"/><rect fill="#FFFFFF" filter="url(#f1cjelpi4dihf4)" height="29.6" style="stroke:#A80036;stroke-width:1.0;" width="10" x="468.5" y="318.6"/><rect fill="#FFFFFF" filter="url(#f1cjelpi4dihf4)" height="165.6001" style="stroke:#000000;stroke-width:2.0;" width="497.5" x="10" y="220.2"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="48" x2="48" y1="84.7999" y2="402.8001"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="192" x2="192" y1="84.7999" y2="402.8001"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="330" x2="330" y1="84.7999" y2="402.8001"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="473.5" x2="473.5" y1="84.7999" y2="402.8001"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="33.5" y="81.9999">Dev</text><ellipse cx="48.5" cy="22.5" fill="#FEFECE" filter="url(#f1cjelpi4dihf4)" rx="16" ry="16" style="stroke:#A80036;stroke-width:1.5;"/><path d="M48.5,42.5 C52.5,42.5 55.5,42.5 59.5,38.5 C67.5,38.5 75.5,46.5 75.5,54.5 L75.5,58.5 C75.5,62.5 71.5,66.5 67.5,66.5 L29.5,66.5 C25.5,66.5 21.5,62.5 21.5,58.5 L21.5,54.5 C21.5,46.5 29.5,38.5 37.5,38.5 C41.5,42.5 44.5,42.5 48.5,42.5 " fill="#FEFECE" filter="url(#f1cjelpi4dihf4)" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="33.5" y="415.8">Dev</text><ellipse cx="48.5" cy="436.1" fill="#FEFECE" filter="url(#f1cjelpi4dihf4)" rx="16" ry="16" style="stroke:#A80036;stroke-width:1.5;"/><path d="M48.5,456.1 C52.5,456.1 55.5,456.1 59.5,452.1 C67.5,452.1 75.5,460.1 75.5,468.1 L75.5,472.1 C75.5,476.1 71.5,480.1 67.5,480.1 L29.5,480.1 C25.5,480.1 21.5,476.1 21.5,472.1 L21.5,468.1 C21.5,460.1 29.5,452.1 37.5,452.1 C41.5,456.1 44.5,456.1 48.5,456.1 " fill="#FEFECE" filter="url(#f1cjelpi4dihf4)" style="stroke:#A80036;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#f1cjelpi4dihf4)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="73" x="154" y="49"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="161" y="69.9999">JSEngine</text><rect fill="#FEFECE" filter="url(#f1cjelpi4dihf4)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="73" x="154" y="401.8001"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="161" y="422.8">JSEngine</text><rect fill="#FEFECE" filter="url(#f1cjelpi4dihf4)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="95" x="281" y="49"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="288" y="69.9999">QueryEngine</text><rect fill="#FEFECE" filter="url(#f1cjelpi4dihf4)" height="30.7999" style="stroke:#A80036;stroke-width:1.5;" width="95" x="281" y="401.8001"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="288" y="422.8">QueryEngine</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="449.5" y="81.9999">Bucket</text><path d="M455.5,32 C455.5,22 473.5,22 473.5,22 C473.5,22 491.5,22 491.5,32 L491.5,58 C491.5,68 473.5,68 473.5,68 C473.5,68 455.5,68 455.5,58 L455.5,32 " fill="#FEFECE" filter="url(#f1cjelpi4dihf4)" style="stroke:#000000;stroke-width:1.5;"/><path d="M455.5,32 C455.5,42 473.5,42 473.5,42 C473.5,42 491.5,42 491.5,32 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="449.5" y="415.8">Bucket</text><path d="M455.5,428.6 C455.5,418.6 473.5,418.6 473.5,418.6 C473.5,418.6 491.5,418.6 491.5,428.6 L491.5,454.6 C491.5,464.6 473.5,464.6 473.5,464.6 C473.5,464.6 455.5,464.6 455.5,454.6 L455.5,428.6 " fill="#FEFECE" filter="url(#f1cjelpi4dihf4)" style="stroke:#000000;stroke-width:1.5;"/><path d="M455.5,428.6 C455.5,438.6 473.5,438.6 473.5,438.6 C473.5,438.6 491.5,438.6 491.5,428.6 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FFFFFF" filter="url(#f1cjelpi4dihf4)" height="88.8" style="stroke:#A80036;stroke-width:1.0;" width="10" x="187.5" y="116.3999"/><rect fill="#FFFFFF" filter="url(#f1cjelpi4dihf4)" height="29.6" style="stroke:#A80036;stroke-width:1.0;" width="10" x="325.5" y="146"/><rect fill="#FFFFFF" filter="url(#f1cjelpi4dihf4)" height="88.8" style="stroke:#A80036;stroke-width:1.0;" width="10" x="325.5" y="289"/><rect fill="#FFFFFF" filter="url(#f1cjelpi4dihf4)" height="29.6" style="stroke:#A80036;stroke-width:1.0;" width="10" x="468.5" y="318.6"/><line style="stroke:#A80036;stroke-width:1.0;" x1="185.5" x2="175.5" y1="116.3999" y2="112.3999"/><line style="stroke:#A80036;stroke-width:1.0;" x1="185.5" x2="175.5" y1="116.3999" y2="120.3999"/><line style="stroke:#A80036;stroke-width:1.0;" x1="48.5" x2="186.5" y1="116.3999" y2="116.3999"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="55.5" y="111.7999">JS: var q = select …</text><line style="stroke:#A80036;stroke-width:1.0;" x1="323.5" x2="313.5" y1="146" y2="142"/><line style="stroke:#A80036;stroke-width:1.0;" x1="323.5" x2="313.5" y1="146" y2="150"/><line style="stroke:#A80036;stroke-width:1.0;" x1="197.5" x2="324.5" y1="146" y2="146"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82" x="204.5" y="141.4">SQL++(…) call</text><line style="stroke:#A80036;stroke-width:1.0;" x1="197.5" x2="207.5" y1="175.6" y2="171.6"/><line style="stroke:#A80036;stroke-width:1.0;" x1="197.5" x2="207.5" y1="175.6" y2="179.6"/><line style="stroke:#A80036;stroke-width:1.0;" x1="197.5" x2="329.5" y1="175.6" y2="175.6"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="214.5" y="171">return query</text><line style="stroke:#A80036;stroke-width:1.0;" x1="48.5" x2="58.5" y1="205.2" y2="201.2"/><line style="stroke:#A80036;stroke-width:1.0;" x1="48.5" x2="58.5" y1="205.2" y2="209.2"/><line style="stroke:#A80036;stroke-width:1.0;" x1="48.5" x2="191.5" y1="205.2" y2="205.2"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="65.5" y="200.6">return q</text><path d="M10,220.2 L83,220.2 L83,227.2 L73,237.2 L10,237.2 L10,220.2 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="165.6001" style="stroke:#000000;stroke-width:2.0;" width="497.5" x="10" y="220.2"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="25" y="234.2">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="117" x="98" y="233.1999">[Every document in q]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="190.5" x2="180.5" y1="259.4" y2="255.4"/><line style="stroke:#A80036;stroke-width:1.0;" x1="190.5" x2="180.5" y1="259.4" y2="263.4"/><line style="stroke:#A80036;stroke-width:1.0;" x1="48.5" x2="191.5" y1="259.4" y2="259.4"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="55.5" y="254.8">operate on document</text><line style="stroke:#A80036;stroke-width:1.0;" x1="323.5" x2="313.5" y1="289" y2="285"/><line style="stroke:#A80036;stroke-width:1.0;" x1="323.5" x2="313.5" y1="289" y2="293"/><line style="stroke:#A80036;stroke-width:1.0;" x1="192.5" x2="324.5" y1="289" y2="289"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="199.5" y="284.4">get document</text><line style="stroke:#A80036;stroke-width:1.0;" x1="466.5" x2="456.5" y1="318.6" y2="314.6"/><line style="stroke:#A80036;stroke-width:1.0;" x1="466.5" x2="456.5" y1="318.6" y2="322.6"/><line style="stroke:#A80036;stroke-width:1.0;" x1="335.5" x2="467.5" y1="318.6" y2="318.6"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="342.5" y="314">get document</text><line style="stroke:#A80036;stroke-width:1.0;" x1="335.5" x2="345.5" y1="348.2001" y2="344.2001"/><line style="stroke:#A80036;stroke-width:1.0;" x1="335.5" x2="345.5" y1="348.2001" y2="352.2001"/><line style="stroke:#A80036;stroke-width:1.0;" x1="335.5" x2="472.5" y1="348.2001" y2="348.2001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="352.5" y="343.6">retrieved document</text><line style="stroke:#A80036;stroke-width:1.0;" x1="192.5" x2="202.5" y1="377.8001" y2="373.8001"/><line style="stroke:#A80036;stroke-width:1.0;" x1="192.5" x2="202.5" y1="377.8001" y2="381.8001"/><line style="stroke:#A80036;stroke-width:1.0;" x1="192.5" x2="329.5" y1="377.8001" y2="377.8001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="209.5" y="373.2001">retrieved document</text><!--MD5=[ce9e5de2ddf07ab141e7d85dd7114ddb]
@startuml
skinparam actorStyle Awesome

 actor Dev
 participant JSEngine
 participant QueryEngine
 database Bucket
 
 Dev ->> JSEngine: JS: var q = select …
 activate JSEngine
 JSEngine ->> QueryEngine : SQL++(…) call
 activate QueryEngine
 QueryEngine ->> JSEngine  : return query
 deactivate QueryEngine
 JSEngine ->> Dev : return q
 deactivate JSEngine

    loop Every document in q
      Dev ->> JSEngine   : operate on document
      JSEngine ->> QueryEngine ++ : get document
      QueryEngine ->> Bucket ++ : get document
      Bucket ->> QueryEngine - - : retrieved document
      QueryEngine ->> JSEngine - - : retrieved document
    end
@enduml

PlantUML version 1.2021.16(Wed Dec 08 17:25:22 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>