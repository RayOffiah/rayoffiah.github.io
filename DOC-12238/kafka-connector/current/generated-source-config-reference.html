<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://metrics.couchbase.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<title>Untitled | Couchbase Docs</title>
<link rel="canonical" href="https://docs.couchbase.com/kafka-connector/current/generated-source-config-reference.html">
<link rel="stylesheet" href="../../_/css/site.css">
<script src="../../_/js/vendor/jquery.js"></script>
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="kafka-connector">
<meta name="dcterms.identifier" content="4.1">
<meta name="page-url" content="/kafka-connector/current/generated-source-config-reference.html">
<meta name="page-nav-header-levels" content="0">
<meta name="generator" content="Antora 3.1.7">
<link rel="icon" href="../../_/img/favicon.svg" type="image/svg+xml">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon" sizes="any">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
    <template id="page-versions" style="display: none">
      <select class="version_list" data-component="kafka-connector">
        <option value="4.1" data-url="generated-source-config-reference.html" selected>4.1</option>
        <option value="4.0" data-url="../4.0/generated-source-config-reference.html">4.0</option>
        <option value="3.4" data-url="../3.4/index.html">3.4</option>
      </select>
    </template>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="https://github.com/couchbase/kafka-connect-couchbase/edit/master/docs/modules/ROOT/pages/generated-source-config-reference.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="index.html">Kafka Connector</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div class="sect1">
<h2 id="connection"><a class="anchor" href="#connection"></a>Connection</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="couchbase.seed.nodes"><a class="anchor" href="#couchbase.seed.nodes"></a><code>couchbase.seed.nodes</code></h3>
<div class="paragraph">
<p>Addresses of Couchbase Server nodes, delimited by commas.</p>
</div>
<div class="paragraph">
<p>If a custom port is specified, it must be the KV port (which is normally 11210 for insecure connections, or 11207 for secure connections).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: list</p>
</li>
<li>
<p>Importance: high</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.username"><a class="anchor" href="#couchbase.username"></a><code>couchbase.username</code></h3>
<div class="paragraph">
<p>Name of the Couchbase user to authenticate as.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: string</p>
</li>
<li>
<p>Importance: high</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.password"><a class="anchor" href="#couchbase.password"></a><code>couchbase.password</code></h3>
<div class="paragraph">
<p>Password of the Couchbase user.</p>
</div>
<div class="paragraph">
<p>May be overridden with the KAFKA_COUCHBASE_PASSWORD environment variable.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: password</p>
</li>
<li>
<p>Importance: high</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.bucket"><a class="anchor" href="#couchbase.bucket"></a><code>couchbase.bucket</code></h3>
<div class="paragraph">
<p>Name of the Couchbase bucket to use.</p>
</div>
<div class="paragraph">
<p>This property is required unless using the experimental AnalyticsSinkHandler.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: string</p>
</li>
<li>
<p>Default: <code>""</code></p>
</li>
<li>
<p>Importance: high</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.network"><a class="anchor" href="#couchbase.network"></a><code>couchbase.network</code></h3>
<div class="paragraph">
<p>The network selection strategy for connecting to a Couchbase Server cluster that advertises alternate addresses.</p>
</div>
<div class="paragraph">
<p>A Couchbase node running inside a container environment (like Docker or Kubernetes) might be configured to advertise both its address within the container environment (known as its "default" address) as well as an "external" address for use by clients connecting from outside the environment.</p>
</div>
<div class="paragraph">
<p>Setting the 'couchbase.network' config property to 'default' or 'external' forces the selection of the respective addresses.
Setting the value to 'auto' tells the connector to select whichever network contains the addresses specified in the 'couchbase.seed.nodes' config property.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: string</p>
</li>
<li>
<p>Default: <code>auto</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.bootstrap.timeout"><a class="anchor" href="#couchbase.bootstrap.timeout"></a><code>couchbase.bootstrap.timeout</code></h3>
<div class="paragraph">
<p>On startup, the connector will wait this long for a Couchbase connection to be established.
If a connection is not established before the timeout expires, the connector will terminate.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: string</p>
</li>
<li>
<p>Default: <code>30s</code></p>
</li>
<li>
<p>Valid Values: An integer followed by a time unit (ms = milliseconds, s = seconds, m = minutes, h = hours, d = days). For example, to specify 30 minutes: 30m</p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security"><a class="anchor" href="#security"></a>Security</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="couchbase.enable.tls"><a class="anchor" href="#couchbase.enable.tls"></a><code>couchbase.enable.tls</code></h3>
<div class="paragraph">
<p>Use secure connection to Couchbase Server.</p>
</div>
<div class="paragraph">
<p>If true, you must also tell the connector which certificate to trust.
Specify a certificate file with 'couchbase.trust.certificate.path', or a Java keystore file with 'couchbase.trust.store.path' and 'couchbase.trust.store.password'.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: boolean</p>
</li>
<li>
<p>Default: <code>false</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
<li>
<p>Dependents: <code><a href="#couchbase.trust.certificate.path"><code>couchbase.trust.certificate.path</code></a></code>, <code><a href="#couchbase.trust.store.path"><code>couchbase.trust.store.path</code></a></code>, <code><a href="#couchbase.trust.store.password"><code>couchbase.trust.store.password</code></a></code>, <code><a href="#couchbase.enable.hostname.verification"><code>couchbase.enable.hostname.verification</code></a></code>, <code><a href="#couchbase.client.certificate.path"><code>couchbase.client.certificate.path</code></a></code>, <code><a href="#couchbase.client.certificate.password"><code>couchbase.client.certificate.password</code></a></code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.enable.hostname.verification"><a class="anchor" href="#couchbase.enable.hostname.verification"></a><code>couchbase.enable.hostname.verification</code></h3>
<div class="paragraph">
<p>Set this to <code>false</code> to disable TLS hostname verification for Couchbase connections.
Less secure, but might be required if for some reason you can&#8217;t issue a certificate whose Subject Alternative Names match the hostname used to connect to the server.
Only disable if you understand the impact and can accept the risks.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: boolean</p>
</li>
<li>
<p>Default: <code>true</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.trust.store.path"><a class="anchor" href="#couchbase.trust.store.path"></a><code>couchbase.trust.store.path</code></h3>
<div class="paragraph">
<p>Absolute filesystem path to the Java keystore holding the CA certificate used by Couchbase Server.</p>
</div>
<div class="paragraph">
<p>If you want to use a PEM file instead of a Java keystore, specify <code>couchbase.trust.certificate.path</code> instead.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: string</p>
</li>
<li>
<p>Default: <code>""</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.trust.store.password"><a class="anchor" href="#couchbase.trust.store.password"></a><code>couchbase.trust.store.password</code></h3>
<div class="paragraph">
<p>Password for accessing the trust store.</p>
</div>
<div class="paragraph">
<p>May be overridden with the KAFKA_COUCHBASE_TRUST_STORE_PASSWORD environment variable.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: password</p>
</li>
<li>
<p>Default: <code>[hidden]</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.trust.certificate.path"><a class="anchor" href="#couchbase.trust.certificate.path"></a><code>couchbase.trust.certificate.path</code></h3>
<div class="paragraph">
<p>Absolute filesystem path to the PEM file containing the CA certificate used by Couchbase Server.</p>
</div>
<div class="paragraph">
<p>If you want to use a Java keystore instead of a PEM file, specify <code>couchbase.trust.store.path</code> instead.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: string</p>
</li>
<li>
<p>Default: <code>""</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.client.certificate.path"><a class="anchor" href="#couchbase.client.certificate.path"></a><code>couchbase.client.certificate.path</code></h3>
<div class="paragraph">
<p>Absolute filesystem path to a Java keystore or PKCS12 bundle holding the private key and certificate chain to use for client certificate authentication (mutual TLS).</p>
</div>
<div class="paragraph">
<p>If you supply a value for this config property, the <code>couchbase.username</code> and <code>couchbase.password</code> properties will be ignored.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: string</p>
</li>
<li>
<p>Default: <code>""</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.client.certificate.password"><a class="anchor" href="#couchbase.client.certificate.password"></a><code>couchbase.client.certificate.password</code></h3>
<div class="paragraph">
<p>Password for accessing the client certificate.</p>
</div>
<div class="paragraph">
<p>May be overridden with the KAFKA_COUCHBASE_CLIENT_CERTIFICATE_PASSWORD environment variable.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: password</p>
</li>
<li>
<p>Default: <code>[hidden]</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="logging"><a class="anchor" href="#logging"></a>Logging</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="couchbase.log.redaction"><a class="anchor" href="#couchbase.log.redaction"></a><code>couchbase.log.redaction</code></h3>
<div class="paragraph">
<p>Determines which kinds of sensitive log messages from the Couchbase connector will be tagged for later redaction by the Couchbase log redaction tool.
NONE = no tagging; PARTIAL = user data is tagged; FULL = user, meta, and system data is tagged.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: string</p>
</li>
<li>
<p>Default: <code>NONE</code></p>
</li>
<li>
<p>Valid Values: One of [NONE, PARTIAL, FULL]</p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.log.document.lifecycle"><a class="anchor" href="#couchbase.log.document.lifecycle"></a><code>couchbase.log.document.lifecycle</code></h3>
<div class="paragraph">
<p>If true, document lifecycle milestones will be logged at INFO level instead of DEBUG.
Enabling this feature lets you watch documents flow through the connector.
Disabled by default because it generates many log messages.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: boolean</p>
</li>
<li>
<p>Default: <code>false</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="source-behavior"><a class="anchor" href="#source-behavior"></a>Source Behavior</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="couchbase.topic"><a class="anchor" href="#couchbase.topic"></a><code>couchbase.topic</code></h3>
<div class="paragraph">
<p>Name of the default Kafka topic to publish data to, for collections that don&#8217;t have an entry in the <code>couchbase.collection.to.topic</code> map.</p>
</div>
<div class="paragraph">
<p>This is a format string that recognizes the following placeholders:</p>
</div>
<div class="paragraph">
<p>${bucket} refers to the bucket containing the document.</p>
</div>
<div class="paragraph">
<p>${scope} refers to the scope containing the document.</p>
</div>
<div class="paragraph">
<p>${collection} refers to the collection containing the document.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: string</p>
</li>
<li>
<p>Default: <code>${bucket}.${scope}.${collection}</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.collection.to.topic"><a class="anchor" href="#couchbase.collection.to.topic"></a><code>couchbase.collection.to.topic</code></h3>
<div class="paragraph">
<p>A map from Couchbase collection to Kafka topic.</p>
</div>
<div class="paragraph">
<p>Collection and Topic are joined by an equals sign.
Map entries are delimited by commas.</p>
</div>
<div class="paragraph">
<p>For example, if you want to write messages from collection "scope-a.invoices" to topic "topic1", and messages from collection "scope-a.widgets" to topic "topic2", you would write: "scope-a.invoices=topic1,scope-a.widgets=topic2".</p>
</div>
<div class="paragraph">
<p>Defaults to an empty map.
For collections not present in this map, the destination topic is determined by the <code>couchbase.topic</code> config property.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Since: 4.1.8</p>
</li>
<li>
<p>Type: list</p>
</li>
<li>
<p>Default: <code>""</code></p>
</li>
<li>
<p>Valid Values: scope.collection=topic,&#8230;&#8203;</p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.source.handler"><a class="anchor" href="#couchbase.source.handler"></a><code>couchbase.source.handler</code></h3>
<div class="paragraph">
<p>The fully-qualified class name of the source handler to use.
The source handler determines how the Couchbase document is converted into a Kafka record.</p>
</div>
<div class="paragraph">
<p>To publish JSON messages identical to the Couchbase documents, use <code>com.couchbase.connect.kafka.handler.source.RawJsonSourceHandler</code> and set <code>value.converter</code> to <code>org.apache.kafka.connect.converters.ByteArrayConverter</code>.</p>
</div>
<div class="paragraph">
<p>When using a custom source handler that filters out certain messages, consider also configuring <code>couchbase.black.hole.topic</code>.
See that property&#8217;s documentation for details.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: class</p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.event.filter"><a class="anchor" href="#couchbase.event.filter"></a><code>couchbase.event.filter</code></h3>
<div class="paragraph">
<p>The class name of the event filter to use.
The event filter determines whether a database change event is ignored.</p>
</div>
<div class="paragraph">
<p>When using a non-default filter, consider also configuring <code>couchbase.black.hole.topic</code>.
See that property&#8217;s documentation for details.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: class</p>
</li>
<li>
<p>Default: <code>com.couchbase.connect.kafka.filter.AllPassFilter</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.black.hole.topic"><a class="anchor" href="#couchbase.black.hole.topic"></a><code>couchbase.black.hole.topic</code></h3>
<div class="paragraph">
<p>If this property is non-blank, the connector publishes a tiny synthetic record to this topic whenever the Filter or SourceHandler ignores a source event.</p>
</div>
<div class="paragraph">
<p>This lets the connector tell the Kafka Connect framework about the source offset of the ignored event.
Otherwise, a long sequence of ignored events in a low-traffic deployment might cause the stored source offset to lag too far behind the current source offset, which can lead to rollbacks to zero when the connector is restarted.</p>
</div>
<div class="paragraph">
<p>After a record is published to this topic, the record is no longer important, and should be deleted as soon as possible.
To reduce disk usage, configure this topic to use small segments and the lowest possible retention settings.</p>
</div>
<div class="paragraph">
<p>UNCOMMITTED; this feature may change in a patch release without notice.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Since: 4.1.8</p>
</li>
<li>
<p>Type: string</p>
</li>
<li>
<p>Default: <code>""</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.batch.size.max"><a class="anchor" href="#couchbase.batch.size.max"></a><code>couchbase.batch.size.max</code></h3>
<div class="paragraph">
<p>Controls maximum size of the batch for writing into topic.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: int</p>
</li>
<li>
<p>Default: <code>2000</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.no.value"><a class="anchor" href="#couchbase.no.value"></a><code>couchbase.no.value</code></h3>
<div class="paragraph">
<p>If true, Couchbase Server will omit the document content when telling the connector about a change.
The document key and metadata will still be present.</p>
</div>
<div class="paragraph">
<p>If you don&#8217;t care about the content of changed documents, enabling this option is a great way to reduce the connector&#8217;s network bandwidth and memory usage.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: boolean</p>
</li>
<li>
<p>Default: <code>false</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.connector.name.in.offsets"><a class="anchor" href="#couchbase.connector.name.in.offsets"></a><code>couchbase.connector.name.in.offsets</code></h3>
<div class="paragraph">
<p>When true, the connector&#8217;s offsets are saved under a key that includes the connector name.
This is redundant, since the Kafka Connect framework already isolates the offsets of connectors with different names.</p>
</div>
<div class="paragraph">
<p>Set this to true only if you&#8217;ve previously deployed the connector to production with this set to true, and you do not wish to restart streaming from the beginning.
Otherwise you should ignore this property.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: boolean</p>
</li>
<li>
<p>Default: <code>false</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.stream.from"><a class="anchor" href="#couchbase.stream.from"></a><code>couchbase.stream.from</code></h3>
<div class="paragraph">
<p>Controls when in history then connector starts streaming from.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: string</p>
</li>
<li>
<p>Default: <code>SAVED_OFFSET_OR_BEGINNING</code></p>
</li>
<li>
<p>Valid Values: One of [SAVED_OFFSET_OR_BEGINNING, SAVED_OFFSET_OR_NOW, BEGINNING, NOW]</p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.scope"><a class="anchor" href="#couchbase.scope"></a><code>couchbase.scope</code></h3>
<div class="paragraph">
<p>If you wish to stream from all collections within a scope, specify the scope name here.</p>
</div>
<div class="paragraph">
<p>If you specify neither "couchbase.scope" nor "couchbase.collections", the connector will stream from all collections of all scopes in the bucket.</p>
</div>
<div class="paragraph">
<p>Requires Couchbase Server 7.0 or later.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: string</p>
</li>
<li>
<p>Default: <code>""</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.collections"><a class="anchor" href="#couchbase.collections"></a><code>couchbase.collections</code></h3>
<div class="paragraph">
<p>If you wish to stream from specific collections, specify the qualified collection names here, separated by commas.
A qualified name is the name of the scope followed by a dot (.) and then the name of the collection.
For example: "tenant-foo.invoices".</p>
</div>
<div class="paragraph">
<p>If you specify neither "couchbase.scope" nor "couchbase.collections", the connector will stream from all collections of all scopes in the bucket.</p>
</div>
<div class="paragraph">
<p>Requires Couchbase Server 7.0 or later.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: list</p>
</li>
<li>
<p>Default: <code>""</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="database-change-protocol"><a class="anchor" href="#database-change-protocol"></a>Database Change Protocol</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="couchbase.compression"><a class="anchor" href="#couchbase.compression"></a><code>couchbase.compression</code></h3>
<div class="paragraph">
<p>To reduce bandwidth usage, Couchbase Server 5.5 and later can send documents to the connector in compressed form.
(Messages are always published to the Kafka topic in uncompressed form, regardless of this setting.)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: string</p>
</li>
<li>
<p>Default: <code>ENABLED</code></p>
</li>
<li>
<p>Valid Values: One of [DISABLED, FORCED, ENABLED]</p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.persistence.polling.interval"><a class="anchor" href="#couchbase.persistence.polling.interval"></a><code>couchbase.persistence.polling.interval</code></h3>
<div class="paragraph">
<p>When a Couchbase Server node fails over, documents on the failing node that haven&#8217;t been fully replicated may be "rolled back" to a previous state.
To ensure consistency between Couchbase and the Kafka topic, the connector can defer publishing a document to Kafka until it has been saved to disk on all replicas.</p>
</div>
<div class="paragraph">
<p>To enable this feature, specify a non-zero persistence polling interval.
The interval is how frequently the connector asks each Couchbase node which changes have been fully replicated and persisted.
This ensures consistency between Couchbase and Kafka, at the cost of additional latency and bandwidth usage.</p>
</div>
<div class="paragraph">
<p>To disable this feature, specify a zero duration (<code>0</code>).
In this mode the connector publishes changes to Kafka immediately, without waiting for replication.
This is fast and uses less network bandwidth, but can result in publishing "phantom changes" that don’t reflect the actual state of a document in Couchbase after a failover.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Documents written to Couchbase with enhanced durability are never published to Kafka until the durability requirements are met, regardless of whether persistence polling is enabled.
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
When connecting to an ephemeral bucket, always disable persistence polling by setting this config option to <code>0</code>, otherwise the connector will never publish any changes.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: string</p>
</li>
<li>
<p>Default: <code>100ms</code></p>
</li>
<li>
<p>Valid Values: An integer followed by a time unit (ms = milliseconds, s = seconds, m = minutes, h = hours, d = days). For example, to specify 30 minutes: 30m</p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.flow.control.buffer"><a class="anchor" href="#couchbase.flow.control.buffer"></a><code>couchbase.flow.control.buffer</code></h3>
<div class="paragraph">
<p>The flow control buffer limits how much data Couchbase will send before waiting for the connector to acknowledge the data has been processed.
The recommended size is between 10 MiB ("10m") and 50 MiB ("50m").</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Make sure to allocate enough memory to the Kafka Connect worker process to accommodate the flow control buffer, otherwise the connector might run out of memory under heavy load.
Read on for details.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There&#8217;s a separate buffer for each node in the Couchbase cluster.
When calculating how much memory to allocate to the Kafka Connect worker, multiply the flow control buffer size by the number of Couchbase nodes, then multiply by 2.
This is how much memory a single connector task requires for the flow control buffer (not counting the connector&#8217;s baseline memory usage).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: string</p>
</li>
<li>
<p>Default: <code>16m</code></p>
</li>
<li>
<p>Valid Values: An integer followed by a size unit (b = bytes, k = kilobytes, m = megabytes, g = gigabytes). For example, to specify 64 megabytes: 64m</p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.xattrs"><a class="anchor" href="#couchbase.xattrs"></a><code>couchbase.xattrs</code></h3>
<div class="paragraph">
<p>Should filters and source handlers have access to a document&#8217;s extended attributes?</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Type: boolean</p>
</li>
<li>
<p>Default: <code>false</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.enable.dcp.trace"><a class="anchor" href="#couchbase.enable.dcp.trace"></a><code>couchbase.enable.dcp.trace</code></h3>
<div class="paragraph">
<p>If true, detailed protocol trace information is logged to the <code>com.couchbase.client.dcp.trace</code> category at INFO level.
Otherwise, trace information is not logged.</p>
</div>
<div class="paragraph">
<p>Disabled by default because it generates many log messages.</p>
</div>
<div class="paragraph">
<p>UNCOMMITTED; this feature may change in a patch release without notice.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Since: 4.1.6</p>
</li>
<li>
<p>Type: boolean</p>
</li>
<li>
<p>Default: <code>false</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
<li>
<p>Dependents: <code><a href="#couchbase.dcp.trace.document.id.regex"><code>couchbase.dcp.trace.document.id.regex</code></a></code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="couchbase.dcp.trace.document.id.regex"><a class="anchor" href="#couchbase.dcp.trace.document.id.regex"></a><code>couchbase.dcp.trace.document.id.regex</code></h3>
<div class="paragraph">
<p>When DCP trace is enabled, set this property to limit the trace to only documents whose IDs match this Java regular expression.</p>
</div>
<div class="paragraph">
<p>Ignored if <code>couchbase.enable.dcp.trace</code> is false.</p>
</div>
<div class="paragraph">
<p>UNCOMMITTED; this feature may change in a patch release without notice.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Since: 4.1.6</p>
</li>
<li>
<p>Type: string</p>
</li>
<li>
<p>Default: <code>.*</code></p>
</li>
<li>
<p>Importance: medium</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2024 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"SDKs","components":["dotnet-sdk","c-sdk","go-sdk","java-sdk","kotlin-sdk","nodejs-sdk","php-sdk","python-sdk","ruby-sdk","scala-sdk","cxx-txns","elasticsearch-connector","kafka-connector","spark-connector","tableau-connector","sdk-extensions"],"latestVersions":{"dotnet-sdk":"3.4","c-sdk":"3.3","go-sdk":"2.6","java-sdk":"3.4","kotlin-sdk":"1.1","nodejs-sdk":"4.2","php-sdk":"4.0","python-sdk":"4.1","ruby-sdk":"3.3","scala-sdk":"1.4","cxx-txns":"1.0","elasticsearch-connector":"4.4","kafka-connector":"4.1","spark-connector":"3.3","tableau-connector":"1.x","sdk-extensions":"master"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script defer src="../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
</body>
</html>
