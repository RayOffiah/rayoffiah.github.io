<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://metrics.couchbase.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<title>Advanced Keyspace Accessors | Couchbase Docs</title>
<link rel="canonical" href="https://docs.couchbase.com/server/current/eventing/eventing-advanced-keyspace-accessors.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Use Advanced Keyspace Accessors to access advanced Key Value functionality.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.6">
<meta name="page-url" content="/server/current/eventing/eventing-advanced-keyspace-accessors.html">
<meta name="page-nav-header-levels" content="0">

<meta name="docsearch:component" content="server">
<meta name="docsearch:component_title" content="server">
<meta name="docsearch:cversion" content="7.6">
<meta name="docsearch:component_version" content="server@7.6">
<meta name="docsearch:module" content="eventing">
<meta name="docsearch:breadcrumbs" content="server">
<meta name="docsearch:topic_type" content="">
<meta name="docsearch:version_rank" content="1">
<meta name="docsearch:status" content="">
<meta name="docsearch:edition" content="">
<meta name="docsearch:page_rank" content="50">


<meta name="generator" content="Antora 3.1.7">
<link rel="icon" href="../../../_/img/favicon.svg" type="image/svg+xml">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon" sizes="any">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation"
                      href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">

                  <li class="nav-item "">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item nav-item-selected">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                      
                    </a>
                  </li>
                  <li class="nav-item ">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                      
                    </a>
                  </li>
                  <li class="nav-item ">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                      
                    </a>
                  </li>
                  <li class="nav-item ">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                      
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>
              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
    <template id="page-versions" style="display: none">
      <select class="version_list" data-component="server">
        <option value="7.6" data-url="eventing-advanced-keyspace-accessors.html" selected>7.6</option>
        <option value="7.2" data-url="../../7.2/eventing/eventing-advanced-keyspace-accessors.html">7.2</option>
        <option value="7.1" data-url="../../7.1/index.html">7.1</option>
        <option value="7.0" data-url="../../7.0/index.html">7.0</option>
      </select>
    </template>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="2">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/rayoffiah/projects/couchbase/docs-devex/modules/eventing/pages/eventing-advanced-keyspace-accessors.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../index.html">server</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Advanced Keyspace Accessors</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
Use Advanced Keyspace Accessors to access advanced Key Value functionality.
</blockquote>
</div>
<div class="paragraph">
<p>Advanced Keyspace Accessors use the same bucket bindings defined in the handler as <a href="eventing-language-constructs.html#bucket_accessors" class="xref page">Basic Keyspace Accessors</a>, but they expose a larger set of options and operators.
These operators can be used to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set or retrieve document expirations in the Data Service</p>
</li>
<li>
<p>Solve race conditions through CAS</p>
</li>
<li>
<p>Manipulate KV items under high contention using JavaScript inside Eventing Functions</p>
</li>
<li>
<p>Perform distributed atomic counter operations</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Couchbase supports the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#advanced-get-op">Advanced GET</a></p>
</li>
<li>
<p><a href="#advanced-insert-op">Advanced INSERT</a></p>
</li>
<li>
<p><a href="#advanced-upsert-op">Advanced UPSERT</a></p>
</li>
<li>
<p><a href="#advanced-replace-op">Advanced REPLACE</a></p>
</li>
<li>
<p><a href="#advanced-delete-op">Advanced DELETE</a></p>
</li>
<li>
<p><a href="#advanced-increment-op">Advanced INCREMENT</a></p>
</li>
<li>
<p><a href="#advanced-decrement-op">Advanced DECREMENT</a></p>
</li>
<li>
<p><a href="#advanced-touch-op">Advanced TOUCH</a></p>
</li>
<li>
<p><a href="#advanced-subdoc-array-op">Sub-Document MUTATEIN Operation</a></p>
</li>
<li>
<p><a href="#multiple-collection-functions">Operations that Listen to Multiple Collections</a></p>
</li>
<li>
<p><a href="#optional-params">Optional Parameters</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-get-op"><a class="anchor" href="#advanced-get-op"></a>Advanced GET Operation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>result = couchbase.get(binding, meta)</code></p>
</div>
<div class="paragraph">
<p>The GET operation lets you read a document with metadata from your bucket.
It also allows any subsequent operations to use CAS and check or modify the expiration date of the document.</p>
</div>
<div class="sect3">
<h4 id="example"><a class="anchor" href="#example"></a>Example</h4>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
    log('input doc', doc);
    log('input meta', meta);
    // could be the same or different
    var new_meta = {"id": "test_adv_get::1"};
    var result = couchbase.get(src_col, new_meta);
    if (result.success) {
        log('success adv. get: result', result);
    } else {
        log('failure adv. get: id', new_meta.id, 'result',result);
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can use the <a href="#optional-params-cache">optional parameter <code>{ "cache": true }</code></a> with the GET operation.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-insert-op"><a class="anchor" href="#advanced-insert-op"></a>Advanced INSERT Operation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>result = couchbase.insert(binding, meta, doc)</code></p>
</div>
<div class="paragraph">
<p>The INSERT operation lets you create a new document in your bucket.
It also lets you specify an expiration date (or TTL) for the document.</p>
</div>
<div class="paragraph">
<p>The operation fails if the document with the key you specified already exists.</p>
</div>
<div class="sect3">
<h4 id="example-2"><a class="anchor" href="#example-2"></a>Example</h4>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
    log('input meta', meta);
    log('input doc', doc);
    // Can be the same or different
    var new_meta = {"id": "test_adv_insert:1"};
    // (Optional) Set an expiry time of 60 seconds in the future
    // new_meta.expiry_date = new Date(Date.now() + 60 * 1000);
    var new_doc = doc;
    new_doc.random = Math.random();
    var result = couchbase.insert(src_col, new_meta, new_doc);
    if (result.success) {
        log('success adv. insert: result', result);
    } else {
        log('failure adv. insert: id', new_meta.id, 'result', result);
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
    "meta": {
        "id": "test_adv_insert:1",
        "cas": "1610041053310025728"
    },
    "success": true
}

{
    "error": {
        "code": 272,
        "name": "LCB_KEY_EEXISTS",
        "desc": "The document key already exists in the server.",
        "key_already_exists": true
    },
    "success": false
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can use the <a href="#optional-params-recursion">optional parameter <code>{ "self_recursion": true }</code></a> with the INSERT operation.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-upsert-op"><a class="anchor" href="#advanced-upsert-op"></a>Advanced UPSERT Operation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>result = couchbase.upsert(binding, meta, doc)</code></p>
</div>
<div class="paragraph">
<p>The UPSERT operation lets you update an existing document in your bucket.
It also lets you specify an expiration date (or TTL) for the document.</p>
</div>
<div class="paragraph">
<p>If no documents exist in your bucket, the operation creates a new document with the key you specified.</p>
</div>
<div class="paragraph">
<p>The operation does not allow you to specify CAS.</p>
</div>
<div class="sect3">
<h4 id="example-3"><a class="anchor" href="#example-3"></a>Example</h4>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
    log('input meta', meta);
    log('input doc', doc);
    // Can be the same or different
    var new_meta = {"id": "test_adv_upsert:1"}; // If supplied, the CAS is ignored
    // (Optional) Set an expiry time of 60 seconds in the future
    // new_meta.expiry_date = new Date(Date.now() + 60 * 1000);
    var new_doc = doc;
    new_doc.random = Math.random();
    var result = couchbase.upsert(src_col, new_meta, new_doc);
    if (result.success) {
        log('success adv. upsert: result', result);
    } else {
        log('failure adv. upsert: id', new_meta.id, 'result', result);
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can use the <a href="#optional-params-recursion">optional parameter <code>{ "self_recursion": true }</code></a> with the UPSERT operation.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-replace-op"><a class="anchor" href="#advanced-replace-op"></a>Advanced REPLACE Operation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>result = couchbase.replace(binding, meta, doc)</code></p>
</div>
<div class="paragraph">
<p>The REPLACE operation lets you replace an existing document in your bucket with a new document.
It also lets you specify the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An expiration date (or TTL) for the document</p>
</li>
<li>
<p>A CAS value to be used as a pre-condition for the operation</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="example-4"><a class="anchor" href="#example-4"></a>Example</h4>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
    log('input meta', meta);
    log('input doc', doc);

    var mode = 3; // 1-&gt; no CAS, 2-&gt; mismatch in CAS, 3-&gt; good CAS

    // Set up the operation, make sure there is a document to be replaced, ignore any errors
    couchbase.insert(src_col,{"id": "test_adv_replace:10"},{"a:": 1});

    var new_meta;
    if (mode === 1) {
        // If no CAS is passed, the operation succeeds
        new_meta = {"id": "test_adv_replace:10"};
        // (Optional) Set an expiry time of 60 seconds in the future
        // new_meta.expiry_date = new Date(Date.now() + 60 * 1000);
    }
    if (mode === 2) {
        // If a non-matching CAS is passed, the operation fails
        new_meta = {"id": "test_adv_replace:10", "cas": "1111111111111111111"};
    }
    if (mode === 3) {
        // If the current or matching CAS is passed, the operation succeeds
        var tmp_r = couchbase.get(src_col, {"id": "test_adv_replace:10"});
        if (tmp_r.success) {
            // Use the current CAS to read through the couchbase.get(...) operation
            new_meta = {"id": "test_adv_replace:10", "cas": tmp_r.meta.cas};
        } else {
            log('Cannot replace a non-existing key. Recreate the key and rerun the operation.', "test_adv_replace:10");
            return;
        }
    }
    var new_doc = doc;
    new_doc.random = Math.random();
    var result = couchbase.replace(src_col, new_meta, new_doc);
    if (result.success) {
        log('success adv. replace: result', result);
    } else {
        log('failure adv. replace: id', new_meta.id, 'result', result);
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
    "meta": {
        "id": "test_adv_replace:10",
        "cas": "1610130177286144000"
    },
    "success": true
}

{
    "error": {
        "code": 272,
        "name": "LCB_KEY_EEXISTS",
        "desc": "The document key exists but it has a CAS value that is different from the specified value.",
        "cas_mismatch": true
    },
    "success": false
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can use the <a href="#optional-params-recursion">optional parameter <code>{ "self_recursion": true }</code></a> with the REPLACE operation.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-delete-op"><a class="anchor" href="#advanced-delete-op"></a>Advanced DELETE Operation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>result = couchbase.delete(binding, meta)</code></p>
</div>
<div class="paragraph">
<p>The DELETE operation lets you delete a document in your bucket.
You can use the document key to specify the document you want to delete.</p>
</div>
<div class="paragraph">
<p>This operation also lets you specify a CAS value to be matched as a pre-condition to proceed with the operation.</p>
</div>
<div class="sect3">
<h4 id="example-5"><a class="anchor" href="#example-5"></a>Example</h4>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
    log('input meta', meta);
    log('input doc', doc);

    var mode = 4; // 1-&gt; no CAS, 2-&gt; mismatch in CAS, 3-&gt; good CAS, 4-&gt; no CAS key

    // Set up the operation, make sure there is a document to be deleted, ignore any errors
    couchbase.insert(src_col,{"id": "test_adv_delete:10"},{"a:": 1});

    var new_meta;
    if (mode === 1) {
        // If no CAS is passed, the operation succeeds
        new_meta = {"id": "test_adv_delete:10"};
        // (Optional) Set an expiry time of 60 seconds in the future
        // new_meta.expiry_date = new Date(Date.now() + 60 * 1000);
    }
    if (mode === 2) {
        // If a non-matching CAS is passed, the operation fails
        new_meta = {"id": "test_adv_delete:10", "cas": "1111111111111111111"};
    }
    if (mode === 3) {
        // If the current or matching CAS is passed, the operation succeeds
        var tmp_r = couchbase.get(src_col,{"id": "test_adv_delete:10"});
        if (tmp_r.success) {
            // Use the current CAS to read through the couchbase.get(...) operation
            new_meta = {"id": "test_adv_delete:10", "cas": tmp_r.meta.cas};
        } else {
            log('Cannot delete a non-existing key. Recreate the key and rerun the operation.',"test_adv_delete:10");
            return;
        }
    }
    if (mode === 4) {
        // Remove so that we have: no such key
        delete src_col["test_adv_delete: 10"]
        new_meta = {"id": "test_adv_delete:10"};
    }
    var result = couchbase.delete(src_col, new_meta);
    if (result.success) {
        log('success adv. delete: result', result);
    } else {
        log('failure adv. delete: id', new_meta.id, 'result', result);
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
    "meta": {
        "id": "key::10",
        "cas": "1609374065129816064"
    },
    "success": true
}

{
    "error": {
        "code": 272,
        "name": "LCB_KEY_EEXISTS",
        "desc": "The document key exists with a CAS value different than the specified value",
        "cas_mismatch": true
    },
    "success": false
}

{
    "error": {
        "code": 272,
        "name": "LCB_KEY_ENOENT",
        "desc": "The document key does not exist on the server",
        "key_not_found": true
    },
    "success": false
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-increment-op"><a class="anchor" href="#advanced-increment-op"></a>Advanced INCREMENT Operation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>result = couchbase.increment(binding, meta)</code></p>
</div>
<div class="paragraph">
<p>The INCREMENT operation lets you increment the <code>count</code> field in a specific document.</p>
</div>
<div class="paragraph">
<p>For example, the document can have the structure <code>{ count: 23 }</code>, where 23 is the example counter value.</p>
</div>
<div class="paragraph">
<p>If the specified counter document does not exist, the operation creates a new document with a <code>count</code> value of 0. If the <code>count</code> value is 0, the first returned value is 1.</p>
</div>
<div class="paragraph">
<p>The INCREMENT operation cannot manipulate full document counters because of limitations in the KV engine API.</p>
</div>
<div class="sect3">
<h4 id="example-6"><a class="anchor" href="#example-6"></a>Example</h4>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
    log('input meta', meta);
    log('input doc', doc);

    // The operation creates a doc.count if it does not already exist
    var ctr_meta = {"id": "my_atomic_counter:1" };
    var result = couchbase.increment(src_col, ctr_meta);
    if (result.success) {
        log('success adv. increment: result', result);
    } else {
        log('failure adv. increment: id', ctr_meta.id, 'result', result);
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-decrement-op"><a class="anchor" href="#advanced-decrement-op"></a>Advanced DECREMENT Operation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>result = couchbase.decrement(binding, meta)</code></p>
</div>
<div class="paragraph">
<p>The DECREMENT operation lets you decrement the <code>count</code> field in a specific document.</p>
</div>
<div class="paragraph">
<p>For example, the document can have the structure <code>{ count: 23 }</code>, where 23 is the example counter value.</p>
</div>
<div class="paragraph">
<p>If the specified counter document does not exist, the operation creates a new document with a <code>count</code> value of 0. If the <code>count</code> value is 0, the first returned value is -1.</p>
</div>
<div class="paragraph">
<p>The DECREMENT operation cannot manipulate full document counters because of limitations in the KV engine API.</p>
</div>
<div class="sect3">
<h4 id="example-7"><a class="anchor" href="#example-7"></a>Example</h4>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
    log('input meta', meta);
    log('input doc', doc);

    // The operation creates a doc.count if it does not already exist
    var ctr_meta = {"id": "my_atomic_counter:1" };
    var result = couchbase.decrement(src_col, ctr_meta);
    if (result.success) {
        log('success adv. decrement: result', result);
    } else {
        log('failure adv. decrement: id', ctr_meta.id, 'result', result);
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-touch-op"><a class="anchor" href="#advanced-touch-op"></a>Advanced TOUCH Operation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>(Introduced in Couchbase Server 7.6)</em></p>
</div>
<div class="paragraph">
<p><code>result = couchbase.touch(binding, meta)</code></p>
</div>
<div class="paragraph">
<p>The TOUCH operation lets you modify the expiration time of a document without the need to access that document first.</p>
</div>
<div class="paragraph">
<p>You can use this operation if your application does not need to access the database when handling a user session.</p>
</div>
<div class="sect3">
<h4 id="example-8"><a class="anchor" href="#example-8"></a>Example</h4>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
    log('input meta', meta);
    log('input doc', doc);

    var expiry = new Date();
    expiry.setSeconds(expiry.getSeconds() + 10);

    var req = {"id": "doc1", "expiry_date": expiry};
    var result = couchbase.touch(dst_bucket, req);
    if (result.success) {
        log('success adv. touch: result', result);
    } else {
        log('failure adv. touch: id', req.id, 'result', result);
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
  "meta": {
    "id": "doc1",
    "cas": "1708978502129614848"
  },
  "success": true
}

{
  "error": {
    "code": 1,
    "name": "LCB_KEY_ENOENT",
    "desc": "The document key does not exist on the server",
    "key_not_found": true
  },
  "success": false
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-subdoc-array-op"><a class="anchor" href="#advanced-subdoc-array-op"></a>Sub-Document MUTATEIN Operation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>(Introduced in Couchbase Server 7.6)</em></p>
</div>
<div class="paragraph">
<p><code>result = couchbase.mutateIn(binding, meta, subdoc_operation_array, options)</code></p>
</div>
<div class="paragraph">
<p>Sub-Document operations let you modify only parts of a document instead of the entire document.
This makes them faster and more efficient than full-document operations like REPLACE and UPSERT.</p>
</div>
<div class="paragraph">
<p>Sub-Document array operations do not have concurrency issues and can be performed without checking CAS.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Couchbase only supports Sub-Document MUTATEIN operations.
It does not support Sub-Document LOOKUPIN operations.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="examples"><a class="anchor" href="#examples"></a>Examples</h4>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
    var meta = {"id": meta.id};
    couchbase.mutateIn(dst_bucket, meta, [
        couchbase.MutateInSpec.insert("testField", "insert")
    ]);
    couchbase.mutateIn(dst_bucket, meta, [
        couchbase.MutateInSpec.replace("testField", "replace")
    ]);
    couchbase.mutateIn(dst_bucket, meta, [
        couchbase.MutateInSpec.remove("testField")
    ]);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
    var meta = {"id": meta.id};
    couchbase.mutateIn(dst_bucket, meta, [
        couchbase.MutateInSpec.upsert("arrayTest", []),
        couchbase.MutateInSpec.arrayAppend("arrayTest", 2),
        couchbase.MutateInSpec.arrayPrepend("arrayTest", 1),
        couchbase.MutateInSpec.arrayInsert("arrayTest[0]", 0),
        couchbase.MutateInSpec.arrayAddUnique("arrayTest", 3)
    ])
};</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="multiple-collection-functions"><a class="anchor" href="#multiple-collection-functions"></a>Eventing Functions that Listen to Multiple Collections</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the wildcard <code>*</code> in an Eventing Function&#8217;s scope or collection to listen to multiple collections.</p>
</div>
<div class="paragraph">
<p>If the binding used by the Advanced Keyspace Accessor also contains a wildcard <code>*</code> for its scope or collection, you must use the additional <code>meta.keyspace</code> parameter.</p>
</div>
<div class="paragraph">
<p>The following example includes a <code>meta.keyspace</code> parameter that specifies the keyspace in which the INSERT operation is to take place:</p>
</div>
<div class="sect3">
<h4 id="example-9"><a class="anchor" href="#example-9"></a>Example</h4>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">couchbase.insert(
    src_col, {
        "id": id_str,
        "keyspace": {
            "bucket_name": "bkt01",
            "scope_name": "scp01",
            "collection_name": "col01"
        }
    },
    some_doc
)</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>See the <a href="eventing-examples.html#examples-scriptlets-advanced-accessors" class="xref page">multiCollectionEventing example</a> for a detailed example of Eventing Functions that listen to multiple collections.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="optional-params"><a class="anchor" href="#optional-params"></a>Optional Parameters</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="optional-cache-true-parameter"><a class="anchor" href="#optional-cache-true-parameter"></a>Optional <code>{ "cache": true }</code> Parameter</h3>
<div class="paragraph">
<p>You can use an optional third parameter <code>{ "cache": true }</code> to enable a bucket backed cache to hold the documents for one second.
This cache exists on each Eventing node and is shared across all Eventing Functions in the same node.</p>
</div>
<div class="paragraph">
<p>The cache has "read your own write" (RYOW) semantics. Writing and then reading the same document with <code>{ "cache": true }</code> always retrieves the value that has just been written.</p>
</div>
<div class="paragraph">
<p>This parameter loads near static data from the Data Service, where every mutation needs external data to drive the business logic of Eventing Functions.
The performance of this operator is usually 18 to 25 times faster than reading data directly from the Data Service.</p>
</div>
<div class="paragraph">
<p>This parameter can be used with the <a href="#advanced-get-op">GET</a> advanced operation.</p>
</div>
<div class="sect3">
<h4 id="optional-params-cache"><a class="anchor" href="#optional-params-cache"></a>Example using the optional <code>{ "cache": true }</code> parameter</h4>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
    log('input doc', doc);
    log('input meta', meta);
    // Can be the same or different
    var new_meta = { "id": "test_adv_get::1" };
    var result = couchbase.get(src_col, new_meta, { "cache": true });
    if (result.success) {
        log('success adv. get: result', result);
    } else {
        log('failure adv. get: id', new_meta.id, 'result',result);
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Results</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">{
    "doc": {
        "id": 1,
        "type": "test_adv_get"
    },
    "meta": {
        "id": "test_adv_get::1",
        "cas": "1610034762747412480",
        "datatype": "json"
    },
    "success": true
}

{
    "doc": {
        "a": 1,
        "random": 0.09799092443129842
    },
    "meta": {
        "id": "test_adv_insert:1",
        "cas": "1610140272584884224",
        "expiry_date": "2021-01-08T21:12:12.000Z",
        "datatype": "json"
    },
    "success": true
}

{
    "error": {
        "code": 272,
        "name": "LCB_KEY_ENOENT",
        "desc": "The document key does not exist on the server",
        "key_not_found": true
    },
    "success": false
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="optional-params-recursion"><a class="anchor" href="#optional-params-recursion"></a>Optional <code>{ "self_recursion": true }</code> Parameter</h3>
<div class="paragraph">
<p><em>(Introduced in Couchbase Server 7.6)</em></p>
</div>
<div class="paragraph">
<p>You can use the optional fourth parameter <code>{ "self_recursion": true }</code> to prevent the suppression of recursive source bucket mutations and to process the mutations that you have just created.</p>
</div>
<div class="paragraph">
<p>If you do not add <code>{ "self_recursion": true }</code> to your operation, all source bucket mutations are suppressed.</p>
</div>
<div class="paragraph">
<p>This parameter can be used with the <a href="#advanced-insert-op">INSERT</a>, <a href="#advanced-upsert-op">UPSERT</a>, and <a href="#advanced-replace-op">REPLACE</a> advanced operations.</p>
</div>
<div class="sect3">
<h4 id="example-using-the-optional-parameter-self_recursion-true"><a class="anchor" href="#example-using-the-optional-parameter-self_recursion-true"></a>Example using the optional parameter <code>{ "self_recursion": true }</code></h4>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Operation</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
    if (!doc.count) {
        doc = { "count": 1, "id": meta.id };
        meta.id = meta.id + "_test";
        couchbase.insert(src, meta, doc, { "self_recursion": true });
        return;
    }

    if (doc.count &lt; 3) {
        doc.count++
        couchbase.upsert(src, meta, doc, { "self_recursion": true });
        return;
    }

    if (doc.count &lt; 6) {
        doc.count++;
        couchbase.replace(src, meta, doc, { "self_recursion": true });
        return;
    }

    couchbase.delete(src, { "id": meta.id });
    couchbase.delete(src, { "id": doc.id });
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="return-values"><a class="anchor" href="#return-values"></a>Return Values</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 32%;">
<col style="width: 20%;">
<col style="width: 48%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>binding</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the binding that references the target bucket.</p>
<p class="tableblock">For the Advanced GET operation, the binding can have an access level of read or read/write.</p>
<p class="tableblock">For all other operations, the binding must have an access level of read/write.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>meta</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The positional parameter that represents the metadata of the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>meta.id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The key of the document to be used in the operation.
This is a mandatory parameter that must be a JavaScript string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>meta.keyspace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The keyspace of the document to be used for the operation.</p>
<p class="tableblock">Must be in the JavaScript format <code>"keyspace": { "bucket_name": string, "scope_name": string, "collection_name": string }</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>meta.cas</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) Specifies the CAS value to be used as a pre-condition for the operation.</p>
<p class="tableblock">If the CAS value of the document does not match the CAS value specified in this field, the operation fails and sets the parameter <code>cas_mismatch</code> to true in the error return object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>meta.expiry_date</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Optional) Sets the expiry time for the document.
If specified, must be in the JavaScript format <code>Date</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>doc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string, number, boolean, null, Object, or Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The document content of the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the success or failure of the operation.</p>
<p class="tableblock">If the operation is successful, it returns the data that was fetched.
If the operation fails, it returns the details of the error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result.success</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates if the operation is successful or not.
This field is always present in the return object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result.meta</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains metadata about the object that was fetched.
This field is only present is the operation is successful.</p>
<p class="tableblock">If the specified key is not present in the bucket, the operation fails and returns <code>key_not_found</code> in the error object.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result.meta.id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The key of the document fetched by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result.meta.cas</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The CAS value of the document fetched by the operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result.meta.expiry_date</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The expiration date of the document.
This field is only present if an expiration is set on the document.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result.meta.datatype</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether the document is <code>json</code> or <code>binary</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result.doc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string, number, boolean, null, Object, or Array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the content of the requested document if the operation is successful.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result.error</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns an error if the operation fails.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result.error.cas_mismatch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, this field indicates that the operation failed because a CAS value was not specified or because the CAS value on the object did not match the CAS value in the request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result.error.key_not_found</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, this field indicates that the operation failed because the specified key did not exist in the bucket.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result.error.key_already_exists</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, this field indicates that the operation failed because the specified key already exists in the bucket.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result.error.code</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Represents the SDK error code that triggered the operation to fail.
Usually returns an internal numeric code.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result.error.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the error that the SDK triggered and that caused the operation to fail.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result.error.desc</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A description of the error.
This description can be used for diagnostics and logging, and can change over time.
Programming logic should not be tied to the specific contents of this field.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exceptions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates errors through the error object in the return value.
Exceptions are only thrown during system failure conditions.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="see-also"><a class="anchor" href="#see-also"></a>See Also</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="eventing-examples.html#examples-scriptlets-advanced-accessors" class="xref page">Advanced Accessor Handler scriptlets</a> for complete examples of Advanced Keyspace Accessors, including JavaScript, input mutations, output mutations, and log messages</p>
</li>
<li>
<p><a href="eventing-language-constructs.html#bucket_accessors" class="xref page">Basic Keyspace Accessors</a></p>
</li>
</ul>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2024 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.6"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/vendor/chatbox-ui.js"></script>
<script id="site-script" src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
