<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://metrics.couchbase.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<title>Language Constructs | Couchbase Docs</title>
<link rel="canonical" href="https://docs.couchbase.com/server/current/eventing/eventing-language-constructs.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Language constructs are the fundamental units of a language.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.6">
<meta name="page-url" content="/server/current/eventing/eventing-language-constructs.html">
<meta name="page-nav-header-levels" content="0">

<meta name="docsearch:component" content="server">
<meta name="docsearch:component_title" content="server">
<meta name="docsearch:cversion" content="7.6">
<meta name="docsearch:component_version" content="server@7.6">
<meta name="docsearch:module" content="eventing">
<meta name="docsearch:breadcrumbs" content="server">
<meta name="docsearch:topic_type" content="">
<meta name="docsearch:version_rank" content="1">
<meta name="docsearch:status" content="">
<meta name="docsearch:edition" content="">
<meta name="docsearch:page_rank" content="50">


<meta name="generator" content="Antora 3.1.7">
<link rel="icon" href="../../../_/img/favicon.svg" type="image/svg+xml">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon" sizes="any">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation"
                      href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">

                  <li class="nav-item "">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item nav-item-selected">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                      
                    </a>
                  </li>
                  <li class="nav-item ">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                      
                    </a>
                  </li>
                  <li class="nav-item ">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                      
                    </a>
                  </li>
                  <li class="nav-item ">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                      
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>
              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
    <template id="page-versions" style="display: none">
      <select class="version_list" data-component="server">
        <option value="7.6" data-url="eventing-language-constructs.html" selected>7.6</option>
        <option value="7.2" data-url="../../7.2/eventing/eventing-language-constructs.html">7.2</option>
        <option value="7.1" data-url="../../7.1/index.html">7.1</option>
        <option value="7.0" data-url="../../7.0/index.html">7.0</option>
      </select>
    </template>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="2">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/rayoffiah/projects/couchbase/docs-devex/modules/eventing/pages/eventing-language-constructs.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../index.html">server</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Language Constructs</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
Language constructs are the fundamental units of a language.
</blockquote>
</div>
<div class="paragraph">
<p>This page describes which JavaScript constructs Eventing Functions do and do not support.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Couchbase functions inherit support for most ECMAScript constructs by using Google v8 as the execution container.
Certain capabilities have been removed and are not supported in order to handle the automatic sharding and scaling of functions.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="supported-lang-features"><a class="anchor" href="#supported-lang-features"></a>Supported Language Features</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Eventing Functions support the following features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#basic_bucket_accessors">Basic Keyspace Accessors</a></p>
</li>
<li>
<p><a href="#advanced_bucket_accessors">Advanced Keyspace Accessors</a></p>
</li>
<li>
<p><a href="#logging">Logging</a></p>
</li>
<li>
<p><a href="#n1ql_statements">SQL++ Statements</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="basic_bucket_accessors"><a class="anchor" href="#basic_bucket_accessors"></a>Basic Keyspace Accessors</h3>
<div class="paragraph">
<p>Buckets that are bound to an Eventing Function appear as a global JavaScript map.
Map operations like GET, SET, and DELETE are exposed to the GET, SET, and DELETE Data Service provider operations.</p>
</div>
<div class="paragraph">
<p>If the bucket binding has a wildcard <code>*</code> for its scope or collection, you cannot use a Basic Keyspace Accessor to access the Data Service. Instead, you must use an <a href="#advanced_bucket_accessors">Advanced Keyspace Accessor</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Operation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operator[]</code> is applied on a bucket binding and used as a value expression.</p>
<p class="tableblock">Fetches the object from the KV bucket that the variable is bound to.
Returns the parsed JSON value as a JavaScript object.</p>
<p class="tableblock">Fetching a non-existent object from a bucket returns an undefined value.
This operation throws an exception if the underlying bucket GET operation fails with an unexpected error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operator[]</code> appears to the left of the <code>=</code> assignment statement.</p>
<p class="tableblock">Sets the provided JavaScript value into the KV bucket that the variable is bound to.
Replaces any existing value with the specified key.</p>
<p class="tableblock">This operation throws an exception if the underlying bucket SET operation fails with an unexpected error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operator[]</code> appears afer the JavaScript delete keyword.</p>
<p class="tableblock">Deletes the provided key from the KV bucket that the variable is bound to.
Returns a no-op if the object does not exist.</p>
<p class="tableblock">This operation throws an exception if the underlying bucket DELETE operation fails with an unexpected error.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
  // Assuming 'dest' is a bucket alias or binding to a keyspace
  var val = dest[meta.id];         // this is a bucket GET operation
  dest[meta.id] = {"status":3};    // this is a bucket SET operation
  delete dest[meta.id];            // this is a bucket DEL operation
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="advanced_bucket_accessors"><a class="anchor" href="#advanced_bucket_accessors"></a>Advanced Keyspace Accessors</h3>
<div class="paragraph">
<p>Advanced Keyspace Accessors expose a larger set of options and operators than <a href="#basic_bucket_accessors">Basic Keyspace Accessors</a>.
They have non-trivial argument sets and return values.</p>
</div>
<div class="paragraph">
<p>See <a href="eventing-advanced-keyspace-accessors.html" class="xref page">Advanced Keyspace Accessors</a> for more details.</p>
</div>
</div>
<div class="sect2">
<h3 id="logging"><a class="anchor" href="#logging"></a>Logging</h3>
<div class="paragraph">
<p>The <code>log()</code> function allows Eventing Functions to log user-defined messages.
<code>log()</code> statements are logged in each Eventing Function&#8217;s log file.</p>
</div>
<div class="paragraph">
<p><code>log()</code> does not throw exceptions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
  log("Now processing: " + meta.id);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Eventing Service also creates a system log file named <code>eventing.log</code>.
This file exists in all Eventing Functions and captures management and lifecycle information.
The end-user cannot write to this file.</p>
</div>
<div class="paragraph">
<p>See <a href="eventing-debugging-and-diagnosability.html#logging-functions" class="xref page">Logging Functions</a> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="n1ql_statements"><a class="anchor" href="#n1ql_statements"></a>SQL++ Statements</h3>
<div class="paragraph">
<p>You can use top-level SQL++ keywords like SELECT, UPDATE, INSERT, and DELETE as inline words in Eventing Functions.
These operations are accessible through the returned iterable handle.</p>
</div>
<div class="paragraph">
<p>SQL++ Query results, through the SELECT operation, are streamed in batches to the iterable handle as the iteration progresses through the result set.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To avoid recursion, an Eventing Function can listen for mutations in a bucket.
SQL++ DML statements canot manipulate documents in that same bucket.
To work around this, you can use the exposed data service KV map in your Eventing Function.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following Function has a feed boundary of <strong>Everything</strong>, which means the same SQL++ statement is executed 7,303 times.
To execute only one query, you can configure your feed boundary to be <strong>From now</strong> and to mutate only one document in the keyspace <code>beer-sample</code>.<code>_default</code>.<code>_default</code>.</p>
</div>
<div class="paragraph">
<p>You can also use an optimal index, which makes your query performance 24 times faster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
    var strong = 70;
    var results =
        SELECT *                               /* SQL++ queries are embedded directly */
        FROM `beer-sample`._default._default   /* Token escaping is standard SQL++ style */
        WHERE abv &gt; $strong;                   // Local variable reference using $ syntax
    for (var beer of results) {                // Stream results using 'for' iterator
        log(beer);
        break;
    }
    results.close();                           // End the query and free resources held
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The embedded SQL++ call starts the query and returns a JavaScript iterable object that represents the result set of the query. You can iterate the returned handle using standard JavaScript mechanisms like <code>for&#8230;&#8203;of</code> loops.</p>
</div>
<div class="paragraph">
<p>The iterator is an input iterator, meaning the elements are read-only.
The variables created inside the iterator are local to it.
You cannot use the keyword <code>this</code> in the body of the iterator.</p>
</div>
<div class="paragraph">
<p>You must close each result set with the <code>close()</code> method, which stops the underlying SQL++ query and releases associated resources.
In some cases like nested SQL++ lookups, failing to explicitly call <code>close()</code> can use too many SQL++ resources and lead to poor performance.</p>
</div>
<div class="sect3">
<h4 id="valid-and-invalid-statements"><a class="anchor" href="#valid-and-invalid-statements"></a>Valid and Invalid Statements</h4>
<div class="paragraph">
<p>SQL++ is not syntactically part of the JavaScript language.
Eventing transpiles the Eventing Function code to identify SQL++ statements and convert them to a standard JavaScript function call.
This call then returns an iterable object with a <code>close()</code> method.</p>
</div>
<div class="paragraph">
<p>To use a JavaScript variable in a query statement, you must use <code>$&lt;variable&gt;</code>.
This parameter is substituted in the query by the corresponding JavaScript variable&#8217;s runtime value.</p>
</div>
<div class="paragraph">
<p>You cannot use the <code>meta.id</code> expression in the query statement.
Instead, you must use <code>var id = meta.id</code>.</p>
</div>
<div class="paragraph">
<p>The following is a valid statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">var id = meta.id;
DELETE FROM mybucket.myscope.transactions WHERE username = $id;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following is an invalid statement:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">DELETE FROM mybucket.myscope.transactions WHERE username = $meta.id;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="escaped-identifiers"><a class="anchor" href="#escaped-identifiers"></a>Escaped Identifiers</h4>
<div class="paragraph">
<p>When you use a SQL++ query inside an Eventing Function, you must also use an escaped identifier for keyspaces with special characters. To escape an identifier, enclose it in back ticks (``).</p>
</div>
<div class="paragraph">
<p>If the bucket name is <code>beer-sample</code> and the scope and collection are both <code>_default</code>, you only need to escape the bucket in the SQL++ query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT * FROM `beer-sample`._default._default WHERE type ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the bucket name is <code>beersample</code>, you do not need to escape the keyspace of the SQL++ query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-sqlpp hljs" data-lang="sqlpp">SELECT * FROM beersample._default._default WHERE type ...</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="end-of-line-comments"><a class="anchor" href="#end-of-line-comments"></a>End of Line Comments</h4>
<div class="paragraph">
<p>In multiline SQL++ statements, you cannot use single line <code>// end of line comments</code> before the semicolon at the end of the statement.
This causes syntax errors in the transformation and compilation of the SQL++ statement.</p>
</div>
<div class="paragraph">
<p>To include comments in multiline statements, use <code>/* this format */</code> instead.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="unsupported-lang-features"><a class="anchor" href="#unsupported-lang-features"></a>Unsupported Language Features</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following features are not supported by Eventing Functions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#global_state">Global State</a></p>
</li>
<li>
<p><a href="#asynchrony">Asynchrony</a></p>
</li>
<li>
<p><a href="#browser_extensions">Browser and Other Extensions</a></p>
</li>
<li>
<p><a href="#library_imports">Library Imports</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="global-state"><a class="anchor" href="#global-state"></a>Global State</h3>
<div class="paragraph">
<p>Eventing Functions do not support global variables.
This restriction makes sure that the logic of Eventing Functions remains agnostic of rebalance operations.</p>
</div>
<div class="paragraph">
<p>Instead of using global variables, you must save and retrieve all states from persistence providers like the Data Service.
You can use bindings to make all global states contained in Data Service buckets available to Eventing Functions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">var count = 0;                         // Not allowed - global variable.
function OnUpdate(doc, meta) {
  count++;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use Constant alias bindings in your Function&#8217;s settings to access global constants within a Function&#8217;s JavaScript.
For example, a Constant alias of <code>debug</code> with a value of <code>true</code> or <code>false</code> behaves in the same way as the statement <code>const debug = true</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="asynchrony"><a class="anchor" href="#asynchrony"></a>Asynchrony</h3>
<div class="paragraph">
<p>Eventing Functions do not support asynchronous flows.</p>
</div>
<div class="paragraph">
<p>Asynchrony creates a node-specific, long-running state that prevents persistence providers from capturing the entire state.
This limits Eventing Functions to execute short-running, straight-line code without sleep and wakeups.</p>
</div>
<div class="paragraph">
<p>You can use Timers to add limited asynchrony back into your Function.
Timers are designed specifically to prevent a state from being node-specific.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
  setTimeout(function(){}, 300);     // Not allowed - asynchronous flow.
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="browser_extensions"><a class="anchor" href="#browser_extensions"></a>Browser and Other Extensions</h3>
<div class="paragraph">
<p>Eventing Functions do not support browser extensions, like window methods and DOM events.</p>
</div>
<div class="paragraph">
<p>You can use Timers instead of <code>setTimeout</code> and curl calls instead of <code>XMLHttpRequests</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
  var rpc = window.XMLHttpRequest();  // Not allowed - browser extension.
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="library_imports"><a class="anchor" href="#library_imports"></a>Library Imports</h3>
<div class="paragraph">
<p>The Eventing Service does not support importing libraries into Eventing Functions.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="build-in-functions"><a class="anchor" href="#build-in-functions"></a>Built-in Functions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Eventing Functions support the following built-in functions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#n1ql_call"><code>N1QL()</code></a></p>
</li>
<li>
<p><a href="#analytics_call"><code>ANALYTICS()</code></a></p>
</li>
<li>
<p><a href="#crc64_call"><code>crc64()</code></a></p>
</li>
<li>
<p><a href="#timers_general"><code>createTimer()</code> and <code>cancelTimer()</code></a></p>
</li>
<li>
<p><a href="#curl_call"><code>curl()</code></a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="n1ql_call"><a class="anchor" href="#n1ql_call"></a><code>N1QL()</code></h3>
<div class="paragraph">
<p>You cannot use the <code>N1QL()</code> function call directly because it bypasses the semantic and syntactic checks of the transpiler.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>N1QL()</code> function has replaced the deprecated <code>N1qlQuery()</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>N1QL()</code> function contains the following parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>statement</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The identified SQL++ statement.
This is passed to SQL++ through SDK to run as a prepared statement.</p>
<p class="tableblock">All of the JavaScript variables referenced in the statement using the <code>$&lt;variable&gt;</code> notation are treated as named parameters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>params</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Can be a JavaScript array or a JavaScript map object.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>params</code> is a JavaScript array when the SQL++ statement executes positional parameters.
This array corresponds to the values bound to the positional parameters.</p>
</li>
<li>
<p><code>params</code> is a JavaScript map object when the SQL++ statement executes named parameters.
This map object provides the name-value pairs that correspond to the variables used by the SQL++ statement.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You cannot mix positional and named parameters.</p>
</div>
<div class="paragraph">
<p>Example of an iterator using a positional <code>params</code> array:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">    // Using `travel-sample`._default._default to demonstrate params.
    // a) Positional param 1 is field 'iata' from the input doc
    // b) Positional param 2 from an Eventing Function variable: max_dist
    // c) Will also prepare the statement for better performance

    if (doc.type !== "airline") return; // only process airline docs

    var max_dist = 120;
    var results = N1QL(
        "SELECT COUNT(*) AS cnt " +
        "FROM `travel-sample`._default._default " +
        "WHERE type = \"route\" " +
        "AND airline = $1 AND distance &lt;= $2",
        [doc.iata,max_dist],
        { 'isPrepared': true }
    );</code></pre>
</div>
</div>
<div class="paragraph">
<p>Example of an iterator using a named <code>params</code> map object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">    // Using `travel-sample`._default._default to demonstrate named params.
    // a) Named param 1 '$mytype' is a hardcode
    // b) Named param 2 '$myairline' is field 'iata' from the input doc
    // c) Named param 3 '$mydistance' if from an Eventing Function variable max_dist
    // d) Set the consistency in the options to none

    if (doc.type !== "airline") return; // only process airline docs

    var max_dist = 120;
    var results = N1QL("SELECT COUNT(*) AS cnt " +
        "FROM `travel-sample`._default._default " +
        "WHERE type = $mytype " +
        "AND airline = $myairline AND distance &lt;= $mydistance",
        { '$mytype': 'route', '$mydistance': max_dist, '$myairline': doc.iata },
        { 'consistency': 'none' }
    );</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>options</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A JSON object that has various query runtime options as keys.
The following settings are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>isPrepared</code> determines if the statement is prepared.
This setting defaults to <code>false</code>, but you can change it to <code>true</code> to increase the performance of any SQL++ query.</p>
</li>
<li>
<p><code>consistency</code> determines the consistency level for the statement.
This setting defaults to the consistency level specified in your Eventing Function settings, but you can change it on any individual statement.
Valid values are <code>none</code> and <code>request</code>.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>return value (handle)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns a JavaScript iterable object that represents the result set of the query.
You can iterate the returned handle using standard JavaScript mechanisms like <code>for&#8230;&#8203;of</code> loops.</p>
<p class="tableblock">You can use the <code>close()</code> method on the handle object to release the resources held by the SQL++ query.
This method also cancels queries that are in the process of streaming results.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exceptions thrown</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>N1QL()</code> function throws an exception if the underlying SQL++ query fails to parse or does not start to execute.</p>
<p class="tableblock">The returned iterable handle throws an exception if the underlying SQL++ query fails after it has started.</p>
<p class="tableblock">The <code>close()</code> method on the iterable handle can throw an exception if the underlying SQL++ query cancellation finds an unexpected error.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="analytics_call"><a class="anchor" href="#analytics_call"></a><code>ANALYTICS()</code></h3>
<div class="paragraph">
<p><em>(Introduced in Couchbase Server 7.6)</em></p>
</div>
<div class="paragraph">
<p>The <code>ANALYTICS()</code> function provides integration with SQL++ Analytics directly from the Eventing Service.</p>
</div>
<div class="paragraph">
<p>Integrating Eventing with Analytics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Allows Eventing to benefit from the high availability and load balancing of Analytics, where requests can take turns being submitted across nodes</p>
</li>
<li>
<p>Simplifies Eventing code logic and improves code readability</p>
</li>
<li>
<p>Eliminates security and network latency issues with the <code>curl()</code> function</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
    // Ignore information we don't care about
    if (doc.type !== 'airline') return;

    // Get the total routes per IATA
    var route_cnt = 0;
    // Uses a true variable as a SQL++ parameter
    var airline = doc.iata;

    var results = ANALYTICS(
        "SELECT COUNT(*) AS cnt
        FROM `travel-sample`.`inventory`.`route`
        WHERE type = \"route\"
		AND airline = $1", [doc.iata]
    );

    // Stream results using the 'for' iterator
    for (var item of results) {
        route_cnt = item.cnt;
    }

    // End the query and free the resources held
    results.close();

    // Log the KEY, AIRLINE and ROUTE_CNT
    log("key: " + meta.id + ", airline: " + doc.iata + ", route_cnt: " + route_cnt);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about SQL++ Analytics, see <a href="#server:analytics:1_intro.adoc" class="xref unresolved">What’s SQL++ for Analytics?</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="crc64_call"><a class="anchor" href="#crc64_call"></a><code>crc64()</code></h3>
<div class="paragraph">
<p>The <code>crc64()</code> function:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Calculates the CRC64 hash of an object using the ISO polynomial</p>
</li>
<li>
<p>Suppresses double mutations</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>crc64()</code> function takes the object to checksum as its only parameter.
The parameter can be any JavaScript object that can be encoded to JSON.</p>
</div>
<div class="paragraph">
<p>The function returns the hash as a string.
The hash is sensitive to the order of the parameters in case of map objects.</p>
</div>
<div class="paragraph">
<p>If multiple Eventing Functions share the same <code>crc64</code> checksum documents as the Sync Gateway, real mutations can be suppressed and missed.
To prevent this from happening, you can make the checksum documents unique to each Eventing Function.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
    var crc_str = crc64(doc);
    /// Code goes here
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the <code>crc64</code> function to suppress a double mutation.
A double mutation can happen when the Sync Gateway and the Eventing Function leverage the same bucket.</p>
</div>
<div class="paragraph">
<p>The Sync Gateway updates the metadata of the document inside the bucket and generates an event for the Eventing Function to process.
The Eventing Function cannot differentiate between events from the Sync Gateway and events from SDKs, SQL++, and other sources.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
    // Ignore documents created by Sync Gateway
    if(meta.id.startsWith("_sync") == true) return;

    // Ignore documents whose body has not changed since we last saw it
    var prev_crc = checksum_bucket[meta.id];
    var curr_crc = crc64(doc);
    if (prev_crc === curr_crc) return;
    checksum_bucket[meta.id] = curr_crc;

   // Business logic goes in here
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="timers_general"><a class="anchor" href="#timers_general"></a><code>createTimer()</code> and <code>cancelTimer()</code></h3>
<div class="paragraph">
<p>Timers are asynchronous compute.
They allow Eventing Functions to execute in reference to wall-clock events.</p>
</div>
<div id="createtimer_call" class="paragraph">
<p>To create a Timer, call the <code>createTimer()</code> function using <code>createTimer(callback, date, reference, context)</code>.
This function executes at or close to a specified date.</p>
</div>
<div class="paragraph">
<p>The reference is an identifier for the Timer that is scoped to an Eventing Function and callback.
The context must be serializable data that is available to the callback when the Timer is fired.</p>
</div>
<div id="canceltimer_call" class="paragraph">
<p>To cancel a Timer, you can do one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Call the <code>createTimer()</code> function again using a reference from the existing Timer you want to cancel.</p>
</li>
<li>
<p>Call the <code>cancelTimer()</code> function using <code>cancelTimer(callback, reference)</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information about Timers, see <a href="eventing-timers.html" class="xref page">Timers</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="curl_call"><a class="anchor" href="#curl_call"></a><code>curl()</code></h3>
<div class="paragraph">
<p>The <code>curl()</code> function lets you interact with external entities through a REST endpoint from Eventing Functions, using either HTTP or HTTPS.</p>
</div>
<div class="paragraph">
<p>For more information about the <code>curl()</code> function, see <a href="eventing-curl-spec.html" class="xref page">cURL</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="handler-signatures"><a class="anchor" href="#handler-signatures"></a>Handler Signatures</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Eventing Service calls the following JavaScript functions on events like mutations and fired Timers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#onupdate_handler">OnUpdate Handler</a></p>
</li>
<li>
<p><a href="#ondelete_handler">OnDelete Handler</a></p>
</li>
<li>
<p><a href="#timer_callback_handler">Timer Callback Handler</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="onupdate_handler"><a class="anchor" href="#onupdate_handler"></a>OnUpdate Handler</h3>
<div class="paragraph">
<p>The <code>OnUpdate</code> handler is called when you create or modify a document using an operation like insert or update.
The entry point <code>OnUpdate(doc, meta)</code> listens to mutations in the associated source bucket.</p>
</div>
<div class="paragraph">
<p>The <code>OnUpdate</code> handler has the following limitations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If a document is modified several times in a short period of time, the handler calls might be combined into a single event due to deduplication.</p>
</li>
<li>
<p>You cannot distinguish between a Create and an Update operation.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnUpdate(doc, meta) {
  if (doc.type === 'order' &amp;&amp; doc.value &gt; 5000) {
    // ‘phoneverify’ is a bucket alias or binding to a keyspace
    phoneverify[meta.id] = doc.customer;
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ondelete_handler"><a class="anchor" href="#ondelete_handler"></a>OnDelete Handler</h3>
<div class="paragraph">
<p>The <code>OnDelete</code> handler is called when a document is deleted or removed due to expiration.
The entry point <code>OnDelete(meta, options)</code> listens to mutations like deletions and expirations in the associated source bucket.</p>
</div>
<div class="paragraph">
<p>To make sure that a document has been deleted or has expired, you can inspect the optional argument <code>options</code>.
The <code>options</code> argument is a JavaScript map object that contains the boolean property <code>expired</code>.</p>
</div>
<div class="paragraph">
<p>You cannot get the value of a deleted or expired document.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnDelete(meta,options) {
    if (options.expired) {
        log("Document expired", meta.id);
    } else {
        log("Document deleted", meta.id);
    }
    var addr = meta.id;
    var res = SELECT id from mybucket.myscope.orders WHERE shipaddr = $addr;
    for (var id of res) {
        log("Address invalidated for pending order: " + id);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In versions of Couchbase Server before version 6.6.0, the optional argument <code>options</code> is not present and the entry point for the handler is <code>OnDelete(meta)</code>.
The entry point is still supported, but using it means you&#8217;re unable to differentiate deletion from expiration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">function OnDelete(meta) {
    log("Document deleted or expired", meta.id);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="timer_callback_handler"><a class="anchor" href="#timer_callback_handler"></a>Timer Callback Handler</h3>
<div class="paragraph">
<p>Timer callbacks are user-defined JavaScript functions passed as the callback argument in the built-in <code>createTimer(callback, date, reference, context)</code> function call.</p>
</div>
<div class="paragraph">
<p>The Timer callback handler is an entry point for the event when a timer, created by the specific Eventing Function, matures and fires.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">// Timer Callback Handler (user-defined entry point)
function DocTimerCallback(context) {
	log("Timer fired running callback 'DocTimerCallback' with context: " + context);
}

// Insert/Update Handler or entry point
function OnUpdate(doc, meta) {
	// filter out docs of no interest
	if (meta.id != 'make_timer:1') return;
	// Create a Date value 60 seconds from now
	var oneMinuteFromNow = new Date(); // Get current time &amp; add 60 sec. to it
	oneMinuteFromNow.setSeconds(oneMinuteFromNow.getSeconds() + 60);
	// Create a doc to hold context to pass state to the callback function
	var context = { docId: meta.id, random_text: "arbitrary text" };
	// Create a timer that will fire an event in the future
	log("createTimer with callback 'DocTimerCallback'");
	createTimer(DocTimerCallback, oneMinuteFromNow, meta.id, context);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about Timers, see <a href="eventing-timers.html" class="xref page">Timers</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reserved-words"><a class="anchor" href="#reserved-words"></a>Reserved Words</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You cannot use reserved words as variable names, function names, or JavaScript code properties in Eventing Functions.
If you use a reserved word, the Eventing Function returns a deployment error.</p>
</div>
<div class="paragraph">
<p>The following reserved words are used by the transpiler to integrate SQL++ with Eventing:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="6">SQL++ Reserved Words</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ALTER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BUILD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CREATE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DROP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EXECUTE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">EXPLAIN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GRANT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INFER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">INSERT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MERGE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PREPARE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RENAME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REVOKE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SELECT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UPDATE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UPSERT</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2024 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.6"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/vendor/chatbox-ui.js"></script>
<script id="site-script" src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
