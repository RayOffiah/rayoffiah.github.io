<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://metrics.couchbase.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<title>Search Index Management and Monitoring | Couchbase Docs</title>
<link rel="canonical" href="https://docs.couchbase.com/server/current/rest-api/rest-fts-indexing.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<meta name="description" content="Use the following endpoints in the Search Service API to manage and monitor your Search indexes.">
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="server">
<meta name="dcterms.identifier" content="7.6">
<meta name="page-url" content="/server/current/rest-api/rest-fts-indexing.html">
<meta name="page-nav-header-levels" content="0">

<meta name="docsearch:component" content="server">
<meta name="docsearch:component_title" content="Couchbase Server">
<meta name="docsearch:cversion" content="7.6">
<meta name="docsearch:component_version" content="server@7.6">
<meta name="docsearch:module" content="rest-api">
<meta name="docsearch:breadcrumbs" content="Couchbase Server / Reference / REST API Reference / Search Service API / Indexes">
<meta name="docsearch:topic_type" content="">
<meta name="docsearch:version_rank" content="1">
<meta name="docsearch:status" content="">
<meta name="docsearch:edition" content="">
<meta name="docsearch:page_rank" content="50">


<meta name="generator" content="Antora 3.1.4">
<link rel="icon" href="../../../_/img/favicon.svg" type="image/svg+xml">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon" sizes="any">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation"
                      href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">

                  <li class="nav-item "">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item nav-item-selected">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                      
                    </a>
                  </li>
                  <li class="nav-item ">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                      
                    </a>
                  </li>
                  <li class="nav-item ">
                    <a class="nav-link" href="../../../cloud/index.html">
                      Capella
                      
                    </a>
                  </li>
                  <li class="nav-item ">
                    <a class="nav-link" href="../../../home/sdk.html">
                      SDKs
                      
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>
              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
    <template id="page-versions" style="display: none">
      <select class="version_list" data-component="server">
        <option value="7.6" data-url="rest-fts-indexing.html" selected>7.6</option>
        <option value="7.2" data-url="../../7.2/index.html">7.2</option>
        <option value="7.1" data-url="../../7.1/index.html">7.1</option>
        <option value="7.0" data-url="../../7.0/index.html">7.0</option>
      </select>
    </template>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="2">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="file:///Users/rayoffiah/projects/couchbase/docs-server/modules/rest-api/pages/rest-fts-indexing.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="../introduction/intro.html">Couchbase Server</a></li>
<li class="crumb">Reference</li>
<li class="crumb"><a href="rest-intro.html">REST API Reference</a></li>
<li class="crumb"><a href="rest-fts.html">Search Service API</a></li>
<li class="crumb"><a href="rest-fts-indexing.html">Indexes</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Search Index Management and Monitoring</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
Use the following endpoints in the Search Service API to manage and monitor your Search indexes.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="search-index-definitions"><a class="anchor" href="#search-index-definitions"></a>Search Index Definitions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use the following APIs to retrieve Search index definitions, create new Search indexes, or delete an existing Search index.</p>
</div>
<div class="sect2">
<h3 id="g-api-index"><a class="anchor" href="#g-api-index"></a>Get All Search Index Definitions</h3>
<div class="paragraph">
<p>Returns all Search index definitions from the bucket where you have read permissions, as a JSON object.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This endpoint is for legacy Search indexes and may be deprecated in a future release.
Use <a href="#g-api-scoped-indexes">GET All Search Index Definitions (Scoped)</a>, instead.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="endpoint"><a class="anchor" href="#endpoint"></a>Endpoint</h4>
<div class="paragraph">
<p>GET /api/index</p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required"><a class="anchor" href="#permission-required"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!read</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required"><a class="anchor" href="#role-required"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Reader</strong> or <strong>Search Admin</strong></p>
</div>
<div class="listingblock">
<div class="title">Sample Response</div>
<div class="content">
<pre>{
    "indexDefs": {
        "implVersion": "4.0.0",
        "indexDefs": {
            "myFirstIndex": {
            "name": "myFirstIndex",
            "params": "",
            "planParams": {
                "hierarchyRules": null,
                "maxPartitionsPerPIndex": 0,
                "nodePlanParams": null,
                "numReplicas": 0,
                "planFrozen": false
             },
             "sourceName": "",
             "sourceParams": "",
             "sourceType": "nil",
             "sourceUUID": "",
             "type": "fulltext-index",
             "uuid": "6cc599ab7a85bf3b"
          }
       },
       "uuid": "6cc599ab7a85bf3b"
    },
    "status": "ok"
}</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="g-api-scoped-indexes"><a class="anchor" href="#g-api-scoped-indexes"></a>GET All Search Index Definitions (Scoped)</h3>
<div class="paragraph">
<p>Returns all Search index definitions inside the bucket and scope specified in the endpoint URL as a JSON object.</p>
</div>
<div class="sect3">
<h4 id="endpoint-2"><a class="anchor" href="#endpoint-2"></a>Endpoint</h4>
<div class="paragraph">
<p>GET /api/bucket/<code>${BUCKET_NAME}</code>/scope/<code>${SCOPE_NAME}</code>/index</p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-2"><a class="anchor" href="#permission-required-2"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!read</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-2"><a class="anchor" href="#role-required-2"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Reader</strong> or <strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters"><a class="anchor" href="#parameters"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${BUCKET_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the bucket where you want to return Search index definitions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${SCOPE_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the scope where you want to return Search index definitions.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Sample response</div>
<div class="content">
<pre>{
    "status": "ok",
    "indexDefs": {
        "uuid": "23cf9530131858b8",
        "indexDefs": {
            "travel-sample.inventory.travel-hotel": {
                "type": "fulltext-index",
                "name": "travel-hotel",
                "uuid": "a04a16f178846bc4",
                "sourceType": "gocbcore",
                "sourceName": "travel-sample",
                "sourceUUID": "8f866261438f8b0d415a437552f3ae99",
                "planParams": {
                    "maxPartitionsPerPIndex": 1024,
                    "indexPartitions": 1
                },
                "params": {
                    "doc_config": {
                        "docid_prefix_delim": "",
                        "docid_regexp": "",
                        "mode": "scope.collection.type_field",
                        "type_field": "type"
                    },
                    "mapping": {
                        "analysis": {},
                        "default_analyzer": "standard",
                        "default_datetime_parser": "dateTimeOptional",
                        "default_field": "_all",
                        "default_mapping": {
                            "dynamic": true,
                            "enabled": false
                        },
                        "default_type": "_default",
                        "docvalues_dynamic": false,
                        "index_dynamic": true,
                        "store_dynamic": false,
                        "type_field": "_type",
                        "types": {
                            "inventory.hotel": {
                                "dynamic": false,
                                "enabled": true,
                                "properties": {
                                    "reviews": {
                                        "dynamic": false,
                                        "enabled": true,
                                        "properties": {
                                            "content": {
                                                "dynamic": false,
                                                "enabled": true,
                                                "fields": [
                                                    {
                                                        "docvalues": true,
                                                        "include_in_all": true,
                                                        "include_term_vectors": true,
                                                        "index": true,
                                                        "name": "content",
                                                        "store": true,
                                                        "type": "text"
                                                    }
                                                ]
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "store": {
                        "indexType": "scorch",
                        "segmentVersion": 15
                    }
                },
                "sourceParams": {}
            },
            "travel-sample.inventory.travel-test": {
                "type": "fulltext-index",
                "name": "travel-test",
                "uuid": "766ddce5d41a3b41",
                "sourceType": "gocbcore",
                "sourceName": "travel-sample",
                "sourceUUID": "8f866261438f8b0d415a437552f3ae99",
                "planParams": {
                    "maxPartitionsPerPIndex": 1024,
                    "indexPartitions": 1
                },
                "params": {
                    "doc_config": {
                        "docid_prefix_delim": "",
                        "docid_regexp": "",
                        "mode": "scope.collection.type_field",
                        "type_field": "type"
                    },
                    "mapping": {
                    "analysis": {},
                    "default_analyzer": "standard",
                    "default_datetime_parser": "dateTimeOptional",
                    "default_field": "_all",
                    "default_mapping": {
                        "dynamic": true,
                        "enabled": true
                    },
                    "default_type": "_default",
                    "docvalues_dynamic": false,
                    "index_dynamic": true,
                    "store_dynamic": false,
                    "type_field": "_type"
                    },
                    "store": {
                        "indexType": "scorch",
                        "segmentVersion": 15
                    }
                },
                "sourceParams": {}
            }
        },
        "implVersion": "5.7.0"
    }
}</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="g-api-index-name"><a class="anchor" href="#g-api-index-name"></a>GET Index Definition</h3>
<div class="paragraph">
<p>Returns the definition of the Search index specified in the endpoint URL as a JSON object.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This endpoint is for legacy Search indexes and may be deprecated in a future release.
Use <a href="#g-api-scoped-index-name">GET Index Definition (Scoped)</a>, instead.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="endpoint-3"><a class="anchor" href="#endpoint-3"></a>Endpoint</h4>
<div class="paragraph">
<p>GET /api/index/<code>${INDEX_NAME}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-3"><a class="anchor" href="#permission-required-3"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!read</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-3"><a class="anchor" href="#role-required-3"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Reader</strong> or <strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-2"><a class="anchor" href="#parameters-2"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the Search index definition you want to return.
You must use the fully qualified name for the index, which includes the bucket and scope.</p>
</div>
<div class="paragraph">
<p>To view the full, scoped name for an index for use with this endpoint:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Search</strong> tab in the Couchbase Server Web Console.</p>
</li>
<li>
<p>Point to the <strong>Index Name</strong> for an index.</p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Sample response</div>
<div class="content">
<pre>{
    "indexDef": {
        "name": "myFirstIndex",
        "params": "",
        "planParams": {
            "hierarchyRules": null,
            "maxPartitionsPerPIndex": 0,
            "nodePlanParams": null,
            "numReplicas": 0,
            "planFrozen": false
        },
        "sourceName": "",
        "sourceParams": "",
        "source
            ": "nil",
        "sourceUUID": "",
        "type": "fulltext-index",
        "uuid": "6cc599ab7a85bf3b"
      },
      "planPIndexes": [
        {
         "indexName": "myFirstIndex",
         "indexParams": "",
         "indexType": "bleve",
         "indexUUID": "6cc599ab7a85bf3b",
         "name": "myFirstIndex_6cc599ab7a85bf3b_0",
         "nodes": {
            "78fc2ffac2fd9401": {
              "canRead": true,
              "canWrite": true,
              "priority": 0
            }
         },
         "sourceName": "",
         "sourceParams": "",
         "sourcePartitions": "",
         "sourceType": "nil",
         "sourceUUID": "",
         "uuid": "64bed6e2edf354c3"
         }
       ],
       "status": "ok",
       "warnings": []
       }</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="g-api-scoped-index-name"><a class="anchor" href="#g-api-scoped-index-name"></a>GET Index Definition (Scoped)</h3>
<div class="paragraph">
<p>Returns the Search index definition for the Search index specified in the endpoint URL as a JSON object.
Unlike <a href="#g-api-index-name">GET /api/index/{indexName}</a>, this endpoint is scoped and does not require a fully qualified <code>${INDEX_NAME}</code> value.</p>
</div>
<div class="sect3">
<h4 id="endpoint-4"><a class="anchor" href="#endpoint-4"></a>Endpoint</h4>
<div class="paragraph">
<p>GET /api/bucket/<code>${BUCKET_NAME}</code>/scope/<code>${SCOPE_NAME}</code>/index/<code>${INDEX_NAME}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-4"><a class="anchor" href="#permission-required-4"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!read</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-4"><a class="anchor" href="#role-required-4"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Reader</strong> or <strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-3"><a class="anchor" href="#parameters-3"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${BUCKET_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the bucket used to create the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${SCOPE_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the scope used to create the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the Search index definition to return.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Sample Response for a Vector Search index</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="file:///Users/rayoffiah/projects/couchbase/docs-server/modules/rest-api/examples/fts-sample-index-def-response.jsonc">{
    "status": "ok",
    "indexDef": {
        "type": "fulltext-index",
        "name": "color-test",
        "uuid": "6ea521a918bd3837",
        "sourceType": "gocbcore",
        "sourceName": "vector-sample",
        "sourceUUID": "614177a67bdfbd2823c5f9c3e62f5991",
        "planParams": {
            "maxPartitionsPerPIndex": 1024,
            "indexPartitions": 1
        },
        "params": {
            "doc_config": {
                "docid_prefix_delim": "",
                "docid_regexp": "",
                "mode": "scope.collection.type_field",
                "type_field": "type"
            },
            "mapping": {
                "analysis": {},
                "default_analyzer": "standard",
                "default_datetime_parser": "dateTimeOptional",
                "default_field": "_all",
                "default_mapping": {
                    "dynamic": false,
                    "enabled": false
                },
                "default_type": "_default",
                "docvalues_dynamic": false,
                "index_dynamic": false,
                "store_dynamic": false,
                "type_field": "_type",
                "types": {
                    "color.rgb": {
                        "dynamic": false,
                        "enabled": true,
                        "properties": {
                            "color": {
                                "dynamic": false,
                                "enabled": true,
                                "fields": [
                                    {
                                        "analyzer": "en",
                                        "docvalues": true,
                                        "include_in_all": true,
                                        "include_term_vectors": true,
                                        "index": true,
                                        "name": "color",
                                        "store": true,
                                        "type": "text"
                                    }
                                ]
                            },
                            "colorvect_dot": {
                                "dynamic": false,
                                "enabled": true,
                                "fields": [
                                    {
                                        "dims": 3,
                                        "index": true,
                                        "name": "colorvect_dot",
                                        "similarity": "dot_product",
                                        "type": "vector",
                                        "vector_index_optimized_for": "recall"
                                    }
                                ]
                            }
                        }
                    }
                }
            },
            "store": {
                "indexType": "scorch",
                "segmentVersion": 16
            }
        },
        "sourceParams": {}
    },
    "planPIndexes": [
        {
            "name": "vector-sample.color.color-test_6ea521a918bd3837_4c1c5584",
            "uuid": "1543820346544e08",
            "indexType": "fulltext-index",
            "indexName": "vector-sample.color.color-test",
            "indexUUID": "6ea521a918bd3837",
            "sourceType": "gocbcore",
            "sourceName": "vector-sample",
            "sourceUUID": "614177a67bdfbd2823c5f9c3e62f5991",
            "sourcePartitions": "0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840,841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1000,1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1017,1018,1019,1020,1021,1022,1023",
            "nodes": {
                "b7d460b7d4145482ac132dfa23727c5c": {
                    "canRead": true,
                    "canWrite": true,
                    "priority": 0
                }
            },
            "indexParams": {
                "doc_config": {
                    "docid_prefix_delim": "",
                    "docid_regexp": "",
                    "mode": "scope.collection.type_field",
                    "type_field": "type"
                },
                "mapping": {
                    "analysis": {},
                    "default_analyzer": "standard",
                    "default_datetime_parser": "dateTimeOptional",
                    "default_field": "_all",
                    "default_mapping": {
                        "dynamic": false,
                        "enabled": false
                    },
                    "default_type": "_default",
                    "docvalues_dynamic": false,
                    "index_dynamic": false,
                    "store_dynamic": false,
                    "type_field": "_type",
                    "types": {
                        "color.rgb": {
                            "dynamic": false,
                            "enabled": true,
                            "properties": {
                                "color": {
                                    "dynamic": false,
                                    "enabled": true,
                                    "fields": [
                                        {
                                            "analyzer": "en",
                                            "docvalues": true,
                                            "include_in_all": true,
                                            "include_term_vectors": true,
                                            "index": true,
                                            "name": "color",
                                            "store": true,
                                            "type": "text"
                                        }
                                    ]
                                },
                                "colorvect_dot": {
                                    "dynamic": false,
                                    "enabled": true,
                                    "fields": [
                                        {
                                            "dims": 3,
                                            "index": true,
                                            "name": "colorvect_dot",
                                            "similarity": "dot_product",
                                            "type": "vector",
                                            "vector_index_optimized_for": "recall"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                },
                "store": {
                    "indexType": "scorch",
                    "segmentVersion": 16
                }
            }
        }
    ],
    "warnings": []
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="p-api-index-name"><a class="anchor" href="#p-api-index-name"></a>PUT Create or Update an Index Definition</h3>
<div class="paragraph">
<p>If the Search index in the endpoint URL does not exist, this endpoint uses a JSON object in the request body to create a new index.
If the Search index already exists, this endpoint updates the Search index definition.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This endpoint is for legacy Search indexes and may be deprecated in a future release.
Use <a href="#p-api-scoped-index-name">PUT Create or Update an Index Definition (Scoped)</a>, instead.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="endpoint-5"><a class="anchor" href="#endpoint-5"></a>Endpoint</h4>
<div class="paragraph">
<p>PUT /api/index/<code>${INDEX_NAME}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-5"><a class="anchor" href="#permission-required-5"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!write</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-5"><a class="anchor" href="#role-required-5"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-4"><a class="anchor" href="#parameters-4"></a>Parameters</h4>
<div class="paragraph">
<p>For a detailed list of all parameters for the Request Body for the PUT /api/index/<code>${INDEX_NAME}</code> endpoint, see <a href="../search/search-index-params.html" class="xref page">Search Index JSON Properties</a>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the Search index definition to create or update.
The name must satisfy the regular expression <code>^[A-Za-z][0-9A-Za-z_\-]*$</code>.</p>
</div>
<div class="paragraph">
<p>If you want to update an index definition, you must use the fully qualified name for the index, which includes the bucket and scope.</p>
</div>
<div class="paragraph">
<p>To view the full, scoped name for an index for use with this endpoint:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Search</strong> tab in the Couchbase Server Web Console.</p>
</li>
<li>
<p>Point to the <strong>Index Name</strong> for an index.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">params</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String (JSON), form parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sets the Search index&#8217;s type identifier, type mappings, and analyzers.
For more information, see <a href="../search/search-index-params.html#params" class="xref page">Params Object</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, form parameter</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The type of Search index you want to create.
For more information, see <a href="../search/search-index-params.html#initial" class="xref page">Initial Settings</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">planParams</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String (JSON), form parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set a Search index&#8217;s partition and replication settings.
For more information, see <a href="../search/search-index-params.html#planparams" class="xref page">planParams Object</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">prevIndexUUID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, form parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intended for clients that want to check that they are not overwriting the Search index definition updates of concurrent clients.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">sourceName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, form parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the bucket where you want to create the Search index.
For more information, see <a href="../search/search-index-params.html#initial" class="xref page">Initial Settings</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">sourceUUID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, form parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The UUID of the bucket where you want to create the Search index.
For more information, see <a href="../search/search-index-params.html#initial" class="xref page">Initial Settings</a>.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Sample failure response</div>
<div class="content">
<pre>{
    "error": "rest_create_index: index type is required, indexName: travel-test",
    "request": "",
    "status": "fail"
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a non-200 HTTP error code when a request fails.</p>
</div>
<div class="listingblock">
<div class="title">Sample success response</div>
<div class="content">
<pre>{
    "status": "ok",
    "name": "travel-test",
    "uuid": "565ca041af3baf9d"
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a HTTP 200 status code with a response that includes <code>"status": "ok"</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="p-api-scoped-index-name"><a class="anchor" href="#p-api-scoped-index-name"></a>PUT Create or Update an Index Definition (Scoped)</h3>
<div class="paragraph">
<p>If the Search index in the endpoint URL does not exist, this endpoint uses a JSON object in the request body to create a new index.
If the Search index already exists, this endpoint updates the Search index definition.
Unlike <a href="#p-api-index-name">PUT /api/index/{indexName}</a>, this endpoint is scoped and does not require a fully qualified <code>${INDEX_NAME}</code> value.</p>
</div>
<div class="sect3">
<h4 id="endpoint-6"><a class="anchor" href="#endpoint-6"></a>Endpoint</h4>
<div class="paragraph">
<p>PUT /api/bucket/<code>${BUCKET_NAME}</code>/scope/<code>${SCOPE_NAME}</code>/index/<code>${INDEX_NAME}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-6"><a class="anchor" href="#permission-required-6"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!write</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-6"><a class="anchor" href="#role-required-6"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-5"><a class="anchor" href="#parameters-5"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${BUCKET_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the bucket where the Search Service should create or update the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${SCOPE_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the scope where the Search Service should create or update the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the Search index definition to create or update.
The name must satisfy the regular expression <code>^[A-Za-z][0-9A-Za-z_\-]*$</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="request-body"><a class="anchor" href="#request-body"></a>Request Body</h4>
<div class="paragraph">
<p>Add a JSON object with the full Search index definition you want to create or update.
For more information about how to create an index definition JSON, see <a href="../search/search-index-params.html" class="xref page">Search Index JSON Properties</a>.</p>
</div>
<div class="listingblock">
<div class="title">Sample failure response</div>
<div class="content">
<pre>{
    "error": "rest_create_index: index type is required, indexName: travel-test",
    "request": {},
    "status": "fail"
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a non-200 HTTP error code when a request fails.</p>
</div>
<div class="listingblock">
<div class="title">Sample success response</div>
<div class="content">
<pre>{
    "status": "ok",
    "name": "travel-sample.inventory.travel-test",[.var]`${BUCKET_NAME}`
    "uuid": "654cb62baebf2d26"
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a HTTP 200 status code with a response that includes <code>"status": "ok"</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="d-api-index-name"><a class="anchor" href="#d-api-index-name"></a>DELETE Index Definition</h3>
<div class="paragraph">
<p>Deletes the Search index definition specified in the endpoint URL.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This endpoint is for legacy Search indexes and may be deprecated in a future release.
Use <a href="#d-api-scoped-index-name">DELETE Index Definition (Scoped)</a>, instead.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="endpoint-7"><a class="anchor" href="#endpoint-7"></a>Endpoint</h4>
<div class="paragraph">
<p>DELETE /api/index/${INDEX_NAME}</p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-7"><a class="anchor" href="#permission-required-7"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!write</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-7"><a class="anchor" href="#role-required-7"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-6"><a class="anchor" href="#parameters-6"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the Search index definition you want to delete.
You must use the fully qualified name for the index, which includes the bucket and scope.</p>
</div>
<div class="paragraph">
<p>To view the full, scoped name for an index for use with this endpoint:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Search</strong> tab in the Couchbase Server Web Console.</p>
</li>
<li>
<p>Point to the <strong>Index Name</strong> for an index.</p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Sample failure response</div>
<div class="content">
<pre>{
    "error": "rest_auth: preparePerms, err: index not found",
    "request": "",
    "status": "fail"
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a non-200 HTTP error code when a request fails.</p>
</div>
<div class="listingblock">
<div class="title">Sample success response</div>
<div class="content">
<pre>{
    "status": "ok",
    "uuid": "123294e5a4efbe39"
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a HTTP 200 status code with a response that includes <code>"status": "ok"</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="d-api-scoped-index-name"><a class="anchor" href="#d-api-scoped-index-name"></a>DELETE Index Definition (Scoped)</h3>
<div class="paragraph">
<p>Delete the Search index definition from the bucket and scope specified in the endpoint URL.
Unlike <a href="#d-api-index-name">DELETE /api/index/{indexName}</a>, this endpoint is scoped and does not require a fully qualified <code>${INDEX_NAME}</code> value.</p>
</div>
<div class="sect3">
<h4 id="endpoint-8"><a class="anchor" href="#endpoint-8"></a>Endpoint</h4>
<div class="paragraph">
<p>DELETE /api/bucket/<code>${BUCKET_NAME}</code>/scope/<code>${SCOPE_NAME}</code>/index/<code>${INDEX_NAME}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-8"><a class="anchor" href="#permission-required-8"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!write</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-8"><a class="anchor" href="#role-required-8"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-7"><a class="anchor" href="#parameters-7"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${BUCKET_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the bucket used to create the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${SCOPE_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the scope used to create the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the Search index definition you want to delete.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Sample failure response</div>
<div class="content">
<pre>{
    "error": "rest_auth: preparePerms, err: index not found",
    "request": "",
    "status": "fail"
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a non-200 HTTP error code when a request fails.</p>
</div>
<div class="listingblock">
<div class="title">Sample success response</div>
<div class="content">
<pre>{
    "status": "ok",
    "uuid": "687be6a2ad647c34"
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a HTTP 200 status code with a response that includes <code>"status": "ok"</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="index-management"><a class="anchor" href="#index-management"></a>Index Management</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use the following endpoints to manage index controls, such as document ingestion, partition assignment, and queries.</p>
</div>
<div class="sect2">
<h3 id="p-api-idx-name-ingestcontrol"><a class="anchor" href="#p-api-idx-name-ingestcontrol"></a>POST Set Index IngestControl</h3>
<div class="paragraph">
<p>For the Search index specified in the endpoint URL, pause or resume index updates and maintenance.
While paused, the Search index does not load any new document mutations.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This endpoint is for legacy Search indexes and may be deprecated in a future release.
Use <a href="#p-api-scoped-ingestcontrol">POST Set Index IngestControl (Scoped)</a>, instead.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="endpoint-9"><a class="anchor" href="#endpoint-9"></a>Endpoint</h4>
<div class="paragraph">
<p>POST /api/index/<code>${INDEX_NAME}</code>/ingestControl/<code>${OP}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-9"><a class="anchor" href="#permission-required-9"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!manage</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-9"><a class="anchor" href="#role-required-9"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-8"><a class="anchor" href="#parameters-8"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the Search index definition where you want to pause or resume document loading.
You must use the fully qualified name for the index, which includes the bucket and scope.</p>
</div>
<div class="paragraph">
<p>To view the full, scoped name for an index for use with this endpoint:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Search</strong> tab in the Couchbase Server Web Console.</p>
</li>
<li>
<p>Point to the <strong>Index Name</strong> for an index.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${OP}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To pause ingestion and maintenance, set <code>${OP}</code> to <code>pause</code>.
To resume ingestion and maintenance on a paused index, set <code>${OP}</code> to <code>resume</code>.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Sample success response</div>
<div class="content">
<pre>{
    "status": "ok",
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a HTTP 200 status code with a response that includes <code>"status": "ok"</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="p-api-scoped-ingestcontrol"><a class="anchor" href="#p-api-scoped-ingestcontrol"></a>POST Set Index IngestControl (Scoped)</h3>
<div class="paragraph">
<p>For the Search index specified in the endpoint URL, pause or resume index updates and maintenance.
While paused, the Search index does not load any new document mutations.
Unlike <a href="#p-api-idx-name-ingestcontrol">POST /api/index/{indexName}/ingestControl/${OP}</a>, this endpoint is scoped and does not require a fully qualified <code>${INDEX_NAME}</code> value.</p>
</div>
<div class="sect3">
<h4 id="endpoint-10"><a class="anchor" href="#endpoint-10"></a>Endpoint</h4>
<div class="paragraph">
<p>POST /api/bucket/<code>${BUCKET_NAME}</code>/scope/<code>${SCOPE_NAME}</code>/index/<code>${INDEX_NAME}</code>/ingestControl/<code>${OP}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-10"><a class="anchor" href="#permission-required-10"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!manage</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-10"><a class="anchor" href="#role-required-10"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-9"><a class="anchor" href="#parameters-9"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${BUCKET_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the bucket used to create the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${SCOPE_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the scope used to create the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the Search index definition where you want to pause or resume document loading.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${OP}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To pause ingestion and maintenance, set <code>${OP}</code> to <code>pause</code>.
To resume ingestion and maintenance on a paused index, set <code>${OP}</code> to <code>resume</code>.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Sample success response</div>
<div class="content">
<pre>{
    "status": "ok",
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a HTTP 200 status code with a response that includes <code>"status": "ok"</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="p-api-idx-name-planfreezecontrol"><a class="anchor" href="#p-api-idx-name-planfreezecontrol"></a>POST Freeze Index Partition Assignment</h3>
<div class="paragraph">
<p>For the Search index specified in the endpoint URL, freeze or unfreeze the assignment of index partitions to nodes.
While frozen, the Search index stops assigning partitions during index rebalancing and index definition updates.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This endpoint is for legacy Search indexes and may be deprecated in a future release.
Use <a href="#p-api-scoped-planfreezecontrol">POST Freeze Index Partition Assignment (Scoped)</a>, instead.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="endpoint-11"><a class="anchor" href="#endpoint-11"></a>Endpoint</h4>
<div class="paragraph">
<p>POST /api/index/<code>${INDEX_NAME}</code>/planFreezeControl/<code>${OP}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-11"><a class="anchor" href="#permission-required-11"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!manage</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-11"><a class="anchor" href="#role-required-11"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-10"><a class="anchor" href="#parameters-10"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the Search index definition to freeze or unfreeze for partition assignment.
You must use the fully qualified name for the index, which includes the bucket and scope.</p>
</div>
<div class="paragraph">
<p>To view the full, scoped name for an index for use with this endpoint:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Search</strong> tab in the Couchbase Server Web Console.</p>
</li>
<li>
<p>Point to the <strong>Index Name</strong> for an index.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${OP}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To freeze partition assignment, set <code>${OP}</code> to <code>freeze</code>.
To unfreeze partition assignment on a frozen index, set <code>${OP}</code> to <code>unfreeze</code>.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Sample success response</div>
<div class="content">
<pre>{
    "status": "ok",
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a HTTP 200 status code with a response that includes <code>"status": "ok"</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="p-api-scoped-planfreezecontrol"><a class="anchor" href="#p-api-scoped-planfreezecontrol"></a>POST Freeze Index Partition Assignment (Scoped)</h3>
<div class="paragraph">
<p>For the Search index specified in the endpoint URL, freeze or unfreeze the assignment of index partitions to nodes.
While frozen, the Search index stops assigning partitions during index rebalancing and index definition updates.
Unlike <a href="#p-api-idx-name-planfreezecontrol">POST /api/index/{indexName}/planFreezeControl/${OP}</a>, this endpoint is scoped and does not require a fully qualified <code>${INDEX_NAME}</code> value.</p>
</div>
<div class="sect3">
<h4 id="endpoint-12"><a class="anchor" href="#endpoint-12"></a>Endpoint</h4>
<div class="paragraph">
<p>POST /api/bucket/<code>${BUCKET_NAME}</code>/scope/<code>${SCOPE_NAME}</code>/index/<code>${INDEX_NAME}</code>/planFreezeControl/<code>${OP}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-12"><a class="anchor" href="#permission-required-12"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!manage</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-12"><a class="anchor" href="#role-required-12"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-11"><a class="anchor" href="#parameters-11"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${BUCKET_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the bucket used to create the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${SCOPE_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the scope used to create the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the Search index definition to freeze or unfreeze for partition assignment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${OP}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To freeze partition assignment, set <code>${OP}</code> to <code>freeze</code>.
To unfreeze partition assignment on a frozen index, set <code>${OP}</code> to <code>unfreeze</code>.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Sample success response</div>
<div class="content">
<pre>{
    "status": "ok",
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a HTTP 200 status code with a response that includes <code>"status": "ok"</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="p-api-idx-name-querycontrol"><a class="anchor" href="#p-api-idx-name-querycontrol"></a>POST Stop Queries on an Index</h3>
<div class="paragraph">
<p>For the Search index specified in the endpoint URL, disallow or allow queries.
While queries are disallowed, users see an error that the Search index&#8217;s partitions could not be reached.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This endpoint is for legacy Search indexes and may be deprecated in a future release.
Use <a href="#p-api-scoped-querycontrol">POST Stop Queries on an Index (Scoped)</a>, instead.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="endpoint-13"><a class="anchor" href="#endpoint-13"></a>Endpoint</h4>
<div class="paragraph">
<p>POST /api/index/<code>${INDEX_NAME}</code>/queryControl/<code>${OP}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-13"><a class="anchor" href="#permission-required-13"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!manage</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-13"><a class="anchor" href="#role-required-13"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-12"><a class="anchor" href="#parameters-12"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the Search index definition where you want to allow or disallow Search queries.
You must use the fully qualified name for the index, which includes the bucket and scope.</p>
</div>
<div class="paragraph">
<p>To view the full, scoped name for an index for use with this endpoint:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Search</strong> tab in the Couchbase Server Web Console.</p>
</li>
<li>
<p>Point to the <strong>Index Name</strong> for an index.</p>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${OP}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To allow queries against a Search index, set <code>${OP}</code> to <code>allow</code>.
To block queries against a Search index, set <code>${OP}</code> to <code>disallow</code>.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Sample success response</div>
<div class="content">
<pre>{
    "status": "ok",
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a HTTP 200 status code with a response that includes <code>"status": "ok"</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="p-api-scoped-querycontrol"><a class="anchor" href="#p-api-scoped-querycontrol"></a>POST Stop Queries on an Index (Scoped)</h3>
<div class="paragraph">
<p>For the Search index specified in the endpoint URL, disallow or allow queries.
While queries are disallowed, users see an error that the Search index&#8217;s partitions could not be reached.
Unlike <a href="#p-api-idx-name-querycontrol">POST /api/index/{indexName}/queryControl/${OP}</a>, this endpoint is scoped and does not require a fully qualified <code>${INDEX_NAME}</code> value.</p>
</div>
<div class="sect3">
<h4 id="endpoint-14"><a class="anchor" href="#endpoint-14"></a>Endpoint</h4>
<div class="paragraph">
<p>POST /api/bucket/<code>${BUCKET_NAME}</code>/scope/<code>${SCOPE_NAME}</code>/index/<code>${INDEX_NAME}</code>/queryControl/<code>${OP}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-14"><a class="anchor" href="#permission-required-14"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!manage</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-14"><a class="anchor" href="#role-required-14"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-13"><a class="anchor" href="#parameters-13"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${BUCKET_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the bucket used to create the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${SCOPE_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the scope used to create the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the Search index definition where you want to allow or disallow Search queries.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${OP}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To allow queries against a Search index, set <code>${OP}</code> to <code>allow</code>.
To block queries against a Search index, set <code>${OP}</code> to <code>disallow</code>.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Sample success response</div>
<div class="content">
<pre>{
    "status": "ok",
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a HTTP 200 status code with a response that includes <code>"status": "ok"</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="index-monitoring-and-debugging"><a class="anchor" href="#index-monitoring-and-debugging"></a>Index Monitoring And Debugging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use the following endpoints to get statistics about Search indexes for monitoring and debugging.</p>
</div>
<div class="sect2">
<h3 id="g-api-stats"><a class="anchor" href="#g-api-stats"></a>GET Indexing and Data Metrics for All Indexes</h3>
<div class="paragraph">
<p>Use this endpoint to get indexing and data related metrics, timings, and counters from the node running the Search Service, for all Search indexes.
The endpoint returns the data as a JSON object.</p>
</div>
<div class="sect3">
<h4 id="endpoint-15"><a class="anchor" href="#endpoint-15"></a>Endpoint</h4>
<div class="paragraph">
<p>GET /api/stats</p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-15"><a class="anchor" href="#permission-required-15"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].stats!read</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-15"><a class="anchor" href="#role-required-15"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Admin</strong></p>
</div>
<div class="listingblock">
<div class="title">Sample response</div>
<div class="content">
<pre>{
    "feeds": {
        "myFirstIndex_6cc599ab7a85bf3b": {}
    },
    "manager": {
        "TotCreateIndex": 1,
        "TotCreateIndexOk": 1,
        "TotDeleteIndex": 0,
        "TotDeleteIndexOk": 0,
        "TotIndexControl": 0,
        "TotIndexControlOk": 0,
        "TotJanitorClosePIndex": 0,
        "TotJanitorKick": 2,
        "TotJanitorKickErr": 0,
        "TotJanitorKickOk": 2,
        "TotJanitorKickStart": 2,
        "TotJanitorNOOP": 0,
        "TotJanitorNOOPOk": 0,
        "TotJanitorRemovePIndex": 0,
        "TotJanitorSubscriptionEvent": 0,
        "TotJanitorUnknownErr": 0,
        "TotKick": 0,
        "TotPlannerKick": 2,
        "TotPlannerKickChanged": 1,
        "TotPlannerKickErr": 0,
        "TotPlannerKickOk": 2,
        "TotPlannerKickStart": 2,
        "TotPlannerNOOP": 0,
        "TotPlannerNOOPOk": 0,
        "TotPlannerSubscriptionEvent": 0,
        "TotPlannerUnknownErr": 0,
        "TotSaveNodeDef": 2,
        "TotSaveNodeDefGetErr": 0,
        "TotSaveNodeDefOk": 2,
        "TotSaveNodeDefSame": 0,
        "TotSaveNodeDefSetErr": 0
     },
     "pindexes": {
         "myFirstIndex_6cc599ab7a85bf3b_0": null
     }
}</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="g-api-nsstats-index-name"><a class="anchor" href="#g-api-nsstats-index-name"></a>GET Search Index Statistics</h3>
<div class="paragraph">
<p>Return indexing and data related metrics, timings, and counters for the Search index specified in the endpoint URL.
The endpoint returns the data as a JSON object.</p>
</div>
<div class="paragraph">
<p>Use this endpoint for monitoring the number of requests, documents, and more for a specific index.
For more detailed partition information and more overall statistics for an index, see <a href="#g-api-stats-index-name">GET Indexing and Data Metrics, Timings, and Other Statistics</a>.</p>
</div>
<div class="sect3">
<h4 id="endpoint-16"><a class="anchor" href="#endpoint-16"></a>Endpoint</h4>
<div class="paragraph">
<p>GET /api/nsstats/index/<code>${INDEX_NAME}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-16"><a class="anchor" href="#permission-required-16"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].stats!read</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-16"><a class="anchor" href="#role-required-16"></a>Role Required</h4>
<div class="paragraph">
<p>FTS-Searcher, FTS-Admin</p>
</div>
<div class="listingblock">
<div class="title">Sample response</div>
<div class="content">
<pre>{
    "avg_grpc_internal_queries_latency": 0,
    "avg_grpc_queries_latency": 0,
    "avg_internal_queries_latency": 0,
    "avg_queries_latency": 1.523718,
    "batch_merge_count": 0,
    "doc_count": 15000,
    "iterator_next_count": 0,
    "iterator_seek_count": 0,
    "last_access_time": "2023-09-20T03:05:55.440-07:00",
    "num_bytes_live_data": 0,
    "num_bytes_read_at_query_time": 4638582,
    "num_bytes_used_disk": 28062406,
    "num_bytes_used_disk_by_root": 23651161,
    "num_bytes_used_disk_by_root_reclaimable": 0,
    "num_bytes_written_at_index_time": 21208735,
    "num_files_on_disk": 6,
    "num_mutations_to_index": 0,
    "num_persister_nap_merger_break": 40,
    "num_persister_nap_pause_completed": 7,
    "num_pindexes_actual": 1,
    "num_pindexes_target": 1,
    "num_recs_to_persist": 0,
    "num_root_filesegments": 4,
    "num_root_memorysegments": 0,
    "reader_get_count": 0,
    "reader_multi_get_count": 0,
    "reader_prefix_iterator_count": 0,
    "reader_range_iterator_count": 0,
    "timer_batch_store_count": 0,
    "timer_data_delete_count": 0,
    "timer_data_update_count": 15000,
    "timer_opaque_get_count": 2048,
    "timer_opaque_set_count": 2048,
    "timer_rollback_count": 0,
    "timer_snapshot_start_count": 1024,
    "tot_seq_received": 19096,
    "total_bytes_indexed": 4866486,
    "total_bytes_query_results": 1798,
    "total_compaction_written_bytes": 87917849,
    "total_compactions": 0,
    "total_grpc_internal_queries": 0,
    "total_grpc_queries": 0,
    "total_grpc_queries_error": 0,
    "total_grpc_queries_slow": 0,
    "total_grpc_queries_timeout": 0,
    "total_grpc_request_time": 0,
    "total_internal_queries": 0,
    "total_queries": 4,
    "total_queries_error": 1,
    "total_queries_slow": 0,
    "total_queries_timeout": 0,
    "total_request_time": 6276461,
    "total_term_searchers": 7,
    "total_term_searchers_finished": 7,
    "writer_execute_batch_count": 0
}</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="g-api-stats-index-name"><a class="anchor" href="#g-api-stats-index-name"></a>GET Indexing and Data Metrics, Timings, and Other Statistics</h3>
<div class="paragraph">
<p>Return indexing and data related metrics, timings, and counters for the Search index specified in the endpoint URL.
The endpoint returns the data as a JSON object.</p>
</div>
<div class="paragraph">
<p>Use this endpoint for more detailed partition information and more available statistics than <a href="#g-api-nsstats-index-name">GET Search Index Statistics</a>.</p>
</div>
<div class="sect3">
<h4 id="endpoint-17"><a class="anchor" href="#endpoint-17"></a>Endpoint</h4>
<div class="paragraph">
<p>GET /api/stats/index/<code>${INDEX_NAME}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-17"><a class="anchor" href="#permission-required-17"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].stats!read</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-17"><a class="anchor" href="#role-required-17"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-14"><a class="anchor" href="#parameters-14"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the Search index where you want to retrieve statistics.
You must use the fully qualified name for the index, which includes the bucket and scope.</p>
</div>
<div class="paragraph">
<p>To view the full, scoped name for an index for use with this endpoint:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Search</strong> tab in the Couchbase Server Web Console.</p>
</li>
<li>
<p>Point to the <strong>Index Name</strong> for an index.</p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Sample response</div>
<div class="content">
<pre>{
    "feeds": {},
    "pindexes": {
        "travel-sample.inventory.travel-test_3858c70e4d4d8df9_4c1c5584": {
            "pindexStoreStats": {
                "TimerBatchStore": {
                    "count": 0,
                    "min": 0,
                    "max": 0,
                    "mean": 0.00,
                    "stddev": 0.00,
                    "percentiles": {
                        "99%": 0.00,
                        "99.9%": 0.00,
                        "median": 0.00,
                        "75%": 0.00,
                        "95%": 0.00
                    },
                    "rates": {
                        "mean": 0.00,
                        "1-min": 0.00,
                        "5-min": 0.00,
                        "15-min": 0.00
                    }
                },
                "Errors": []
            },
            "bleveIndexStats": {
                "index": {
                    "CurFilesIneligibleForRemoval": 0,
                    "CurOnDiskBytes": 34007668,
                    "CurOnDiskFiles": 4,
                    "CurRootEpoch": 0,
                    "LastMergedEpoch": 44,
                    "LastPersistedEpoch": 44,
                    "MaxBatchIntroTime": 0,
                    "MaxFileMergeZapIntroductionTime": 0,
                    "MaxFileMergeZapTime": 0,
                    "MaxMemMergeZapTime": 0,
                    "TotAnalysisTime": 0,
                    "TotBatchIntroTime": 0,
                    "TotBatches": 0,
                    "TotBatchesEmpty": 0,
                    "TotBytesReadAtQueryTime": 294892,
                    "TotBytesWrittenAtIndexTime": 0,
                    "TotDeletes": 0,
                    "TotEventTriggerCompleted": 2,
                    "TotEventTriggerStarted": 2,
                    "TotFileMergeForceOpsCompleted": 0,
                    "TotFileMergeForceOpsStarted": 0,
                    "TotFileMergeIntroductions": 0,
                    "TotFileMergeIntroductionsDone": 0,
                    "TotFileMergeIntroductionsObsoleted": 0,
                    "TotFileMergeIntroductionsSkipped": 0,
                    "TotFileMergeLoopBeg": 2,
                    "TotFileMergeLoopEnd": 1,
                    "TotFileMergeLoopErr": 0,
                    "TotFileMergePlan": 1,
                    "TotFileMergePlanErr": 0,
                    "TotFileMergePlanNone": 1,
                    "TotFileMergePlanOk": 0,
                    "TotFileMergePlanTasks": 0,
                    "TotFileMergePlanTasksDone": 0,
                    "TotFileMergePlanTasksErr": 0,
                    "TotFileMergePlanTasksSegments": 0,
                    "TotFileMergePlanTasksSegmentsEmpty": 0,
                    "TotFileMergeSegments": 0,
                    "TotFileMergeSegmentsEmpty": 0,
                    "TotFileMergeWrittenBytes": 0,
                    "TotFileMergeZapBeg": 0,
                    "TotFileMergeZapEnd": 0,
                    "TotFileMergeZapIntroductionTime": 0,
                    "TotFileMergeZapTime": 0,
                    "TotFileSegmentsAtRoot": 1,
                    "TotIndexTime": 0,
                    "TotIndexedPlainTextBytes": 0,
                    "TotIntroduceLoop": 3,
                    "TotIntroduceMergeBeg": 0,
                    "TotIntroduceMergeEnd": 0,
                    "TotIntroducePersistBeg": 0,
                    "TotIntroducePersistEnd": 0,
                    "TotIntroduceRevertBeg": 0,
                    "TotIntroduceRevertEnd": 0,
                    "TotIntroduceSegmentBeg": 0,
                    "TotIntroduceSegmentEnd": 0,
                    "TotIntroducedItems": 0,
                    "TotIntroducedSegmentsBatch": 0,
                    "TotIntroducedSegmentsMerge": 0,
                    "TotItemsToPersist": 0,
                    "TotMemMergeBeg": 0,
                    "TotMemMergeDone": 0,
                    "TotMemMergeErr": 0,
                    "TotMemMergeSegments": 0,
                    "TotMemMergeZapBeg": 0,
                    "TotMemMergeZapEnd": 0,
                    "TotMemMergeZapTime": 0,
                    "TotMemorySegmentsAtRoot": 0,
                    "TotOnErrors": 0,
                    "TotPersistLoopBeg": 2,
                    "TotPersistLoopEnd": 1,
                    "TotPersistLoopErr": 0,
                    "TotPersistLoopProgress": 0,
                    "TotPersistLoopWait": 2,
                    "TotPersistLoopWaitNotified": 0,
                    "TotPersistedItems": 0,
                    "TotPersistedSegments": 0,
                    "TotPersisterMergerNapBreak": 1,
                    "TotPersisterNapPauseCompleted": 1,
                    "TotPersisterSlowMergerPause": 0,
                    "TotPersisterSlowMergerResume": 0,
                    "TotSnapshotsRemovedFromMetaStore": 0,
                    "TotTermSearchersFinished": 13,
                    "TotTermSearchersStarted": 13,
                    "TotUpdates": 0,
                    "analysis_time": 0,
                    "batches": 0,
                    "deletes": 0,
                    "errors": 0,
                    "index_time": 0,
                    "num_bytes_read_at_query_time": 294892,
                    "num_bytes_used_disk": 34007668,
                    "num_bytes_used_disk_by_root": 15644303,
                    "num_bytes_used_disk_by_root_reclaimable": 0,
                    "num_bytes_written_at_index_time": 0,
                    "num_files_on_disk": 4,
                    "num_items_introduced": 0,
                    "num_items_persisted": 0,
                    "num_persister_nap_merger_break": 1,
                    "num_persister_nap_pause_completed": 1,
                    "num_plain_text_bytes_indexed": 0,
                    "num_recs_to_persist": 0,
                    "num_root_filesegments": 1,
                    "num_root_memorysegments": 0,
                    "term_searchers_finished": 13,
                    "term_searchers_started": 13,
                    "total_compaction_written_bytes": 0,
                    "updates": 0
                },
                "search_time": 40353204,
                "searches": 1
            },
            "basic": {
                "DocCount": 917
            },
            "partitions": {},
            "copyPartitionStats": {
                "TotCopyPartitionStart": 0,
                "TotCopyPartitionFinished": 0,
                "TotCopyPartitionTimeInMs": 0,
                "TotCopyPartitionFailed": 0,
                "TotCopyPartitionRetries": 0,
                "TotCopyPartitionErrors": 0,
                "TotCopyPartitionSkipped": 0,
                "TotCopyPartitionCancelled": 0,
                "TotCopyPartitionOnHttp2": 0
            }
        }
    }
}</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="g-api-nsstats-index-name"><a class="anchor" href="#g-api-nsstats-index-name"></a>GET Query, Mutation, Partition, and Other Index Statistics</h3>
<div class="paragraph">
<p>Return query, mutation, document, partition, and compaction statistics for the Search index specified in the endpoint URL.
The endpoint returns the data as a JSON object.</p>
</div>
<div class="sect3">
<h4 id="endpoint-18"><a class="anchor" href="#endpoint-18"></a>Endpoint</h4>
<div class="paragraph">
<p>GET /api/nsstats/index/<code>${INDEX_NAME}</code></p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-18"><a class="anchor" href="#permission-required-18"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].stats!read</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-18"><a class="anchor" href="#role-required-18"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-15"><a class="anchor" href="#parameters-15"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the Search index where you want to retrieve statistics.
You must use the fully qualified name for the index, which includes the bucket and scope.</p>
</div>
<div class="paragraph">
<p>To view the full, scoped name for an index for use with this endpoint:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Search</strong> tab in the Couchbase Server Web Console.</p>
</li>
<li>
<p>Point to the <strong>Index Name</strong> for an index.</p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Sample response</div>
<div class="content">
<pre>{
    "avg_grpc_internal_queries_latency": 0,
    "avg_grpc_queries_latency": 0,
    "avg_internal_queries_latency": 0,
    "avg_queries_latency": 12.971812,
    "batch_merge_count": 0,
    "doc_count": 917,
    "iterator_next_count": 0,
    "iterator_seek_count": 0,
    "last_access_time": "2023-12-05T17:09:09.326+00:00",
    "num_bytes_live_data": 0,
    "num_bytes_read_at_query_time": 269399,
    "num_bytes_used_disk": 16692286,
    "num_bytes_used_disk_by_root": 15643710,
    "num_bytes_used_disk_by_root_reclaimable": 0,
    "num_bytes_written_at_index_time": 12524609,
    "num_files_on_disk": 2,
    "num_mutations_to_index": 0,
    "num_persister_nap_merger_break": 2,
    "num_persister_nap_pause_completed": 2,
    "num_pindexes_actual": 1,
    "num_pindexes_target": 1,
    "num_recs_to_persist": 0,
    "num_root_filesegments": 1,
    "num_root_memorysegments": 0,
    "reader_get_count": 0,
    "reader_multi_get_count": 0,
    "reader_prefix_iterator_count": 0,
    "reader_range_iterator_count": 0,
    "timer_batch_store_count": 0,
    "timer_data_delete_count": 0,
    "timer_data_update_count": 917,
    "timer_opaque_get_count": 2048,
    "timer_opaque_set_count": 2048,
    "timer_rollback_count": 0,
    "timer_snapshot_start_count": 96,
    "tot_seq_received": 87974,
    "total_bytes_indexed": 8523422,
    "total_bytes_query_results": 35846,
    "total_compaction_written_bytes": 15643710,
    "total_compactions": 0,
    "total_grpc_internal_queries": 0,
    "total_grpc_queries": 0,
    "total_grpc_queries_error": 0,
    "total_grpc_queries_slow": 0,
    "total_grpc_queries_timeout": 0,
    "total_grpc_request_time": 0,
    "total_internal_queries": 0,
    "total_queries": 2,
    "total_queries_error": 0,
    "total_queries_slow": 0,
    "total_queries_timeout": 0,
    "total_request_time": 25947312,
    "total_term_searchers": 15,
    "total_term_searchers_finished": 15,
    "writer_execute_batch_count": 0
}</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="g-api-stats-index-name-analyzeDoc"><a class="anchor" href="#g-api-stats-index-name-analyzeDoc"></a>POST Analyze Document</h3>
<div class="paragraph">
<p>Use the Search index specified in the endpoint URL to analyze a document from the request body.</p>
</div>
<div class="sect3">
<h4 id="endpoint-19"><a class="anchor" href="#endpoint-19"></a>Endpoint</h4>
<div class="paragraph">
<p>POST /api/index/<code>${INDEX_NAME}</code>/analyzeDoc</p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-19"><a class="anchor" href="#permission-required-19"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!read</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-19"><a class="anchor" href="#role-required-19"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Reader</strong> or <strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-16"><a class="anchor" href="#parameters-16"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the Search index to use to analyze the document in the request body.
You must use the fully qualified name for the index, which includes the bucket and scope.</p>
</div>
<div class="paragraph">
<p>To view the full, scoped name for an index for use with this endpoint:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Search</strong> tab in the Couchbase Server Web Console.</p>
</li>
<li>
<p>Point to the <strong>Index Name</strong> for an index.</p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="request-body-2"><a class="anchor" href="#request-body-2"></a>Request Body</h4>
<div class="paragraph">
<p>Add any valid JSON document to the request body.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
   "name": "hello world",
   "title": "couchbase blr"
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="response-object"><a class="anchor" href="#response-object"></a>Response Object</h4>
<div class="paragraph">
<p>In the following example, a Search index with the following settings analyzed the document from the sample Request Body:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>keyword</code> analyzer for the <code>title</code> field.</p>
</li>
<li>
<p>An <code>ngram</code> token filter with a <code>min</code> of 2 and a <code>max</code> of 5 for the <code>name</code> field.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>{
  "status": "ok",
  "analyzed": [
    {
      "couchbase blr": {
        "Term": "Y291Y2hiYXNlIGJscg==",
        "Locations": [
          {
            "Field": "title",
            "ArrayPositions": [],
            "Start": 0,
            "End": 13,
            "Position": 1
          }
        ]
      }
    },
    {
      "he": {
        "Term": "aGU=",
        "Locations": [
          {
            "Field": "name",
            "ArrayPositions": [],
            "Start": 0,
            "End": 5,
            "Position": 1
          }
        ]
      },
      "hel": {
        "Term": "aGVs",
        "Locations": [
          {
            "Field": "name",
            "ArrayPositions": [],
            "Start": 0,
            "End": 5,
            "Position": 1
          }
        ]
      },
      "hell": {
        "Term": "aGVsbA==",
        "Locations": [
          {
            "Field": "name",
            "ArrayPositions": [],
            "Start": 0,
            "End": 5,
            "Position": 1
          }
        ]
      },
      "hello": {
        "Term": "aGVsbG8=",
        "Locations": [
          {
            "Field": "name",
            "ArrayPositions": [],
            "Start": 0,
            "End": 5,
            "Position": 1
          }
        ]
      },
      "wo": {
        "Term": "d28=",
        "Locations": [
          {
            "Field": "name",
            "ArrayPositions": [],
            "Start": 6,
            "End": 11,
            "Position": 2
          }
        ]
      },
      "wor": {
        "Term": "d29y",
        "Locations": [
          {
            "Field": "name",
            "ArrayPositions": [],
            "Start": 6,
            "End": 11,
            "Position": 2
          }
        ]
      },
      "worl": {
        "Term": "d29ybA==",
        "Locations": [
          {
            "Field": "name",
            "ArrayPositions": [],
            "Start": 6,
            "End": 11,
            "Position": 2
          }
        ]
      },
      "world": {
        "Term": "d29ybGQ=",
        "Locations": [
          {
            "Field": "name",
            "ArrayPositions": [],
            "Start": 6,
            "End": 11,
            "Position": 2
          }
        ]
      }
    },
    null
  ]
}</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="g-api-scoped-status"><a class="anchor" href="#g-api-scoped-status"></a>GET Index Status (Scoped)</h3>
<div class="paragraph">
<p>Returns the status of the Search index specified in the endpoint URL, including whether all index partitions are created and ready to use.</p>
</div>
<div class="sect3">
<h4 id="endpoint-20"><a class="anchor" href="#endpoint-20"></a>Endpoint</h4>
<div class="paragraph">
<p>GET /api/bucket/<code>${BUCKET_NAME}</code>/scope/<code>${SCOPE_NAME}</code>/index/<code>${INDEX_NAME}</code>/status</p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-20"><a class="anchor" href="#permission-required-20"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!read</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-20"><a class="anchor" href="#role-required-20"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Reader</strong> or <strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-17"><a class="anchor" href="#parameters-17"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${BUCKET_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the bucket used to create the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${SCOPE_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the scope used to create the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the Search index definition to status check.</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Sample success response</div>
<div class="content">
<pre>{
    "status": "ok",
    "indexStatus": "Ready"
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a HTTP 200 status code with a response that includes <code>"status": "ok"</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="index-querying"><a class="anchor" href="#index-querying"></a>Index Querying</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use the following endpoints to query the contents of a Search index.</p>
</div>
<div class="sect2">
<h3 id="g-api-index-name-count"><a class="anchor" href="#g-api-index-name-count"></a>GET Indexed Documents Count</h3>
<div class="paragraph">
<p>Returns the number of indexed documents inside the Search index specified in the endpoint URL.</p>
</div>
<div class="sect3">
<h4 id="endpoint-21"><a class="anchor" href="#endpoint-21"></a>Endpoint</h4>
<div class="paragraph">
<p>GET /api/index/<code>${INDEX_NAME}</code>/count</p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-21"><a class="anchor" href="#permission-required-21"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!read</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-21"><a class="anchor" href="#role-required-21"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Reader</strong> or <strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-18"><a class="anchor" href="#parameters-18"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the index where you want to count the number of available documents.
You must use the fully qualified name for the index, which includes the bucket and scope.</p>
</div>
<div class="paragraph">
<p>To view the full, scoped name for an index for use with this endpoint:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Search</strong> tab in the Couchbase Server Web Console.</p>
</li>
<li>
<p>Point to the <strong>Index Name</strong> for an index.</p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Sample success response</div>
<div class="content">
<pre>{
    "status": "ok",
    "count": 285
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a HTTP 200 status code with a response that includes <code>"status": "ok"</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="p-api-pindex-lookup"><a class="anchor" href="#p-api-pindex-lookup"></a>POST Return the Index Partition and ID for a Document (Scoped)</h3>
<div class="paragraph">
<p>Send a document ID in the request body and return the Search index partition ID for where the document is stored.
The endpoint returns a JSON object as a response.</p>
</div>
<div class="sect3">
<h4 id="endpoint-22"><a class="anchor" href="#endpoint-22"></a>Endpoint</h4>
<div class="paragraph">
<p>POST /api/bucket/<code>${BUCKET_NAME}</code>/scope/<code>${SCOPE_NAME}</code>/index/<code>${INDEX_NAME}</code>/pindexLookup</p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-22"><a class="anchor" href="#permission-required-22"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!read</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-22"><a class="anchor" href="#role-required-22"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Reader</strong> or <strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-19"><a class="anchor" href="#parameters-19"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${BUCKET_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the bucket used to create the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${SCOPE_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the scope used to create the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the Search index definition that contains the document.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="request-body-3"><a class="anchor" href="#request-body-3"></a>Request Body</h4>
<div class="paragraph">
<p>Add a valid JSON object that contains the <code>docID</code> property, with a value that matches the document ID for a document in the Search index.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
    "docID": "hotel_5848"
}</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Sample success response</div>
<div class="content">
<pre>{
    "status": "ok",
    "pindexes": {
        "travel-sample.inventory.travel-test": {
            "id": "travel-sample.inventory.travel-test_123294e5a4efbe39_4c1c5584"
        }
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a HTTP 200 status code with a response that includes <code>"status": "ok"</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="p-api-index-name-query"><a class="anchor" href="#p-api-index-name-query"></a>POST Query a Search Index</h3>
<div class="paragraph">
<p>Run a query formatted as a JSON object against the Search index definition specified in the endpoint URL.
The endpoint returns a JSON object as a response.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This endpoint is for legacy Search indexes and may be deprecated in a future release.
Use <a href="#p-api-scoped-query">POST Query a Search Index (Scoped)</a>, instead.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="endpoint-23"><a class="anchor" href="#endpoint-23"></a>Endpoint</h4>
<div class="paragraph">
<p>POST /api/index/<code>${INDEX_NAME}</code>/query</p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-23"><a class="anchor" href="#permission-required-23"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!read</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-23"><a class="anchor" href="#role-required-23"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Reader</strong> or <strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-20"><a class="anchor" href="#parameters-20"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the Search index definition to query with the request body.
You must use the fully qualified name for the index, which includes the bucket and scope.</p>
</div>
<div class="paragraph">
<p>To view the full, scoped name for an index for use with this endpoint:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Search</strong> tab in the Couchbase Server Web Console.</p>
</li>
<li>
<p>Point to the <strong>Index Name</strong> for an index.</p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="request-body-4"><a class="anchor" href="#request-body-4"></a>Request Body</h4>
<div class="paragraph">
<p>For more detailed information about how to format the request body for the POST /api/index/<code>${INDEX_NAME}</code>/query endpoint, see <a href="../search/search-request-params.html" class="xref page">Search Request JSON Properties</a>.</p>
</div>
<div class="paragraph">
<p>For example, the following request body searches for the text <code>a sample query</code> in the documents included in the Search index:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
    "query": {
        "query": "a sample query",
        "boost": 1
    },
    "size": 10,
    "from": 0,
    "highlight": null,
    "fields": null,
    "facets": null,
    "explain": false
    }</pre>
</div>
</div>
<div class="paragraph">
<p>The following request body uses from/size for results paging, uses ctl for a timeout and the "at_plus" consistency level.
On consistency, the index must have incorporated at least mutation sequence-number 123 for partition (vbucket) 0 and mutation sequence-number 234 for partition (vbucket) 1 (where vbucket 1 should have a vbucketUUID of a0b1c2):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
    "ctl": {
        "timeout": 10000,
        "consistency": {
            "level": "at_plus",
                "vectors": {
                    "customerIndex": {
                        "0": 123,
                        "1/a0b1c2": 234
                    }
                }
            }
        },
        "query": {
            "query": "alice smith",
            "boost": 1
        },
        "size": 10,
        "from": 20,
        "highlight": {
            "style": null,
            "fields": null
        },
        "fields": [
            "*"
        ],
        "facets": null,
        "explain": true
}</pre>
</div>
</div>
<div class="paragraph">
<p>The following hybrid search request body searches for a specified normalized color vector in <code>colorvect_dot</code>, but uses regular query parameters to limit the <code>brightness</code> value of the returned color to the range of <code>70-80</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{
      "fields": ["*"],
      "query": {
        "min": 70,
        "max": 80,
        "inclusive_min": false,
        "inclusive_max": true,
        "field": "brightness"
      },
      "knn": [
        {
          "k": 10,
          "field": "colorvect_dot",
          "vector": [ 0.707106781186548, 0, 0.707106781186548 ]
        }
      ],
      "size": 10
}</pre>
</div>
</div>
<div class="paragraph">
<p>For more information about vector searches, see <a href="../vector-search/vector-search.html" class="xref page">Use Vector Search for AI Applications</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="response-object-2"><a class="anchor" href="#response-object-2"></a>Response Object</h4>
<div class="paragraph">
<p>The response object has a status section that must be checked for every request.
Under nearly all circumstances, the query response will be HTTP 200 even though individual index shards (pindexes) may encounter a timeout or return an error.</p>
</div>
</div>
<div class="sect3">
<h4 id="consistency-and-timeouts"><a class="anchor" href="#consistency-and-timeouts"></a>Consistency and Timeouts</h4>
<div class="paragraph">
<p>A query can specify a timeout value, a consistency requirement, or both.
This section explains how this affects the query behavior and how to handle the resulting query return values.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>logical first phase consistency wait - if timeout in this period, get 416 error with message saying request could not be satisfied).</p>
</li>
<li>
<p>If consistency wait times out with 416, return value to client will indicate the sequence number range processed so the client will have an idea how far the processing got and has the option of retrying more intelligently.</p>
</li>
<li>
<p>In phase 2, you have the normal pindex timeout.
This will start whenever the first phase completes.
At this point, request will return 200 HTTP response code unless there is an internal server error.</p>
</li>
<li>
<p>Client must check response status, which will return any errors or timeouts for each pindex.
If The response includes the number of errors, and the client can determine whether they need the complete results or can continue as long as enough pindexes return to give a reasonable user experience.
Note that the query return status will be 200 even if all pindexes return errors so it&#8217;s critical to check the response status and code accordingly.</p>
</li>
<li>
<p>If client sets timeout very low, e.g.
1ms, you may receive a 200 error with all timeouts instead of a consistency wait timeout.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="p-api-scoped-query"><a class="anchor" href="#p-api-scoped-query"></a>POST Query a Search Index (Scoped)</h3>
<div class="paragraph">
<p>Run a query formatted as a JSON object against the Search index definition specified in the endpoint URL.
The endpoint returns a JSON object as a response.
Unlike <a href="#p-api-index-name-query">POST /api/index/{indexName}/query</a>, this endpoint is scoped and does not require a fully qualified <code>${INDEX_NAME}</code> value.</p>
</div>
<div class="sect3">
<h4 id="endpoint-24"><a class="anchor" href="#endpoint-24"></a>Endpoint</h4>
<div class="paragraph">
<p>POST /api/bucket/<code>${BUCKET_NAME}</code>/scope/<code>${SCOPE_NAME}</code>/index/<code>${INDEX_NAME}</code>/query</p>
</div>
</div>
<div class="sect3">
<h4 id="permission-required-24"><a class="anchor" href="#permission-required-24"></a>Permission Required</h4>
<div class="paragraph">
<p>cluster.bucket[<code class="var">$BUCKET_NAME</code>].fts!read</p>
</div>
</div>
<div class="sect3">
<h4 id="role-required-24"><a class="anchor" href="#role-required-24"></a>Role Required</h4>
<div class="paragraph">
<p><strong>Search Reader</strong> or <strong>Search Admin</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="parameters-21"><a class="anchor" href="#parameters-21"></a>Parameters</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required?</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${BUCKET_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the bucket used to create the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${SCOPE_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the scope used to create the Search index definition.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code class="param">${INDEX_NAME}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String, URL path parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the Search index definition to query with the request body.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="request-body-5"><a class="anchor" href="#request-body-5"></a>Request Body</h4>
<div class="paragraph">
<p>Add a JSON object to define the settings for your Search query.
For more information about how to create a Search query JSON object, see <a href="../search/search-request-params.html" class="xref page">Search Request JSON Properties</a>.</p>
</div>
<div class="listingblock">
<div class="title">Sample failure response</div>
<div class="content">
<pre>{
    "error": "rest_index: Query, indexName: travel-sample.inventory.travel-test, err: bleve: QueryBleve parsing searchRequest, err: unknown query type",
    "request": {
        "collections": [
            "hotel"
        ],
        "ctl": {
            "consistency": {
                "level": "at_plus",
                "results": "complete",
                "vectors": {
                    "searchIndexName": {
                        "607/205096593892159": 2,
                        "640/298739127912798": 4
                    }
                }
            },
            "timeout": 10000
        },
        "explain": true,
        "from": 0,
        "highlight": {
            "fields": [
                "reviews.content"
            ],
            "style": "html"
        },
        "includeLocations": false,
        "limit": 10,
        "offset": 0,
        "query": {},
        "score": "none",
        "size": 10,
        "sort": [
            "reviews.Ratings.Cleanliness",
            {
                "by": "field",
                "desc": false,
                "field": "reviews.Ratings.Cleanliness",
                "missing": "last",
                "mode": "default",
                "type": "number"
            },
            "-_score",
            "-_id"
        ]
    },
    "status": "fail"
}</pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a non-200 HTTP error code when a request fails.</p>
</div>
<div class="listingblock">
<div class="title">Sample success response - regular query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="file:///Users/rayoffiah/projects/couchbase/docs-server/modules/rest-api/examples/fts-sample-success-response.jsonc">{
    "status": {
        "total": 1,
        "failed": 0,
        "successful": 1
    },
    "request": {
        "query": {
            "conjuncts": [
                {
                    "match": "location",
                    "field": "reviews.content",
                    "prefix_length": 0,
                    "fuzziness": 0,
                    "operator": "or"
                },
                {
                    "match_phrase": "nice view",
                    "field": "reviews.content"
                }
            ]
        },
        "size": 10,
        "from": 0,
        "highlight": {
            "style": "html",
            "fields": [
                "reviews.content"
            ]
        },
        "fields": null,
        "facets": null,
        "explain": true,
        "sort": [
            "reviews.Ratings.Cleanliness",
            {
                "by": "field",
                "field": "reviews.Ratings.Cleanliness",
                "type": "number"
            },
            "-_score",
            "-_id"
        ],
        "includeLocations": false,
        "score": "none",
        "search_after": null,
        "search_before": null
    },
    "hits": [
        {
            "index": "travel-sample.inventory.travel-test_53373d2948c55e82_4c1c5584",
            "id": "hotel_7388",
            "score": 0,
            "explanation": {
                "value": 0,
                "message": "sum of:",
                "children": [
                    {
                        "value": 0,
                        "message": "product of:",
                        "children": [
                            {
                                "value": 0,
                                "message": "sum of:",
                                "children": [
                                    {
                                        "value": 0,
                                        "message": "weight(reviews.content:location^1.000000 in \u0000\u0000\u0000\u0000\u0000\u0000\u0003\n), product of:",
                                        "children": [
                                            {
                                                "value": 0.5320504947307548,
                                                "message": "queryWeight(reviews.content:location^1.000000), product of:",
                                                "children": [
                                                    {
                                                        "value": 1,
                                                        "message": "boost"
                                                    },
                                                    {
                                                        "value": 1.4291903588638628,
                                                        "message": "idf(docFreq=596, maxDocs=917)"
                                                    },
                                                    {
                                                        "value": 0.3722740581273647,
                                                        "message": "queryNorm"
                                                    }
                                                ]
                                            },
                                            {
                                                "value": 0,
                                                "message": "fieldWeight(reviews.content:location in \u0000\u0000\u0000\u0000\u0000\u0000\u0003\n), product of:",
                                                "children": [
                                                    {
                                                        "value": 0,
                                                        "message": "tf(termFreq(reviews.content:location)=0"
                                                    },
                                                    {
                                                        "value": 0,
                                                        "message": "fieldNorm(field=reviews.content, doc=\u0000\u0000\u0000\u0000\u0000\u0000\u0003\n)"
                                                    },
                                                    {
                                                        "value": 1.4291903588638628,
                                                        "message": "idf(docFreq=596, maxDocs=917)"
                                                    }
                                                ]
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                "value": 1,
                                "message": "coord(1/1)"
                            }
                        ]
                    },
                    {
                        "value": 0,
                        "message": "sum of:",
                        "children": [
                            {
                                "value": 0,
                                "message": "weight(reviews.content:view^1.000000 in \u0000\u0000\u0000\u0000\u0000\u0000\u0003\n), product of:",
                                "children": [
                                    {
                                        "value": 0.6867550119496617,
                                        "message": "queryWeight(reviews.content:view^1.000000), product of:",
                                        "children": [
                                            {
                                                "value": 1,
                                                "message": "boost"
                                            },
                                            {
                                                "value": 1.8447565629585312,
                                                "message": "idf(docFreq=393, maxDocs=917)"
                                            },
                                            {
                                                "value": 0.3722740581273647,
                                                "message": "queryNorm"
                                            }
                                        ]
                                    },
                                    {
                                        "value": 0,
                                        "message": "fieldWeight(reviews.content:view in \u0000\u0000\u0000\u0000\u0000\u0000\u0003\n), product of:",
                                        "children": [
                                            {
                                                "value": 0,
                                                "message": "tf(termFreq(reviews.content:view)=0"
                                            },
                                            {
                                                "value": 0,
                                                "message": "fieldNorm(field=reviews.content, doc=\u0000\u0000\u0000\u0000\u0000\u0000\u0003\n)"
                                            },
                                            {
                                                "value": 1.8447565629585312,
                                                "message": "idf(docFreq=393, maxDocs=917)"
                                            }
                                        ]
                                    }
                                ]
                            },
                            {
                                "value": 0,
                                "message": "weight(reviews.content:nice^1.000000 in \u0000\u0000\u0000\u0000\u0000\u0000\u0003\n), product of:",
                                "children": [
                                    {
                                        "value": 0.4952674273751292,
                                        "message": "queryWeight(reviews.content:nice^1.000000), product of:",
                                        "children": [
                                            {
                                                "value": 1,
                                                "message": "boost"
                                            },
                                            {
                                                "value": 1.3303839377539577,
                                                "message": "idf(docFreq=658, maxDocs=917)"
                                            },
                                            {
                                                "value": 0.3722740581273647,
                                                "message": "queryNorm"
                                            }
                                        ]
                                    },
                                    {
                                        "value": 0,
                                        "message": "fieldWeight(reviews.content:nice in \u0000\u0000\u0000\u0000\u0000\u0000\u0003\n), product of:",
                                        "children": [
                                            {
                                                "value": 0,
                                                "message": "tf(termFreq(reviews.content:nice)=0"
                                            },
                                            {
                                                "value": 0,
                                                "message": "fieldNorm(field=reviews.content, doc=\u0000\u0000\u0000\u0000\u0000\u0000\u0003\n)"
                                            },
                                            {
                                                "value": 1.3303839377539577,
                                                "message": "idf(docFreq=658, maxDocs=917)"
                                            }
                                        ]
                                    }
                                ]
                            }
                        ]
                    }
                ]
            },
            "locations": {
                "reviews.content": {
                    "location": [
                        {
                            "pos": 312,
                            "start": 1641,
                            "end": 1649,
                            "array_positions": [
                                4
                            ]
                        }
                    ],
                    "nice": [
                        {
                            "pos": 165,
                            "start": 840,
                            "end": 844,
                            "array_positions": [
                                2
                            ]
                        }
                    ],
                    "view": [
                        {
                            "pos": 166,
                            "start": 845,
                            "end": 849,
                            "array_positions": [
                                2
                            ]
                        }
                    ]
                }
            },
            "fragments": {
                "reviews.content": [
                    "…at\u0026#39;s her name checked us in, very friendly and knowlegeable of the area. I would stay here again get area and right at the street car stop. nice resturants in walking distance. \u003cmark\u003enice\u003c/mark\u003e \u003cmark\u003eview\u003c/mark\u003e of the city o…"
                ]
            },
            "sort": [
                "􏿿􏿿􏿿",
                "􏿿􏿿􏿿",
                "_score",
                "hotel_7388"
            ]
        },
        
        {...}
    ],
    "total_hits": 27,
    "cost": 108906,
    "max_score": 0,
    "took": 14964461,
    "facets": null
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Search Service returns a HTTP 200 status code with a response that includes <code>"status": "ok"</code>.</p>
</div>
<div class="listingblock">
<div class="title">Sample success response - hybrid vector search</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json" data-source-url="file:///Users/rayoffiah/projects/couchbase/docs-server/modules/rest-api/examples/fts-sample-success-response-vector-search.jsonc">{
    "status": {
        "total": 1,
        "failed": 0,
        "successful": 1
    },
    "request": {
        "fields": ["*"], 
        "query": { 
            "match_none": ""
        }, 
        "knn": [
            {
                "k": 2, 
                "field": "colorvect_dot", 
                "vector": [ 0.707106781186548, 0, 0.707106781186548 ]
            }
        ]
    },
    "hits": [
        {
            "index": "vector-sample.color.color-test_4d6a4a2f00f48fa2_4c1c5584",
            "id": "#FF00FF",
            "score": 0.9999999403953552,
            "sort": [
                "_score"
            ],
            "fields": {
                "color": "magenta / fuchsia"
            }
        },
        {
            "index": "vector-sample.color.color-test_4d6a4a2f00f48fa2_4c1c5584",
            "id": "#B000B0",
            "score": 0.9999999403953552,
            "sort": [
                "_score"
            ],
            "fields": {
                "color": "dark lavender"
            }
        }
    ],
    "total_hits": 2,
    "cost": 0,
    "max_score": 0.9999999403953552,
    "took": 4608572,
    "facets": null
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>© 2024 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"Server","components":["server"],"url":"/home/server.html","latestVersions":{"server":"7.6"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/vendor/chatbox-ui.js"></script>
<script id="site-script" src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
