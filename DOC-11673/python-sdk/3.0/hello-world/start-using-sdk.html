<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv=content-security-policy content="default-src 'none'; script-src 'self' 'unsafe-eval' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' https://fonts.gstatic.com; frame-src 'self' https:; img-src 'self' data: https:; connect-src 'self' https:; worker-src blob:;">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://metrics.couchbase.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MVPNN2');</script>
<!-- End Google Tag Manager -->
<title>Install and Start Using the Python SDK with Couchbase Server | Couchbase Docs</title>
<link rel="canonical" href="https://docs.couchbase.com/python-sdk/current/hello-world/start-using-sdk.html">
<link rel="stylesheet" href="../../../_/css/site.css">
<script src="../../../_/js/vendor/jquery.js"></script>
<link rel="schema.dcterms" href="https://purl.org/dc/terms/">


<meta name="dcterms.subject" content="python-sdk">
<meta name="dcterms.identifier" content="3.0">
<meta name="page-url" content="/python-sdk/3.0/hello-world/start-using-sdk.html">
<meta name="page-nav-header-levels" content="0">
<meta name="generator" content="Antora 3.1.7">
<link rel="icon" href="../../../_/img/favicon.svg" type="image/svg+xml">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon" sizes="any">
</head>
<body class="article">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MVPNN2" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<header class="header fixed-top">
  <div class="header-top-row">
      <div class="container">
          <nav class="navbar navbar-expand-md flex-nowrap justify-content-between navbar-new-top">
              <ul class="navbar-brand-list">
                <li class="brand-logo">
                  <a class="navbar-brand" href="https://www.couchbase.com">
                    <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase" />
                  </a>
                </li>
                <li>
                  <a class="navbar-brand cb-documentation" href="https://docs.couchbase.com/home/index.html">
                    <img src="../../../_/img/cb-documentation.svg" alt="Couchbase Documentation" class="cb-docs" />
                    <img src="../../../_/img/cb-docs-hover.svg" alt="Couchbase Documentation" class="hide cb-hover-docs" />
                  </a>
                </li>
              </ul>
              <button class="navbar-burger" data-target="topbar-menu">
                <span></span>
                <span></span>
                <span></span>
              </button>

          </nav>
      </div>
  </div>
  <div class="header-bottom-row" id="topbar-menu">
    <div class="container">
        <nav  class="navbar navbar-new-bottom">

              <div class="navbar-collapse collapse" id="navbar2">
                <ul class="navbar-nav w-100 justify-content-start">
                  <li class="nav-item">
                    <a href="https://docs.couchbase.com/home/index.html" class="nav-link">
                      <i class="fas fa-home"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/server.html">
                      Server
                    </a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="../../../home/mobile.html">
                      Mobile
                    </a>
                  </li>
                </ul>
              </div>
              <div class="primary-action">
                <a class="btn btn-primary btn-grey-reverse" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Download'});" href="https://www.couchbase.com/downloads">
                  Downloads
                  <i class="far fa-arrow-to-bottom fa-fw"></i>
                </a>
                <a href="https://cloud.couchbase.com/sign-up" class="btn btn-primary" onclick="(window.dataLayer=window.dataLayer||[]).push({'event':'customEvent', 'category':'CTA', 'action':'Button Click',  'label':'Free Trial'});" >
                  Start Free Trial
                  <i class="far fa-cloud fa-fw"></i>
                </a>

              </div>

        </nav>
    </div>
   </div>
</header>
<div class="body container">
<aside class="nav left-sidebar">
  <div class="nav-container">
    <a href="#" class="menu-expand-toggle"><span>Navigation</span><i class="fas fa-times-circle"></i><i class="fas fa-chevron-circle-left"></i></a>
    <template id="page-versions" style="display: none">
      <select class="version_list" data-component="python-sdk">
        <option value="4.1" data-url="../../current/hello-world/start-using-sdk.html">4.1</option>
        <option value="4.0" data-url="../../4.0/hello-world/start-using-sdk.html">4.0</option>
        <option value="3.2" data-url="../../3.2/hello-world/start-using-sdk.html">3.2</option>
        <option value="3.1" data-url="../../3.1/hello-world/start-using-sdk.html">3.1</option>
        <option value="3.0" data-url="start-using-sdk.html" selected>3.0</option>
      </select>
    </template>
  </div>
</aside>
<aside class="toc sidebar"
      data-title="Contents"
      data-levels="1">
  <div class="sidebar-box">
    <div class="tools" role="navigation">
<ul>
<li class="tool edit"><a href="https://github.com/couchbase/docs-sdk-python/edit/release/3.0/modules/hello-world/pages/start-using-sdk.adoc" title="Edit Page" target="_blank" rel="noopener" class="remove-ext-icon">Edit on GitHub</a></li>
</ul>
</div>
    <div class="toc-menu"></div>
    <div class="is-this-helpful-box">
      <h4> Is this page helpful?</h4>
      <div class="btn-row">
        <a href="#" class="like-btn helpful-btn" id="yesBtn" data-page-rating="like" >
                <i class="far fa-thumbs-up"></i>
            Yes

            </a>
        <a href="#" class="dislike-btn helpful-btn" id="noBtn"  data-page-rating="dislike"> <i class="far fa-thumbs-down"></i> No</a>
      </div>
      <div class="any-feedback">
        <a href="#" class="btn any-feedback-btn" id="myCustomTrigger">Leave Additional Feedback? </a>
      </div>
      <div class="dialog-box" id="dialogBox">
        <form>
            <div class="form-group " id="additionalFeedbackBox">
              <textarea class="input-control feed-back-msg" rows="8" placeholder="Any Additonal Feedback?"></textarea>

              <div class="action-btn-row ">
                <a href="#" class="skip-btn" id="skipBtnMsg">Skip</a>
                  <button class="submit-btn btn blue-btn disabled" > Submit  </button>
                  <a href="#" class="info-btn"><i class="fas fa-info-circle"></i></a>
              </div>


            </div>

        </form>

      </div>
    </div>
  </div>

</aside>

<div class="feedback-modal modal-popup">
  <div class="modal-popup-dialogue">
    <div class="popup-header">
      <a href="#" class="close-popup"><i class="fa fa-times"></i></a>
    </div>
    <div class="popup-content">
      <p>
        Please use the form below to provide your feedback. Because your feedback is valuable to us,
         the information you submit in this form is recorded in our issue tracking system (JIRA), which is publicly available.
        You can track the status of your feedback using the ticket number displayed in the dialog once you submit the form.
      </p>
    </div>
  </div>
</div>

<main class="article" data-ceiling="topbar">
<div class="article-banner">
<i class="fas fa-file-alt"></i> <p>A newer version of this documentation is available.</p>
<a class="btn" href="../../current/hello-world/start-using-sdk.html">View Latest</a>
</div>
<div class="article-header">
<nav class="crumbs" aria-label="breadcrumbs">
<ul>
<li class="crumb"><a href="start-using-sdk.html">Python SDK</a></li>
<li class="crumb">Getting Started</li>
<li class="crumb"><a href="start-using-sdk.html">Start Using the Python SDK</a></li>
</ul>
</nav>
</div>
<article class="doc">
<div class="page-heading-title">
<h1 class="page">Install and Start Using the Python SDK with Couchbase Server</h1>
<div class="labels">
<ul></ul>
</div>


</div>
<div class="contributor-list-box">
<span class="last-commit-date" id="commitdate">    </span>
<ul id="contributorList"></ul>
<span  id="otherContributor"> + </span>
</div><div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
The Couchbase Python SDK allows Python applications to access a Couchbase cluster.
The Python SDK offers a traditional synchronous API as well as integration with <em>twisted</em>, <em>gevent</em>, and <em>asyncio</em>.
It depends on the C SDK, <em>libcouchbase</em>, (included automatically) which it uses for performance and reliability.
</blockquote>
</div>
<div class="paragraph">
<p>The Couchbase Python SDK 3.0 is a complete rewrite of the API, reducing the number of overloads to present a simplified surface area, and adding support for future Couchbase Server features like Collections and Scopes (available in Couchbase Server 6.5 &amp; 6.6 as a <a href="../concept-docs/collections.html" class="xref page">developer preview</a>).</p>
</div>
<div class="paragraph">
<p>The 3.0 Python SDK introduces comprehensive <a href="https://www.python.org/dev/peps/pep-0484/">PEP-484</a> style type annotations.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="requirements"><a class="anchor" href="#requirements"></a>Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Couchbase Python SDK bundles libcouchbase automatically, so no need to install it separately.
You may need CMake to install, although the installer will attempt to download it from PyPI automatically.</p>
</div>
<div class="paragraph">
<p>The Python SDK 3.0 requires Python 3, with Python 3.5 and above supported.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Currently the Python Client source distribution requires the OpenSSL headers and libraries that the Python client itself was built against to be installed prior to the client itself for TLS support to be provided.
Additionally the installer relies on PEP517 which older versions of PIP do not support.
If you experience issues installing it is advised to upgrade your PIP/setuptools installation as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ python3 -m pip install --upgrade pip setuptools wheel</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-on-linux"><a class="anchor" href="#installing-on-linux"></a>Installing on Linux</h2>
<div class="sectionbody">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_debian-and-ubuntu"></a>Debian and Ubuntu</p>
</li>
<li>
<p><a id="tabset1_rhel-and-centos"></a>RHEL and CentOS</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_debian-and-ubuntu">
<div class="paragraph">
<p>During first-time setup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ sudo apt-get install git-all python3-dev python3-pip python3-setuptools cmake build-essential</code></pre>
</div>
</div>
<div class="paragraph">
<p>For TLS/SSL support (optional):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ sudo apt-get install libssl-dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now install the latest Python SDK:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ python3 -m pip install couchbase</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_rhel-and-centos">
<div class="paragraph">
<p>During first-time setup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ sudo yum install gcc gcc-c++ python3-devel python3-pip cmake</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You may need to update your installed version of CMake.
For example, by following the steps <a href="https://idroot.us/install-cmake-centos-8" target="_blank" rel="noopener">here</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For TLS/SSL support (optional):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ sudo yum install openssl-devel</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now install the latest Python SDK:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ python3 -m pip install couchbase</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
RHEL/CentOS distributions may not provide the <code>python3-pip</code> package in the base repositories.
It may be found in the <a href="https://fedoraproject.org/wiki/EPEL" target="_blank" rel="noopener">EPEL</a> repository.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installation-on-mac-os-x"><a class="anchor" href="#installation-on-mac-os-x"></a>Installation on Mac OS X</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following example uses the Python supplied by the Homebrew package manager and not the vendor-supplied Python which ships with OS X.</p>
</div>
<div class="paragraph">
<p>To install the library on Mac OS X, first install Homebrew: <a href="http://brew.sh/" target="_blank" rel="noopener">Homebrew</a>.
Once <em>Homebrew</em> is configured:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Later versions of Mac OS X break the python3 homebrew installer.
Simple mitigating steps may be found <a href="https://stackoverflow.com/questions/47255517/brew-install-python3-didnt-install-pip3" target="_blank" rel="noopener">here</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Best practice is to use a Python virtual environment such as <em>venv</em> or <em>pyenv</em> to manage multible versions of Python, but in cases where this is not practicable follow the <code>brew</code> steps below, and also modify your <code>$PATH</code> as shown.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Get a list of the latest packages</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ brew update</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Install compatible Python 3</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ brew install python3</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">For ZSH (MacOS 10.15 Catalina and newer)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ echo 'export PATH="/usr/local/bin:"$PATH' &gt;&gt; ~/.zshrc</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">For BASH (MacOS 10.14 Mojave and older)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ echo 'export PATH="/usr/local/bin:"$PATH' &gt;&gt; ~/.bash_profile</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">For TLS/SSL support - optional</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ brew install openssl</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Installing the SDK</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ sudo -H python3 -m pip install couchbase</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-on-microsoft-windows"><a class="anchor" href="#installing-on-microsoft-windows"></a>Installing on Microsoft Windows</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ python3 -m pip install couchbase</code></pre>
</div>
</div>
<div class="paragraph">
<p>The standard Python distributions for Windows include OpenSSL DLLs, as PIP and the inbuilt <code>ssl</code> module require it for correct operation.
The binary wheels for Windows are packaged as a binary wheel built against the relevant version OpenSSL (which is fixed per Windows version of Python).</p>
</div>
<div class="paragraph">
<p>If you require a version without OpenSSL support, or that doesn&#8217;t have a suitable binary wheel on PyPi, follow the build instructions on the GitHub repo.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="hello-couchbase"><a class="anchor" href="#hello-couchbase"></a>Hello Couchbase</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At this point we want to transition from the terminal to your code editor of choice.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s now create an empty file named <code>cb-test.py</code> and walk through adding code step-by-step:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Connect to a cluster, bucket, and default collection;</p>
</li>
<li>
<p>Add and retrieve a new document;</p>
</li>
<li>
<p>Look up (SQL-type query) the new document by attribute value.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h3>
<div class="paragraph">
<p>As well as the Python SDK (see above), and a running instance of Couchbase Server, you will need to load up the Travel Sample Bucket
using either the <a href="#6.5@server:manage:manage-settings/install-sample-buckets.adoc#install-sample-buckets-with-the-ui" class="xref unresolved">Web interface</a>
or the <a href="#6.5@server:manage:manage-settings/install-sample-buckets.adoc#install-sample-buckets-with-the-cli" class="xref unresolved">command line</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="connection"><a class="anchor" href="#connection"></a>Connection</h3>
<div class="paragraph">
<p>The basic imports and connection string that you&#8217;ll need are given below&#8201;&#8212;&#8201;for more background information, refer to the <a href="../howtos/managing-connections.html#connection-strings" class="xref page">Managing Connections page</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/ccd799c368f616f304f5249e98295d3a35b20f1a/modules/hello-world/examples/hello_world_t.py#L6-L15"># needed for any cluster connection
from couchbase.cluster import Cluster, ClusterOptions
from couchbase_core.cluster import PasswordAuthenticator

# needed to support SQL++ (N1QL) query
from couchbase.cluster import QueryOptions

# get a reference to our cluster
cluster = Cluster('couchbase://localhost', ClusterOptions(
  PasswordAuthenticator('Administrator', 'password')))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Couchbase uses <a href="#6.5@server:learn:security/roles.adoc" class="xref unresolved">Role Based Access Control (RBAC)</a> to control access to resources.
For the sake of this example, we are connecting to Couchbase using the <em>Full Admin</em> role created during the installation of our Couchbase Server.
The connection is being made to a single Couchbase node, running locally.</p>
</div>
<div class="paragraph">
<p>Couchbase RBAC is fully described in the section <a href="#6.5@server:manage:manage-security/manage-users-and-roles.adoc" class="xref unresolved">Authorization</a>.
An <em>authenticator</em>, containing username and password, should be defined, and then passed to the cluster.
Following successful authentication, the bucket can be opened:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/ccd799c368f616f304f5249e98295d3a35b20f1a/modules/hello-world/examples/hello_world_t.py#L19-L20"># get a reference to our bucket
cb = cluster.bucket('travel-sample')</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
We are working with the <a href="https://docs.couchbase.com/server/current/manage/manage-settings/install-sample-buckets.html">travel-sample</a> data bucket. If you are not, substitute <em>travel-sample</em> with your <em>bucket-name</em>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you are connecting to Couchbase Cloud rather than a local Couchbase Server, then also refer to the <a href="#cloud-connections">Cloud section</a>, below.</p>
</div>
<div class="paragraph">
<p>See <a href="../howtos/managing-connections.html" class="xref page">Managing Connections</a> for more connection options and details about the connection string.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/ccd799c368f616f304f5249e98295d3a35b20f1a/modules/hello-world/examples/hello_world_t.py#L24-L25"># get a reference to the default collection
cb_coll = cb.default_collection()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The latest Couchbase Server release (6.5), brings a limited <em>Developer Preview</em> of Collections, allowing Documents to be grouped by purpose or theme, according to a specified <em>Collection</em>.
For our "Hello Couchbase" example we will simply use <code>DefaultCollection</code>, rather than a specific collection, which includes all documents in a bucket, and is forwards and backwards compatible with all supported versions of Couchbase Server.
Once the <em>Collection</em> feature is generally available, the best practice will be to group documents into collections by type.</p>
</div>
</div>
<div class="sect2">
<h3 id="document-addition-and-retrieval"><a class="anchor" href="#document-addition-and-retrieval"></a>Document Addition and Retrieval</h3>
<div class="paragraph">
<p>Let&#8217;s create a dictionary object in our application that we can add to our <code>travel-sample</code> bucket that conforms to the structure of a document of type <code>airline</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/ccd799c368f616f304f5249e98295d3a35b20f1a/modules/hello-world/examples/hello_world_t.py#L70-L77">airline = {
  "type": "airline",
  "id": 8091,
  "callsign": "CBS",
  "iata": None,
  "icao": None,
  "name": "Couchbase Airways",
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="../howtos/kv-operations.html" class="xref page">Document operations</a>, such as storing and retrieving documents, can be done using simple methods on the <code>Bucket</code> class such as <code>Bucket.get</code> and <code>Bucket.upsert</code>.
Simply pass the key (and value, if applicable) to the relevant methods.</p>
</div>
<div class="paragraph">
<p>The following function will <code>upsert()</code> a document and print the returned <a href="https://docs.couchbase.com/python-sdk/3.0/howtos/concurrent-document-mutations.html">CAS</a> value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/ccd799c368f616f304f5249e98295d3a35b20f1a/modules/hello-world/examples/hello_world_t.py#L31-L39">def upsert_document(doc):
  print("\nUpsert CAS: ")
  try:
    # key will equal: "airline_8091"
    key = doc["type"] + "_" + str(doc["id"])
    result = cb_coll.upsert(key, doc)
    print(result.cas)
  except Exception as e:
    print(e)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, we can simply call the <code>upsert_document</code> function passing in our <code>airline</code> document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/ccd799c368f616f304f5249e98295d3a35b20f1a/modules/hello-world/examples/hello_world_t.py#L81">upsert_document(airline)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s retrieve that document using a key-value operation. The following function runs a <code>get()</code> for a document key and either logs out the result or error in our console:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/ccd799c368f616f304f5249e98295d3a35b20f1a/modules/hello-world/examples/hello_world_t.py#L43-L50"># get document function
def get_airline_by_key(key):
  print("\nGet Result: ")
  try:
    result = cb_coll.get(key)
    print(result.content_as[str])
  except Exception as e:
    print(e)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Key-value Operations are described in detail on the <a href="../howtos/kv-operations.html" class="xref page">KV Operations page</a>.</p>
</div>
<div class="paragraph">
<p>Now, we can simply call the <code>get_airline_by_key</code> function passing in our valid document key <code>airline_8091</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/ccd799c368f616f304f5249e98295d3a35b20f1a/modules/hello-world/examples/hello_world_t.py#L85">get_airline_by_key("airline_8091")</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="sql-lookup"><a class="anchor" href="#sql-lookup"></a>SQL++ Lookup</h3>
<div class="paragraph">
<p>Couchbase N1QL queries are performed by invoking the <code>Cluster.query()</code> method.  The following function executes a lookup for documents of <code>type='airline'</code> by a provided <code>callsign</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/ccd799c368f616f304f5249e98295d3a35b20f1a/modules/hello-world/examples/hello_world_t.py#L54-L64"># query for new document by callsign
def lookup_by_callsign(cs):
  print("\nLookup Result: ")
  try:
    sql_query = 'SELECT VALUE name FROM `travel-sample` WHERE type = "airline" AND callsign = $1' 
    row_iter = cluster.query(
      sql_query, 
      QueryOptions(positional_parameters=[cs]))
    for row in row_iter: print(row)
  except Exception as e:
    print(e)</code></pre>
</div>
</div>
<div class="paragraph">
<p>We call the <code>lookup_by_callsign</code> function passing in our callsign <code>CBS</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python" data-source-url="https://github.com/couchbase/docs-sdk-python/blob/ccd799c368f616f304f5249e98295d3a35b20f1a/modules/hello-world/examples/hello_world_t.py#L89">lookup_by_callsign("CBS")</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="execute"><a class="anchor" href="#execute"></a>Execute!</h3>
<div class="paragraph">
<p>Now we can run our code using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ python3 cb-test.py</code></pre>
</div>
</div>
<div class="paragraph">
<p>The results you should expect are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">Upsert CAS:
1598469741559152640

Get Result:
{'type': 'airline', 'id': 8091, 'callsign': 'CBS', 'iata': None, 'icao': None, 'name': 'Couchbase Airways'}

Lookup Result:
Couchbase Airways</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cloud-connections"><a class="anchor" href="#cloud-connections"></a>Cloud Connections</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For developing on Couchbase Cloud, try the <a href="https://github.com/couchbase/docs-sdk-python/blob/release/3.0/modules/devguide/examples/python/cloud.py">Cloud-based Hello World program</a>.</p>
</div>
<div class="paragraph">
<p>If you are not working from the same <em>Availability Zone</em> as your Couchbase Cloud, refer to the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Notes on <a href="../ref/client-settings.html#constrained-network-environments" class="xref page">Constrained Network Environments</a>.</p>
</li>
<li>
<p><a href="../project-docs/compatibility.html#network-requirements" class="xref page">Network Requirements</a>.</p>
</li>
<li>
<p>If you have a consumer-grade router which has problems with DNS-SRV records review our <a href="../howtos/troubleshooting-cloud-connections.html#troubleshooting-host-not-found" class="xref page">Troubleshooting Guide</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="additional-resources"><a class="anchor" href="#additional-resources"></a>Additional Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The API reference is generated for each release and the latest can be found <a href="http://docs.couchbase.com/sdk-api/couchbase-python-client/">here</a>.</p>
</div>
<div class="paragraph">
<p>Older API references are linked from their respective sections in the <a href="../project-docs/sdk-release-notes.html" class="xref page">Individual Release Notes</a>.
Most of the API documentation can also be accessed via <code>pydoc</code>.</p>
</div>
<div class="paragraph">
<p><a href="../project-docs/migrating-sdk-code-to-3.n.html" class="xref page">The Migrating from SDK2 to 3 page</a> highlights the main differences to be aware of when migrating your code.</p>
</div>
<div class="paragraph">
<p>Couchbase welcomes community contributions to the Python SDK.
The Python SDK source code is available on <a href="https://github.com/couchbase/couchbase-python-client">GitHub</a>.</p>
</div>
<div class="sect2">
<h3 id="pypy-support"><a class="anchor" href="#pypy-support"></a>PyPy support</h3>
<div class="paragraph">
<p>Because the Python SDK is written primarily in C using the CPython API, the official SDK will not work on PyPy.</p>
</div>
<div class="paragraph">
<p>Please <a href="https://issues.couchbase.com/projects/PYCBC/issues">create a Jira ticket</a> if you require a PyPy-compatible version of the SDK.</p>
</div>
</div>
</div>
</div>
</article>
</main>
</div>
<footer class="footer">
  <div class="container">
    <div class="footer-links">
      <div class="col">
        <div class="footer-logo">
          <a href="https://www.couchbase.com" class="icon">
            <img src="../../../_/img/couchbase-logo.svg" alt="Couchbase">
          </a>
        </div>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://docs.couchbase.com" target="_blank" rel="noopener">Documentation</a></li>
          <li><a href="https://forums.couchbase.com" target="_blank" rel="noopener">Forums</a></li>
          <li><a href="https://support.couchbase.com" target="_blank" rel="noopener">Support</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://developer.couchbase.com" target="_blank" rel="noopener">Developer Portal</a></li>
          <li><a href="https://blog.couchbase.com" target="_blank" rel="noopener">Blog</a></li>
          <li><a href="https://www.couchbase.com/resources">Resources</a></li>
        </ul>
      </div>
      <div class="col">
        <ul>
          <li><a href="https://www.couchbase.com/get-started-developing-nosql">Get Started</a></li>
          <li><a href="https://www.couchbase.com/downloads">Downloads</a></li>
          <li><a href="https://learn.couchbase.com/store?utf8=%E2%9C%93&ss=1&ct=78327&commit=Filter" target="_blank" rel="noopener">Training</a></li>
        </ul>
      </div>
      <div class="col">
        <ul class="social-icons">
          <li>
            <svg  width="14" height="14" viewBox="0 0 32.1 26.1"> <path id="twitter" class="cls-1" d="M32,7.1a11.836,11.836,0,0,1-3.8,1,6.462,6.462,0,0,0,2.9-3.6,12.606,12.606,0,0,1-4.2,1.6A6.492,6.492,0,0,0,22.1,4a6.594,6.594,0,0,0-6.6,6.6,7.719,7.719,0,0,0,.2,1.5A18.458,18.458,0,0,1,2.2,5.2a6.294,6.294,0,0,0-.9,3.3A6.765,6.765,0,0,0,4.2,14a6.109,6.109,0,0,1-3-.8v.1a6.543,6.543,0,0,0,5.3,6.4,4.678,4.678,0,0,1-1.7.2,4.869,4.869,0,0,1-1.2-.1,6.679,6.679,0,0,0,6.1,4.6,12.917,12.917,0,0,1-8.2,2.8,9.151,9.151,0,0,1-1.6-.1,18.438,18.438,0,0,0,10.1,3c12.1,0,18.7-10,18.7-18.7v-.8A13.336,13.336,0,0,0,32,7.2Z" transform="translate(0.1 -4)"/></svg>
            <a href="https://twitter.com/couchbase" class="icon">
              Twitter
            </a>
          </li>
          <li>
          <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="linkedin" class="cls-1" d="M29,0H3A3.076,3.076,0,0,0,0,3V29a3.009,3.009,0,0,0,3,3H29a2.946,2.946,0,0,0,3-3V3A3.009,3.009,0,0,0,29,0ZM12,26H8V12h4ZM10,10a2,2,0,1,1,2-2A2.006,2.006,0,0,1,10,10ZM26,26H22V18a2,2,0,0,0-4,0v8H14V12h4v2.5c.8-1.1,2.1-2.5,3.5-2.5A4.736,4.736,0,0,1,26,17Z"/></svg>
              <a href="https://www.linkedin.com/company/couchbase" class="icon">
             Linkedin
            </a>
          </li>
          <li>
            <svg  width="14" height="14" viewBox="0 0 32 32"> <path id="facebook" class="cls-1" d="M29,0H3A2.652,2.652,0,0,0,0,3V29a2.652,2.652,0,0,0,3,3H16V18H12V14h4V12a6.452,6.452,0,0,1,6-6h4v4H22a2.151,2.151,0,0,0-2,2v2h6l-1,4H20V32h9a2.652,2.652,0,0,0,3-3V3A2.652,2.652,0,0,0,29,0Z"/></svg>
            <a href="https://www.facebook.com/Couchbase" class="icon">
            Facebook
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="footer-terms">
      <div class="footer-terms-copyright">
          <span>Â© 2024 Couchbase, Inc. Couchbase, Couchbase Lite and the Couchbase logo are registered trademarks of Couchbase, Inc.</span>
      </div>
      <div class="footer-terms-links">
        <a href="https://www.couchbase.com/terms-of-use">Terms of Use</a>
        <a href="https://www.couchbase.com/privacy-policy">Privacy Policy</a>
        <a href="https://www.couchbase.com/cookie-policy">Cookie Policy</a>
        <a href="https://www.couchbase.com/support-policy">Support Policy</a>
        <a href="https://info.couchbase.com/unsubscribe-or-manage-preferences.html" target="_blank" rel="noopener">Marketing Preference Center</a>
      </div>
    </div>
  </div>
</footer>
<script src="../../../_/js/site-navigation-data.js"></script>
<script id="page-navigation-group" type="application/json">
{"title":"SDKs","components":["dotnet-sdk","c-sdk","go-sdk","java-sdk","kotlin-sdk","nodejs-sdk","php-sdk","python-sdk","ruby-sdk","scala-sdk","cxx-txns","elasticsearch-connector","kafka-connector","spark-connector","tableau-connector","sdk-extensions"],"latestVersions":{"dotnet-sdk":"3.4","c-sdk":"3.3","go-sdk":"2.6","java-sdk":"3.4","kotlin-sdk":"1.1","nodejs-sdk":"4.2","php-sdk":"4.0","python-sdk":"4.1","ruby-sdk":"3.3","scala-sdk":"1.4","cxx-txns":"1.0","elasticsearch-connector":"4.4","kafka-connector":"4.1","spark-connector":"3.3","tableau-connector":"1.x","sdk-extensions":"master"}}
</script>
<template id="run-code-panel">
<div class="action-panel">
  <form class="action-panel-control" method="POST" action="https://couchbase.live/run" target="run-code-output">
    <input type="hidden" name="lang">
    <input type="hidden" name="code">
    <input type="hidden" name="from" value="docs">
    <div class="controls">
      <button class="control-button rerun" type="submit"><i class="fas fa-redo"></i></button>
      <span class="shell-name control-label">Output</span>
      <button class="control-button close"><i class="fas fa-times"></i> Close</button>
    </div>
  </form>
  <iframe class="run-code-output" name="run-code-output"></iframe>
</div>
</template>
<script id="site-script" src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/tabs.js" data-sync-storage-key="preferred-tab"></script>
<script defer src="../../../_/js/vendor/fontawesome-icon-defs.js"></script>
<script defer src="../../../_/js/vendor/fontawesome.js" data-search-pseudo-elements="true"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
</body>
</html>
